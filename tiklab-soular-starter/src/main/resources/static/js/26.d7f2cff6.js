(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{618:function(e,r,t){"use strict";t(119);var n=t(53),a=t(0),l=t.n(a),u=t(526),i="/Users/gaomengyuan/tiklab/tiklab-soular-ui/src/common/breadCrumb/BreadCrumb.js";r.a=function(e){var r=e.firstItem,t=e.secondItem,a=e.onClick,m=e.children;return l.a.createElement("div",{className:"soular-breadcrumb",__source:{fileName:i,lineNumber:12,columnNumber:9}},l.a.createElement(n.default,{__source:{fileName:i,lineNumber:13,columnNumber:13}},l.a.createElement("span",{className:a?"soular-breadcrumb-first":"",onClick:a,__source:{fileName:i,lineNumber:14,columnNumber:17}},a&&l.a.createElement(u.default,{style:{marginRight:8},__source:{fileName:i,lineNumber:15,columnNumber:33}}),l.a.createElement("span",{className:t?"soular-breadcrumb-span":"",__source:{fileName:i,lineNumber:16,columnNumber:21}},r)),t&&l.a.createElement("span",{__source:{fileName:i,lineNumber:20,columnNumber:32}}," /   ",t)),l.a.createElement("div",{__source:{fileName:i,lineNumber:22,columnNumber:13}},m))}},868:function(e,r,t){"use strict";t.r(r);t(325);var n,a,l,u=t(219),i=(t(201),t(81)),m=(t(517),t(519)),o=(t(518),t(520)),c=(t(224),t(138)),s=(t(220),t(62)),f=(t(327),t(120)),b=t(0),N=t.n(b),d=t(284),p=t(618),_=t(10),v=t(18);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,r,t,n){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function y(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function h(e,r,t){return r&&y(e.prototype,r),t&&y(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function w(e){var r=function(e,r){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==g(r)?r:r+""}function I(e,r,t,n,a){var l={};return Object.keys(n).forEach((function(e){l[e]=n[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=t.slice().reverse().reduce((function(t,n){return n(e,r,t)||t}),l),a&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(a):void 0,l.initializer=void 0),void 0===l.initializer?(Object.defineProperty(e,r,l),null):l}var j=new(a=I((n=h((function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"importData",a,this),E(this,"findImportMessage",l,this)}))).prototype,"importData",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){return _.Axios.post("/data/import",e)}}}),l=I(n.prototype,"findImportMessage",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){return _.Axios.post("/data/findImportMessage")}}}),n),S="/Users/gaomengyuan/tiklab/tiklab-soular-ui/src/setting/integration/dataImport/components/DataImport.js";function O(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,l,u,i=[],m=!0,o=!1;try{if(l=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;m=!1}else for(;!(m=(n=l.call(t)).done)&&(i.push(n.value),i.length!==r);m=!0);}catch(e){o=!0,a=e}finally{try{if(!m&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw a}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return k(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?k(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}r.default=function(e){var r,t=j.importData,n=j.findImportMessage,a=O(f.default.useForm(),1)[0],l=Object(b.useRef)(),v=O(Object(b.useState)(null),2),g=v[0],E=v[1],y=O(Object(b.useState)(!1),2),h=y[0],w=y[1],I=O(Object(b.useState)(!0),2),k=I[0],x=I[1],z=O(Object(b.useState)(!0),2),C=z[0],A=z[1];Object(b.useEffect)((function(){null!=l&&l.current&&k&&(l.current.scrollTop=l.current.scrollHeight)}),[k,null==g?void 0:g.message]),Object(b.useEffect)((function(){return T(),function(){E(null),clearInterval(r),A(!0),w(!1)}}),[]);var M,P,T=function(){n().then((function(e){0===e.code&&e.data.state&&(E(e.data),w(!0),q())})).finally((function(){return A(!1)}))},q=function(){clearInterval(r),r=setInterval((function(){return n().then((function(e){0===e.code?(E(e.data),e.data.state?w(!0):clearInterval(r)):(s.default.info(e.msg),clearInterval(r),w(!1))})).finally((function(){return A(!1)}))}),1e3)},D=0;return C?N.a.createElement("div",{className:"data-import-loading",__source:{fileName:S,lineNumber:161,columnNumber:13}},N.a.createElement(c.default,{size:"large",__source:{fileName:S,lineNumber:162,columnNumber:17}}),N.a.createElement("div",{className:"data-import-loading-title",__source:{fileName:S,lineNumber:163,columnNumber:17}},"加载中")):h?N.a.createElement(m.default,{className:"data-import",__source:{fileName:S,lineNumber:171,columnNumber:13}},N.a.createElement(o.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"18",offset:"3"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"},__source:{fileName:S,lineNumber:172,columnNumber:17}},N.a.createElement("div",{className:"soular-home-limited data-import-progress",__source:{fileName:S,lineNumber:180,columnNumber:21}},N.a.createElement(p.a,{firstItem:"用户导入",onClick:null!=g&&g.state?null:function(){w(!1)},__source:{fileName:S,lineNumber:181,columnNumber:25}}),N.a.createElement("div",{className:"progress-content-info",__source:{fileName:S,lineNumber:185,columnNumber:25}},N.a.createElement("div",{className:"info-left",__source:{fileName:S,lineNumber:186,columnNumber:29}},N.a.createElement("div",{__source:{fileName:S,lineNumber:187,columnNumber:33}},N.a.createElement("span",{__source:{fileName:S,lineNumber:188,columnNumber:37}},"产品类型："),N.a.createElement("span",{__source:{fileName:S,lineNumber:189,columnNumber:37}},_.productTitle[null==g||null===(M=g.database)||void 0===M?void 0:M.application])),N.a.createElement("div",{__source:{fileName:S,lineNumber:191,columnNumber:33}},N.a.createElement("span",{__source:{fileName:S,lineNumber:192,columnNumber:37}},"数据库链接地址:"),N.a.createElement("span",{__source:{fileName:S,lineNumber:193,columnNumber:37}},null==g||null===(P=g.database)||void 0===P?void 0:P.url))),100!==(null==g?void 0:g.speed)||null!=g&&g.state?100===(null==g?void 0:g.speed)||null!=g&&g.state?N.a.createElement("div",{className:"info-right-run",__source:{fileName:S,lineNumber:155,columnNumber:16}},"运行中"):N.a.createElement("div",{className:"info-right-error",__source:{fileName:S,lineNumber:153,columnNumber:20}},"失败"):N.a.createElement("div",{className:"info-right-success",__source:{fileName:S,lineNumber:150,columnNumber:20}},"成功")),N.a.createElement("div",{className:"progress-content-title",__source:{fileName:S,lineNumber:198,columnNumber:25}},"进度"),N.a.createElement("div",{className:"progress-content-bar",__source:{fileName:S,lineNumber:200,columnNumber:25}},N.a.createElement("div",{className:"up-progress-bar",__source:{fileName:S,lineNumber:201,columnNumber:29}},N.a.createElement("div",{className:"progress-bar",style:{width:"".concat((null==g?void 0:g.speed)||0,"%")},__source:{fileName:S,lineNumber:202,columnNumber:33}})),N.a.createElement("div",{className:"up-progress-desc",__source:{fileName:S,lineNumber:206,columnNumber:29}},(null==g?void 0:g.speed)||0,"%")),N.a.createElement("div",{className:"progress-content-title",__source:{fileName:S,lineNumber:208,columnNumber:25}},"输出"),N.a.createElement("div",{className:"progress-content-log",ref:l,onWheel:function(){k&&x(!1)},onMouseDown:function(e){if(0===e.button){if(!k)return;D=l.current.scrollTop}},onMouseUp:function(e){if(0===e.button){if(!k)return;var r=l.current.scrollTop;D!==r&&x(!1)}},__source:{fileName:S,lineNumber:210,columnNumber:25}},(null==g?void 0:g.message)||"暂无日志")))):N.a.createElement(m.default,{className:"data-import",__source:{fileName:S,lineNumber:225,columnNumber:9}},N.a.createElement(o.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"18",offset:"3"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"},__source:{fileName:S,lineNumber:226,columnNumber:13}},N.a.createElement("div",{className:"soular-home-limited",__source:{fileName:S,lineNumber:234,columnNumber:17}},N.a.createElement(p.a,{firstItem:"用户导入",__source:{fileName:S,lineNumber:235,columnNumber:21}}),N.a.createElement("div",{className:"data-content-form",__source:{fileName:S,lineNumber:236,columnNumber:21}},N.a.createElement(f.default,{form:a,layout:"vertical",initialValues:{application:"arbess"},__source:{fileName:S,lineNumber:237,columnNumber:25}},N.a.createElement(f.default.Item,{label:"选择产品",name:"application",rules:[{required:!0,message:"数据库地址不能为空"}],__source:{fileName:S,lineNumber:242,columnNumber:29}},N.a.createElement(i.default,{options:_.productSelect,__source:{fileName:S,lineNumber:249,columnNumber:33}})),N.a.createElement(f.default.Item,{label:"数据库链接信息",name:"url",rules:[{required:!0,message:"数据库链接信息不能为空"}],__source:{fileName:S,lineNumber:251,columnNumber:29}},N.a.createElement(u.default,{autoComplete:"off",placeholder:"数据库链接信息，如 jdbc:postgresql://192.168.10.1:5432/tiklab_soular",__source:{fileName:S,lineNumber:258,columnNumber:33}})),N.a.createElement(f.default.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"用户名不能为空"}],__source:{fileName:S,lineNumber:263,columnNumber:29}},N.a.createElement(u.default,{placeholder:"用户名",__source:{fileName:S,lineNumber:270,columnNumber:33}})),N.a.createElement(f.default.Item,{label:"密码",name:"password",rules:[{required:!0,message:"密码不能为空"}],__source:{fileName:S,lineNumber:272,columnNumber:29}},N.a.createElement(u.default.Password,{placeholder:"密码",__source:{fileName:S,lineNumber:279,columnNumber:33}})))),N.a.createElement("div",{className:"data-content-btn",__source:{fileName:S,lineNumber:283,columnNumber:21}},N.a.createElement(d.a,{onClick:function(){a.validateFields().then((function(e){w(!0),A(!0),t(e),T(),a.resetFields(null)}))},type:"primary",title:"导入",__source:{fileName:S,lineNumber:284,columnNumber:25}})))))}}}]);