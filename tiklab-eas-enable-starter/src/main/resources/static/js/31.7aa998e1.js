(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{678:function(e,t,a){"use strict";a.r(t);a(403);var r=a(402),n=(a(179),a(81)),l=(a(124),a(61)),i=(a(411),a(410)),c=(a(417),a(414)),o=(a(412),a(413)),u=(a(64),a(22)),s=(a(182),a(65)),m=(a(184),a(105)),d=a(0),b=a.n(d),f=a(446),p=a(262),g=a(444),y=a(642),E=a(493);function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,n,l=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(l.push(r.value),!t||l.length!==t);i=!0);}catch(e){c=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw n}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var I=m.a.Option,k={labelCol:{span:6},wrapperCol:{span:18}},N=function(){var e=Object(g.a)().t,t=j(s.a.useForm(),1)[0],a=j(Object(d.useState)([]),2),O=a[0],w=a[1],S=j(Object(d.useState)({}),2),N=S[0],W=S[1],C=j(Object(d.useState)(!1),2),J=C[0],P=C[1],U=j(Object(d.useState)({}),2),T=U[0],q=U[1],A=j(Object(d.useState)(null),2),D=A[0],x=A[1];Object(d.useEffect)((function(){y.a.getWidgetList(T).then((function(e){0===e.code&&(w(e.data),W(e.data[0]||{}))}))}),[T]);var F=function(){y.a.getWidgetList(T).then((function(e){0===e.code&&w(e.data)}))},L=function(e){y.a.deleteWidget(e).then((function(t){if(0===t.code){var a=O.filter((function(t){return t.id!==e}));w(a),N.id===e&&W(a[0]||{})}}))},M=function(e){t.setFieldsValue({name:e.name,code:e.code,dashboardType:e.dashboardType,type:e.type,webUrl:e.webUrl,apiUrl:e.apiUrl,description:e.description}),x(e.id),P(!0)};return b.a.createElement("div",{className:"widgetMangent"},b.a.createElement("div",{className:"left"},b.a.createElement("div",{className:"search"},b.a.createElement(m.a,{onChange:function(e){q(e?{type:e}:{})},allowClear:!0,placeholder:"请选择类型",style:{width:"100%",paddingRight:4}},Object.keys(E.b).map((function(e){return b.a.createElement(I,{value:e,key:e},E.b[e])}))),b.a.createElement(u.a,{onClick:function(){P(!0)}},"创建")),b.a.createElement(o.b,{dataSource:O,renderItem:function(e){return b.a.createElement(o.b.Item,{key:e.id,actions:M?[b.a.createElement(f.a,{onClick:function(){return M(e)}}),b.a.createElement(p.a,{onClick:function(){return L(e.id)}})]:[b.a.createElement(p.a,{onClick:function(){return L(e.id)}})]},b.a.createElement("div",{className:"listName",onClick:function(){return function(e){W(e)}(e)}},e.name))}})),b.a.createElement(c.a,{type:"vertical",style:{height:"100%"}}),b.a.createElement("div",{className:"right"},b.a.createElement(i.b,{title:"TODO 导航栏组件提取",bordered:!0,column:1,labelStyle:{width:160}},"{}"!==JSON.stringify(N)&&b.a.createElement(i.b.Item,{label:"Widget名称"},N.name),"{}"!==JSON.stringify(N)&&b.a.createElement(i.b.Item,{label:"Widget编码"},N.code),"{}"!==JSON.stringify(N)&&b.a.createElement(i.b.Item,{label:"所属项目"},E.b[N.type]),"{}"!==JSON.stringify(N)&&b.a.createElement(i.b.Item,{label:"布局类型"},E.a[N.dashboardType]),"{}"!==JSON.stringify(N)&&b.a.createElement(i.b.Item,{label:"页面跳转url"},N.webUrl),"{}"!==JSON.stringify(N)&&b.a.createElement(i.b.Item,{label:"接口url"},N.apiUrl),"{}"!==JSON.stringify(N)&&b.a.createElement(i.b.Item,{label:"描述"},N.description),"{}"===JSON.stringify(N)&&b.a.createElement(i.b.Item,null,b.a.createElement(l.a,{description:b.a.createElement("span",null,"widget列表为空，你需要创建一个")})))),b.a.createElement(r.a,{visible:J,closable:!1,title:"Widget",destroyOnClose:!0,okText:e("tiklab-actions.save"),cancelText:e("tiklab-actions.close"),onOk:function(){t.validateFields().then((function(e){D?y.a.updateWidget(v(v({},e),{},{id:D})).then((function(t){if(0!==t.code)return message.error(t.msg);D===N.id&&W(v(v({},e),{},{id:D})),P(!1),F(),x(null)})):y.a.createWidget(e).then((function(e){if(0!==e.code)return message.error(e.msg);P(!1),F(),x(null)}))}))},onCancel:function(){P(!1),x(null)},width:600},b.a.createElement(s.a,h({},k,{form:t,preserve:!1}),b.a.createElement(s.a.Item,{name:"name",label:"Widget名称",rules:[{required:!0,message:"Widget名称必填"}]},b.a.createElement(n.a,{placeholder:"请输入Widget名称"})),b.a.createElement(s.a.Item,{name:"type",label:"所属项目",rules:[{required:!0,message:"请选择类型"}]},b.a.createElement(m.a,{placeholder:"请选择类型",style:{width:"100%"}},Object.keys(E.b).map((function(e){return b.a.createElement(I,{value:e,key:e},E.b[e])})))),b.a.createElement(s.a.Item,{name:"dashboardType",label:"布局类型",rules:[{required:!0,message:"请选择布局类型"}]},b.a.createElement(m.a,{placeholder:"请选择布局类型",style:{width:"100%"}},b.a.createElement(I,{value:"normal"},"通用"),b.a.createElement(I,{value:"left"},"左侧"),b.a.createElement(I,{value:"right"},"右侧"))),b.a.createElement(s.a.Item,{name:"code",label:"Widget编码",rules:[{required:!0,message:"Widget编码"}]},b.a.createElement(n.a,{placeholder:"请输入Widget编码"})),b.a.createElement(s.a.Item,{name:"webUrl",label:"页面跳转url",rules:[{required:!0,message:"url前缀"},{type:"url",message:"无效的url"}]},b.a.createElement(n.a,{placeholder:"页面跳转url"})),b.a.createElement(s.a.Item,{name:"apiUrl",label:"接口url",rules:[{required:!0,message:"url前缀"},{type:"url",message:"无效的url"}]},b.a.createElement(n.a,{placeholder:"接口url"})),b.a.createElement(s.a.Item,{name:"description",label:"描述",rules:[{required:!0,message:"请输入描述"}]},b.a.createElement(n.a,{placeholder:"请输入描述"})))))};t.default=function(){return b.a.createElement(N,null)}}}]);