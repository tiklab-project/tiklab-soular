(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{624:function(e,r,t){"use strict";t(119);var a=t(53),n=t(0),l=t.n(n),u=t(525),i="/Users/gaomengyuan/tiklab/tiklab-soular-ui/src/common/breadCrumb/BreadCrumb.js";r.a=function(e){var r=e.firstItem,t=e.secondItem,n=e.onClick,o=e.children;return l.a.createElement("div",{className:"soular-breadcrumb",__source:{fileName:i,lineNumber:12,columnNumber:9}},l.a.createElement(a.default,{__source:{fileName:i,lineNumber:13,columnNumber:13}},l.a.createElement("span",{className:n?"soular-breadcrumb-first":"",onClick:n,__source:{fileName:i,lineNumber:14,columnNumber:17}},n&&l.a.createElement(u.default,{style:{marginRight:8},__source:{fileName:i,lineNumber:15,columnNumber:33}}),l.a.createElement("span",{className:t?"soular-breadcrumb-span":"",__source:{fileName:i,lineNumber:16,columnNumber:21}},r)),t&&l.a.createElement("span",{__source:{fileName:i,lineNumber:20,columnNumber:32}}," /   ",t)),l.a.createElement("div",{__source:{fileName:i,lineNumber:22,columnNumber:13}},o))}},861:function(e,r,t){"use strict";t.r(r);t(322);var a,n,l,u=t(217),i=(t(199),t(81)),o=(t(515),t(517)),m=(t(516),t(518)),c=(t(224),t(137)),s=(t(218),t(62)),f=(t(324),t(120)),b=t(0),N=t.n(b),d=t(281),p=t(624),_=t(10),v=t(17);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,r,t,a){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(a):void 0})}function y(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,w(a.key),a)}}function h(e,r,t){return r&&y(e.prototype,r),t&&y(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function w(e){var r=function(e,r){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,r||"default");if("object"!=g(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==g(r)?r:r+""}function I(e,r,t,a,n){var l={};return Object.keys(a).forEach((function(e){l[e]=a[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=t.slice().reverse().reduce((function(t,a){return a(e,r,t)||t}),l),n&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(n):void 0,l.initializer=void 0),void 0===l.initializer?(Object.defineProperty(e,r,l),null):l}var j=new(n=I((a=h((function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"importData",n,this),E(this,"findImportMessage",l,this)}))).prototype,"importData",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){return _.Axios.post("/data/import",e)}}}),l=I(a.prototype,"findImportMessage",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){return _.Axios.post("/data/findImportMessage")}}}),a),S="/Users/gaomengyuan/tiklab/tiklab-soular-ui/src/setting/integration/dataImport/components/DataImport.js";function O(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,n,l,u,i=[],o=!0,m=!1;try{if(l=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;o=!1}else for(;!(o=(a=l.call(t)).done)&&(i.push(a.value),i.length!==r);o=!0);}catch(e){m=!0,n=e}finally{try{if(!o&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(m)throw n}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return x(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?x(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=Array(r);t<r;t++)a[t]=e[t];return a}r.default=function(e){var r,t=j.importData,a=j.findImportMessage,n=O(f.default.useForm(),1)[0],l=Object(b.useRef)(),v=O(Object(b.useState)(null),2),g=v[0],E=v[1],y=O(Object(b.useState)(!1),2),h=y[0],w=y[1],I=O(Object(b.useState)(!0),2),x=I[0],z=I[1],C=O(Object(b.useState)(!0),2),k=C[0],A=C[1];Object(b.useEffect)((function(){null!=l&&l.current&&x&&(l.current.scrollTop=l.current.scrollHeight)}),[x,null==g?void 0:g.message]),Object(b.useEffect)((function(){return T(),function(){E(null),clearInterval(r),A(!0),w(!1)}}),[]);var M,P,T=function(){a().then((function(e){0===e.code&&e.data.state&&(E(e.data),w(!0),q()),A(!1)}))},q=function(){clearInterval(r),r=setInterval((function(){return a().then((function(e){0===e.code?(E(e.data),e.data.state?w(!0):clearInterval(r)):(s.default.info(e.msg),clearInterval(r),w(!1)),A(!1)}))}),1e3)},D=0;return k?N.a.createElement("div",{className:"data-import-loading",__source:{fileName:S,lineNumber:166,columnNumber:13}},N.a.createElement(c.default,{size:"large",__source:{fileName:S,lineNumber:167,columnNumber:17}}),N.a.createElement("div",{className:"data-import-loading-title",__source:{fileName:S,lineNumber:168,columnNumber:17}},"加载中")):h?N.a.createElement(o.default,{className:"data-import",__source:{fileName:S,lineNumber:176,columnNumber:13}},N.a.createElement(m.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"18",offset:"3"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"},__source:{fileName:S,lineNumber:177,columnNumber:17}},N.a.createElement("div",{className:"soular-home-limited data-import-progress",__source:{fileName:S,lineNumber:185,columnNumber:21}},N.a.createElement(p.a,{firstItem:"用户导入",onClick:null!=g&&g.state?null:function(){w(!1)},__source:{fileName:S,lineNumber:186,columnNumber:25}}),N.a.createElement("div",{className:"progress-content-info",__source:{fileName:S,lineNumber:190,columnNumber:25}},N.a.createElement("div",{className:"info-left",__source:{fileName:S,lineNumber:191,columnNumber:29}},N.a.createElement("div",{__source:{fileName:S,lineNumber:192,columnNumber:33}},N.a.createElement("span",{__source:{fileName:S,lineNumber:193,columnNumber:37}},"产品类型："),N.a.createElement("span",{__source:{fileName:S,lineNumber:194,columnNumber:37}},_.productTitle[null==g||null===(M=g.database)||void 0===M?void 0:M.application])),N.a.createElement("div",{__source:{fileName:S,lineNumber:196,columnNumber:33}},N.a.createElement("span",{__source:{fileName:S,lineNumber:197,columnNumber:37}},"数据库链接地址:"),N.a.createElement("span",{__source:{fileName:S,lineNumber:198,columnNumber:37}},null==g||null===(P=g.database)||void 0===P?void 0:P.url))),100!==(null==g?void 0:g.speed)||null!=g&&g.state?100===(null==g?void 0:g.speed)||null!=g&&g.state?N.a.createElement("div",{className:"info-right-run",__source:{fileName:S,lineNumber:160,columnNumber:16}},"运行中"):N.a.createElement("div",{className:"info-right-error",__source:{fileName:S,lineNumber:158,columnNumber:20}},"失败"):N.a.createElement("div",{className:"info-right-success",__source:{fileName:S,lineNumber:155,columnNumber:20}},"成功")),N.a.createElement("div",{className:"progress-content-title",__source:{fileName:S,lineNumber:203,columnNumber:25}},"进度"),N.a.createElement("div",{className:"progress-content-bar",__source:{fileName:S,lineNumber:205,columnNumber:25}},N.a.createElement("div",{className:"up-progress-bar",__source:{fileName:S,lineNumber:206,columnNumber:29}},N.a.createElement("div",{className:"progress-bar",style:{width:"".concat((null==g?void 0:g.speed)||0,"%")},__source:{fileName:S,lineNumber:207,columnNumber:33}})),N.a.createElement("div",{className:"up-progress-desc",__source:{fileName:S,lineNumber:211,columnNumber:29}},(null==g?void 0:g.speed)||0,"%")),N.a.createElement("div",{className:"progress-content-title",__source:{fileName:S,lineNumber:213,columnNumber:25}},"输出"),N.a.createElement("div",{className:"progress-content-log",ref:l,onWheel:function(){x&&z(!1)},onMouseDown:function(e){if(0===e.button){if(!x)return;D=l.current.scrollTop}},onMouseUp:function(e){if(0===e.button){if(!x)return;var r=l.current.scrollTop;D!==r&&z(!1)}},__source:{fileName:S,lineNumber:215,columnNumber:25}},(null==g?void 0:g.message)||"暂无日志")))):N.a.createElement(o.default,{className:"data-import",__source:{fileName:S,lineNumber:230,columnNumber:9}},N.a.createElement(m.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"18",offset:"3"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"},__source:{fileName:S,lineNumber:231,columnNumber:13}},N.a.createElement("div",{className:"soular-home-limited",__source:{fileName:S,lineNumber:239,columnNumber:17}},N.a.createElement(p.a,{firstItem:"用户导入",__source:{fileName:S,lineNumber:240,columnNumber:21}}),N.a.createElement("div",{className:"data-content-form",__source:{fileName:S,lineNumber:241,columnNumber:21}},N.a.createElement(f.default,{form:n,layout:"vertical",initialValues:{application:"arbess"},__source:{fileName:S,lineNumber:242,columnNumber:25}},N.a.createElement(f.default.Item,{label:"选择产品",name:"application",rules:[{required:!0,message:"数据库地址不能为空"}],__source:{fileName:S,lineNumber:247,columnNumber:29}},N.a.createElement(i.default,{options:_.productSelect,__source:{fileName:S,lineNumber:254,columnNumber:33}})),N.a.createElement(f.default.Item,{label:"数据库链接信息",name:"url",rules:[{required:!0,message:"数据库链接信息不能为空"}],__source:{fileName:S,lineNumber:256,columnNumber:29}},N.a.createElement(u.default,{autoComplete:"off",placeholder:"数据库链接信息，如 jdbc:postgresql://192.168.10.1:5432/tiklab_soular",__source:{fileName:S,lineNumber:263,columnNumber:33}})),N.a.createElement(f.default.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"用户名不能为空"}],__source:{fileName:S,lineNumber:268,columnNumber:29}},N.a.createElement(u.default,{placeholder:"用户名",__source:{fileName:S,lineNumber:275,columnNumber:33}})),N.a.createElement(f.default.Item,{label:"密码",name:"password",rules:[{required:!0,message:"密码不能为空"}],__source:{fileName:S,lineNumber:277,columnNumber:29}},N.a.createElement(u.default.Password,{placeholder:"密码",__source:{fileName:S,lineNumber:284,columnNumber:33}})))),N.a.createElement("div",{className:"data-content-btn",__source:{fileName:S,lineNumber:288,columnNumber:21}},N.a.createElement(d.a,{onClick:function(){n.validateFields().then((function(e){w(!0),A(!0),t(e),T(),n.resetFields(null)}))},type:"primary",title:"导入",__source:{fileName:S,lineNumber:289,columnNumber:25}})))))}}}]);