(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{127:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PRIVILEGE_DOMAIN_ROLE_STORE",{enumerable:!0,get:function(){return u.PRIVILEGE_DOMAIN_ROLE_STORE}}),Object.defineProperty(t,"PRIVILEGE_PROJECT_FEATURE_STORE",{enumerable:!0,get:function(){return i.PRIVILEGE_PROJECT_FEATURE_STORE}}),Object.defineProperty(t,"PRIVILEGE_PROJECT_ROLE_STORE",{enumerable:!0,get:function(){return o.PRIVILEGE_PROJECT_ROLE_STORE}}),Object.defineProperty(t,"PRIVILEGE_SYSTEM_STORE",{enumerable:!0,get:function(){return c.PRIVILEGE_SYSTEM_STORE}}),Object.defineProperty(t,"SYSTEM_ROLE_STORE",{enumerable:!0,get:function(){return l.SYSTEM_ROLE_STORE}}),t.privilegeStores=void 0;var a=n(r(36)),u=r(342),i=r(343),l=r(344),o=r(345),c=r(346);t.privilegeStores=(0,a.default)((0,a.default)((0,a.default)((0,a.default)((0,a.default)({},c.PRIVILEGE_SYSTEM_STORE,new c.SystemFeatureStore),l.SYSTEM_ROLE_STORE,new l.SystemRoleStore),o.PRIVILEGE_PROJECT_ROLE_STORE,new o.ProjectRoleStore),i.PRIVILEGE_PROJECT_FEATURE_STORE,new i.ProjectFeatureStore),u.PRIVILEGE_DOMAIN_ROLE_STORE,new u.DomainRoleStore)},205:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.handlerFeaterNode=void 0,Object.defineProperty(t,"privilege_cn",{enumerable:!0,get:function(){return u.default}}),t.sort=void 0,Object.defineProperty(t,"usePermission",{enumerable:!0,get:function(){return i.default}});var a=n(r(36)),u=n(r(338)),i=n(r(339));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=t.sort=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e.sort-t.sort}))};t.handlerFeaterNode=function(e){return function e(t,r){for(var n=[],a=0;a<t.length;a++){var u=t[a];if(u.parentFunction===r||u.parentFunction&&u.parentFunction.id===r){var i=o(o({},u),{},{children:[]});i.children=e(t,u.id),0===i.children.length&&delete i.children,n.push(i)}}return c(n),n}(e,null)}},238:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DomainRole",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"NotFound",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"PrivilegeButton",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"PrivilegeProjectButton",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"ProjectFeature",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"ProjectNav",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"ProjectRole",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"SystemFeature",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"SystemNav",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"SystemRole",{enumerable:!0,get:function(){return c.default}});var a=n(r(623)),u=n(r(252)),i=n(r(681)),l=n(r(630)),o=n(r(635)),c=n(r(607)),f=n(r(640)),d=n(r(253)),s=n(r(691)),p=n(r(621))},251:function(e){e.exports=JSON.parse('{"privilege-feature-name":"功能名称","privilege-feature-code":"功能编码","privilege-add-feature":"添加功能","privilege-orga-name":"组织名称","privilege-add-user":"添加成员","privilege-search":"搜索","privilege-desc":"描述","privilege-user-and-org":"用户名、部门","privilege-user":"用户名","privilege-select-user":"选择用户","privilege-common":{"edit":"编辑","delete":"删除","action":"操作","please-input":"请输入","please-select":"请输入","save":"保存","cancel":"取消"},"privilege-add-node":"添加子节点","privilege-edit-feature":"编辑功能","privilege-point-node":"挂载节点","privilege-point-node-placeholder":"请选择挂载节点","privilege-role":{"addRole":"添加角色","addSystemRole":"添加系统角色","editRole":"编辑角色","roleName":"角色名称","roleDesc":"角色描述","people":"成员","promise":"权限","name":"账号","phone":"手机号","nickname":"昵称","email":"邮箱","type":"类别","orga":"部门","thirdparty":"第三方","internal":"内部","system":"系统","custom":"自定义","org":"组织"}}')},252:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(340));t.default=a.default},253:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(341));t.default=a.default},334:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.links=t.deleteSuccessReturnCurrenPage=t.SameValue=void 0;var a=n(r(36)),u=n(r(145));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.SameValue=function(e,t,r){var n=Array.from(new Set((0,u.default)(e).filter((function(e){return t.some((function(t){return t[r]===e}))}))));if(n)return t.find((function(e){return e[r]===n[0]}))},t.links=function(e){var t=[];return function e(r,n){r&&r.map((function(r){if(r.children){var a=r.children.map((function(e){return l(l({},e),{},{type:r.id})}));e(a,t)}else n.push(r)}))}(e,t),t},t.deleteSuccessReturnCurrenPage=function(e,t,r){return e>=r*t?r:e<=(r-1)*t+1?1===r?1:r-1:r}},338:function(e,t,r){"use strict";r.r(t);var n=r(251);t.default=n},339:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(123)),u=r(0),i=r(9);t.default=function(e){var t=e.code,r=e.systemRoleStore,n=e.domainId,l=r.setSystemPermissionsCodes,o=r.setDomainPermissionsCodes,c=r.systemPermissions,f=r.domainPermissions,d=(0,u.useState)(null),s=(0,a.default)(d,2),p=s[0],m=s[1];return(0,u.useEffect)((function(){var e=new FormData,r=n?"permission/findDomainPermissions":"permission/findPermissions",a=(0,i.getUser)();if(a.userId){if(e.append("userId",a.userId),n){if(f.hasOwnProperty(n))return void m(f[n].includes(t));e.append("domainId",n)}else if(c.length>0)return void m(c.includes(t));i.Axios.post(r,e).then((function(e){e.code||(n?o(n,e.data):l(e.data),m(e.data.includes(t)))}))}}),[]),p}},340:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(199)),u=(n(r(0)),r(60)),i=["code","disabled","systemRoleStore"];t.default=(0,u.inject)("systemRoleStore")((0,u.observer)((function(e){var t=e.code,r=void 0===t?"":t,n=(e.disabled,e.systemRoleStore),u=(0,a.default)(e,i),l=n.systemPermissions;try{return r?l.includes(r)?u.children:null:u.children}catch(e){return l.includes(r)?u.children:null}})))},341:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(145)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),l=r(60),o=r(334);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}t.default=(0,l.inject)("systemRoleStore")((0,l.observer)((function(e){var t=e.expandedTree,r=e.setExpandedTree,n=e.applicationRouters,a=e.outerPath,l=e.notFoundPath,c=e.systemRoleStore.systemPermissions,f=e.location.pathname;return(0,i.useEffect)((function(){if(c&&c.length>0){var i=(0,o.links)(n),d=(0,o.SameValue)(c,i,"purviewCode");d&&f===a&&(f=d.id,e.history.replace(f));var s=i.find((function(e){return e.id===f}));if(s)if(t&&r([s.type].concat((0,u.default)(t))),s.purviewCode)if(!c.includes(s.purviewCode))return e.history.push(l||"/index/404")}}),[f,c]),e.children})))},342:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.PRIVILEGE_DOMAIN_ROLE_STORE=t.DomainRoleStore=void 0;var a,u,i,l,o,c,f,d,s,p,m,v,b,g,h,y,O,P=n(r(35)),E=n(r(109)),w=n(r(80)),j=n(r(69)),_=n(r(68)),R=(n(r(36)),n(r(81))),S=(n(r(82)),r(19)),D=r(9);t.DomainRoleStore=(a=(0,j.default)((function e(){(0,_.default)(this,e),(0,w.default)(this,"privilegeDomainRole",u,this),(0,w.default)(this,"domainRolePage",i,this),(0,w.default)(this,"createDomainRoleAction",l,this),(0,w.default)(this,"deleteDomainRoleAction",o,this),(0,w.default)(this,"findDomainRoleListAction",c,this),(0,w.default)(this,"findDomainRolePageAction",f,this),(0,w.default)(this,"findDmUserPageAction",d,this),(0,w.default)(this,"setDomainRoleAction",s,this),(0,w.default)(this,"createDmRoleUserAction",p,this),(0,w.default)(this,"createBatchDmRoleUserAction",m,this),(0,w.default)(this,"updateDmRoleUserAction",v,this),(0,w.default)(this,"deleteDmRoleUserAction",b,this),(0,w.default)(this,"findDmRoleUserAction",g,this),(0,w.default)(this,"findDmRoleUserListAction",h,this),(0,w.default)(this,"getAllUserDirAction",y,this),(0,w.default)(this,"findAllUserGroupAction",O,this)})),u=(0,R.default)(a.prototype,"privilegeDomainRole",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,R.default)(a.prototype,"domainRolePage",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{currentPage:1,totalPage:1,totalRecord:1}}}),l=(0,R.default)(a.prototype,"createDomainRoleAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,E.default)(P.default.mark((function e(t){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Axios.post("/dmRole/createDmRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),o=(0,R.default)(a.prototype,"deleteDomainRoleAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,E.default)(P.default.mark((function e(t){var r;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,D.Axios.post("/dmRole/deleteDmRole",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),c=(0,R.default)(a.prototype,"findDomainRoleListAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,E.default)(P.default.mark((function e(t){var r;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Axios.post("/dmRole/findDmRoleList",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),f=(0,R.default)(a.prototype,"findDomainRolePageAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,E.default)(P.default.mark((function t(r){var n;return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.Axios.post("/dmRole/findDmRolePage",r);case 2:return 0===(n=t.sent).code&&(e.domainRolePage={currentPage:n.data.currentPage,totalPage:n.data.totalPage,totalRecord:n.data.totalRecord},e.privilegeDomainRole=n.data.dataList),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),d=(0,R.default)(a.prototype,"findDmUserPageAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,E.default)(P.default.mark((function e(t){var r;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Axios.post("/dmUser/findDmUserPage",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),s=(0,R.default)(a.prototype,"setDomainRoleAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,E.default)(P.default.mark((function e(t){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Axios.post("/dmRole/setdefaultRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),p=(0,R.default)(a.prototype,"createDmRoleUserAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,E.default)(P.default.mark((function e(t){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Axios.post("/dmRoleUser/createDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),m=(0,R.default)(a.prototype,"createBatchDmRoleUserAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,E.default)(P.default.mark((function e(t){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Axios.post("/dmRoleUser/createBatchDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),v=(0,R.default)(a.prototype,"updateDmRoleUserAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,E.default)(P.default.mark((function e(t){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Axios.post("/dmRoleUser/updateDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),b=(0,R.default)(a.prototype,"deleteDmRoleUserAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,E.default)(P.default.mark((function e(t){var r;return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,D.Axios.post("/dmRoleUser/deleteDmRoleUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),g=(0,R.default)(a.prototype,"findDmRoleUserAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,E.default)(P.default.mark((function e(t){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Axios.post("/dmRoleUser/findDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),h=(0,R.default)(a.prototype,"findDmRoleUserListAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,E.default)(P.default.mark((function e(t){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Axios.post("/dmRoleUser/findDmRoleUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),y=(0,R.default)(a.prototype,"getAllUserDirAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,E.default)(P.default.mark((function e(){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Axios.post("/user/userdir/findAllList");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),O=(0,R.default)(a.prototype,"findAllUserGroupAction",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,E.default)(P.default.mark((function e(){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Axios.post("/usergroup/findAllGroup");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),a),t.PRIVILEGE_DOMAIN_ROLE_STORE="privilegeDomainRoleStore"},343:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectFeatureStore=t.PRIVILEGE_PROJECT_FEATURE_STORE=void 0;var a,u,i,l,o,c,f,d=n(r(145)),s=n(r(80)),p=n(r(69)),m=n(r(68)),v=n(r(36)),b=n(r(81)),g=(n(r(82)),r(19));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,v.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.ProjectFeatureStore=(a=(0,p.default)((function e(){(0,m.default)(this,e),(0,s.default)(this,"privilegeProjectTreeData",u,this),(0,s.default)(this,"getDmPrivilegeTree",i,this),(0,s.default)(this,"addDmFeature",l,this),(0,s.default)(this,"addDmChildrenFeature",o,this),(0,s.default)(this,"deleteDmFeature",c,this),(0,s.default)(this,"editDmFeature",f,this)})),u=(0,b.default)(a.prototype,"privilegeProjectTreeData",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,b.default)(a.prototype,"getDmPrivilegeTree",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeProjectTreeData=t}}}),l=(0,b.default)(a.prototype,"addDmFeature",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeProjectTreeData.push(t)}}}),o=(0,b.default)(a.prototype,"addDmChildrenFeature",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){e.privilegeProjectTreeData=e.privilegeProjectTreeData.map((function(e){return e.id===r?y(y({},e),{},{children:[t].concat((0,d.default)(e.children))}):e}))}}}),c=(0,b.default)(a.prototype,"deleteDmFeature",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id!==t.id&&n.push(y(y({},r),{},{children:[]})),r.children&&r.children.length>0&&e(r.children,n[a].children)}))}(e.privilegeProjectTreeData,r),e.privilegeProjectTreeData=r}}}),f=(0,b.default)(a.prototype,"editDmFeature",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id===t.id?n.push(y(y(y({},r),t),{},{children:[]})):n.push(y(y({},r),{},{children:[]})),r.children&&n[a].children&&e(r.children,n[a].children)}))}(e.privilegeProjectTreeData,r),e.privilegeProjectTreeData=r}}}),a),t.PRIVILEGE_PROJECT_FEATURE_STORE="privilegeProjectFeatureStore"},344:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRoleStore=t.SYSTEM_ROLE_STORE=void 0;var a,u,i,l,o,c,f,d,s,p,m,v,b,g,h,y,O,P,E,w,j,_,R,S=n(r(35)),D=n(r(109)),k=n(r(80)),x=n(r(69)),A=n(r(68)),I=(n(r(36)),n(r(81))),M=(n(r(82)),r(19)),T=r(9);t.SystemRoleStore=(a=(0,x.default)((function e(){(0,A.default)(this,e),(0,k.default)(this,"privilegeSystemRole",u,this),(0,k.default)(this,"systemPermissions",i,this),(0,k.default)(this,"rolePage",l,this),(0,k.default)(this,"domainPermissions",o,this),(0,k.default)(this,"clearAllPermissions",c,this),(0,k.default)(this,"getInitProjectPermissions",f,this),(0,k.default)(this,"getSystemPermissions",d,this),(0,k.default)(this,"getAllUserAction",s,this),(0,k.default)(this,"getUserPageAction",p,this),(0,k.default)(this,"getAllUserDirAction",m,this),(0,k.default)(this,"findRolePageAction",v,this),(0,k.default)(this,"findRoleListAction",b,this),(0,k.default)(this,"setDefaultRoleAction",g,this),(0,k.default)(this,"deleteRoleAction",h,this),(0,k.default)(this,"deleteRoleUserAction",y,this),(0,k.default)(this,"findAllUserGroupAction",O,this),(0,k.default)(this,"findRoleUserListAction",P,this),(0,k.default)(this,"createRoleUserAction",E,this),(0,k.default)(this,"createBatchRoleUserAction",w,this),(0,k.default)(this,"createBatchRoleUserGroupAction",j,this),(0,k.default)(this,"findRoleUserGroupListAction",_,this),(0,k.default)(this,"deleteRoleUserGroupAction",R,this)})),u=(0,I.default)(a.prototype,"privilegeSystemRole",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,I.default)(a.prototype,"systemPermissions",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,I.default)(a.prototype,"rolePage",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{currentPage:1,totalPage:1,totalRecord:1}}}),o=(0,I.default)(a.prototype,"domainPermissions",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=(0,I.default)(a.prototype,"clearAllPermissions",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.systemPermissions=[],e.domainPermissions={}}}}),f=(0,I.default)(a.prototype,"getInitProjectPermissions",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t&&r){var a={userId:t,domainId:r,globalPublic:n},u={};return(0,T.getUser)()&&(0,T.getUser)().tenant&&(u={tenant:(0,T.getUser)().tenant}),T.Axios.post("/permission/findDomainPermissions",a,u).then((function(n){return n.code||(e.domainPermissions["".concat(t,"_").concat(r)]=n.data),n}))}}}}),d=(0,I.default)(a.prototype,"getSystemPermissions",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=new FormData;r.append("userId",t);var n={};return(0,T.getUser)()&&(0,T.getUser)().tenant&&(n={tenant:(0,T.getUser)().tenant}),T.Axios.post("/permission/findPermissions",r,n).then((function(t){return t.code||(e.systemPermissions=t.data),t}))}}}),s=(0,I.default)(a.prototype,"getAllUserAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,D.default)(S.default.mark((function e(){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Axios.post("/user/user/findAllUser");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),p=(0,I.default)(a.prototype,"getUserPageAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,D.default)(S.default.mark((function e(t){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Axios.post("/user/user/findUserPage",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),m=(0,I.default)(a.prototype,"getAllUserDirAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,D.default)(S.default.mark((function e(){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Axios.post("/user/userdir/findAllList");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),v=(0,I.default)(a.prototype,"findRolePageAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,D.default)(S.default.mark((function t(r,n){var a;return S.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.Axios.post("/role/findRolePage",r,n);case 2:return 0===(a=t.sent).code&&(e.rolePage={currentPage:a.data.currentPage,totalPage:a.data.totalPage,totalRecord:a.data.totalRecord},e.privilegeSystemRole=a.data.dataList),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}}),b=(0,I.default)(a.prototype,"findRoleListAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,D.default)(S.default.mark((function e(t){var r;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Axios.post("/role/findRoleList",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),g=(0,I.default)(a.prototype,"setDefaultRoleAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,D.default)(S.default.mark((function e(t){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Axios.post("/role/setdefaultRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),h=(0,I.default)(a.prototype,"deleteRoleAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,D.default)(S.default.mark((function e(t){var r;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,T.Axios.post("/role/deleteRole",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),y=(0,I.default)(a.prototype,"deleteRoleUserAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,D.default)(S.default.mark((function e(t){var r;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,T.Axios.post("/roleUser/deleteRoleUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),O=(0,I.default)(a.prototype,"findAllUserGroupAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,D.default)(S.default.mark((function e(){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Axios.post("/usergroup/findAllGroup");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),P=(0,I.default)(a.prototype,"findRoleUserListAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,D.default)(S.default.mark((function e(t){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Axios.post("/roleUser/findRoleUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),E=(0,I.default)(a.prototype,"createRoleUserAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,D.default)(S.default.mark((function e(t,r){var n;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("roleId",t),n.append("userId",r),e.next=5,T.Axios.post("/roleUser/pathRoleWithUser",n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),w=(0,I.default)(a.prototype,"createBatchRoleUserAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,D.default)(S.default.mark((function e(t){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Axios.post("/roleUser/createBatchRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),j=(0,I.default)(a.prototype,"createBatchRoleUserGroupAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,D.default)(S.default.mark((function e(t){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Axios.post("/roleUserGroup/createBatchRoleUserGroup",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),_=(0,I.default)(a.prototype,"findRoleUserGroupListAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,D.default)(S.default.mark((function e(t){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Axios.post("/roleUserGroup/findRoleUserGroupList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),R=(0,I.default)(a.prototype,"deleteRoleUserGroupAction",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,D.default)(S.default.mark((function e(t){var r;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,T.Axios.post("/roleUserGroup/deleteRoleUserGroup",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),a),t.SYSTEM_ROLE_STORE="systemRoleStore"},345:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectRoleStore=t.PRIVILEGE_PROJECT_ROLE_STORE=void 0;var a,u,i,l=n(r(80)),o=n(r(69)),c=n(r(68)),f=(n(r(36)),n(r(81))),d=(n(r(82)),r(19));t.ProjectRoleStore=(a=(0,o.default)((function e(){(0,c.default)(this,e),(0,l.default)(this,"privilegeProjectRole",u,this),(0,l.default)(this,"getProjectRoles",i,this)})),u=(0,f.default)(a.prototype,"privilegeProjectRole",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,f.default)(a.prototype,"getProjectRoles",[d.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeProjectRole=t}}}),a),t.PRIVILEGE_PROJECT_ROLE_STORE="privilegeProjectRoleStore"},346:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.SystemFeatureStore=t.PRIVILEGE_SYSTEM_STORE=void 0;var a,u,i,l,o,c,f,d,s,p=n(r(35)),m=n(r(109)),v=n(r(145)),b=n(r(80)),g=n(r(69)),h=n(r(68)),y=n(r(36)),O=n(r(81)),P=(n(r(82)),r(19)),E=r(9),w=r(205);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,y.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.SystemFeatureStore=(a=(0,g.default)((function e(){(0,h.default)(this,e),(0,b.default)(this,"privilegeSystemTreeData",u,this),(0,b.default)(this,"addFeature",i,this),(0,b.default)(this,"addChildrenFeature",l,this),(0,b.default)(this,"deleteFeature",o,this),(0,b.default)(this,"editFeature",c,this),(0,b.default)(this,"getFunctionListListAction",f,this),(0,b.default)(this,"updateFunctionSortAction",d,this),(0,b.default)(this,"deleteFunctionAction",s,this)})),u=(0,O.default)(a.prototype,"privilegeSystemTreeData",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,O.default)(a.prototype,"addFeature",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeSystemTreeData.push(t)}}}),l=(0,O.default)(a.prototype,"addChildrenFeature",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){e.privilegeSystemTreeData=e.privilegeSystemTreeData.map((function(e){return e.id===r?_(_({},e),{},{children:[t].concat((0,v.default)(e.children))}):e}))}}}),o=(0,O.default)(a.prototype,"deleteFeature",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id!==t.id&&n.push(_(_({},r),{},{children:[]})),r.children&&r.children.length>0&&e(r.children,n[a].children)}))}(e.privilegeSystemTreeData,r),e.privilegeSystemTreeData=r}}}),c=(0,O.default)(a.prototype,"editFeature",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id===t.id?n.push(_(_(_({},r),t),{},{children:[]})):n.push(_(_({},r),{},{children:[]})),r.children&&n[a].children&&e(r.children,n[a].children)}))}(e.privilegeSystemTreeData,r),e.privilegeSystemTreeData=r}}}),f=(0,O.default)(a.prototype,"getFunctionListListAction",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,m.default)(p.default.mark((function t(r){var n,a;return p.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.Axios.post("/function/findFunctionList",r);case 2:return(n=t.sent).code||(a=(0,w.handlerFeaterNode)(n.data),e.privilegeSystemTreeData=a),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),d=(0,O.default)(a.prototype,"updateFunctionSortAction",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,m.default)(p.default.mark((function e(t){return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.Axios.post("/function/updateFunctionSort",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),s=(0,O.default)(a.prototype,"deleteFunctionAction",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,m.default)(p.default.mark((function e(t){var r;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,E.Axios.post("/function/deleteFunction",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),a),t.PRIVILEGE_SYSTEM_STORE="privilegeSystemStore"},351:function(e,t,r){},352:function(e,t,r){},568:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseModal",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"BreadCrumb",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Btn",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Profile",{enumerable:!0,get:function(){return i.default}});var a=n(r(671)),u=n(r(674)),i=n(r(676)),l=n(r(678)),o=n(r(624))},607:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(689));t.default=a.default},621:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(527);var a=n(r(525)),u=n(r(0));t.default=function(e){var t=e.homePath,r=u.default.createElement(u.default.Fragment,null,"资源不存在或者没有访问权限，",u.default.createElement("span",{style:{color:"var(--thoughtware-blue)",cursor:"pointer"},onClick:function(){return e.history.push(t||"/")}},"点击这里"),"返回首页");return u.default.createElement(a.default,{title:"404",subTitle:r})}},623:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(668));t.default=a.default},624:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(97);var a=n(r(46)),u=n(r(0));r(672);t.default=function(e){var t=e.icon,r=e.type,n=e.title,i=e.onClick,l=e.isMar,o=e.children;return u.default.createElement("div",{className:"privilege-btn ".concat(r?"privilege-btn-".concat(r):""," ").concat(l?"privilege-btn-mar":""),onClick:i},u.default.createElement(a.default,null,t&&u.default.createElement("span",{className:"privilege-btn-icon"},t),o||n))}},625:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(235));r(226);var i=n(r(142)),l=n(r(234));r(125);var o=n(r(52));r(229);var c=n(r(143)),f=n(r(233));r(97);var d=n(r(46));r(332);var s=n(r(236)),p=n(r(123)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),v=r(60),b=n(r(626)),g=r(568),h=r(127);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}t.default=(0,v.inject)(h.PRIVILEGE_DOMAIN_ROLE_STORE)((0,v.observer)((function(e){var t=e.dmRoleDetail,r=e.domainId,n=e.privilegeDomainRoleStore,a=n.deleteDmRoleUserAction,v=n.findDmRoleUserListAction,h=(0,m.useState)([]),y=(0,p.default)(h,2),O=y[0],P=y[1],E=(0,m.useState)(!1),w=(0,p.default)(E,2),j=w[0],_=w[1],R=[{title:"名称",dataIndex:"name",render:function(e,t){var r=t.user;return m.default.createElement(d.default,null,r.nickname,1===r.type&&m.default.createElement(s.default,null,"管理员用户"))}},{title:"类型",dataIndex:"type",render:function(e,t){t.user;return"用户"}},{title:"操作",dataIndex:"action",width:100,render:function(e,t){var r=t.user;return k(r.type,t)}}];(0,m.useEffect)((function(){null!=t&&t.id&&S()}),[null==t?void 0:t.id]);var S=function(){v({dmRoleId:t.id}).then((function(e){e.code||P(e.data)}))},D=function(e){a(e).then((function(e){e.code||S()}))},k=function(e,r){var n=t.businessType,a=[];return 0===n&&a.push(m.default.createElement(o.default,{title:"删除"},m.default.createElement(c.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(){return D(r.id)},okText:"确定",cancelText:"取消"},m.default.createElement(f.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})))),n>0&&e<1&&a.push(m.default.createElement(o.default,{title:"删除"},m.default.createElement(c.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(){return D(r.id)},okText:"确定",cancelText:"取消"},m.default.createElement(f.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})))),a};return m.default.createElement("div",{className:"thoughtware_dm_promisse"},m.default.createElement("div",{className:"thoughtware_dm_promisse_up"},m.default.createElement("div",{className:"thoughtware_dm_promisse_up-title"},"用户(",O.length,")"),m.default.createElement("div",null,m.default.createElement(g.Btn,{onClick:function(){return _(!0)},type:"primary",title:"添加用户",icon:m.default.createElement(l.default,null)}))),m.default.createElement("div",{className:"thoughtware_dm_promisse_person"},m.default.createElement(i.default,{columns:R,dataSource:O,rowKey:function(e){return e.id},pagination:!1})),m.default.createElement(b.default,(0,u.default)({},e,{visible:j,setVisible:_,getFindDmRoleUserList:S,dmRoleId:t.id,cardData:O,domainId:r})))})))},626:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(53)),i=n(r(123)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),o=n(r(627));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}t.default=function(e){var t=e.visible,r=e.setVisible,n=e.dmRoleId,a=void 0===n?"":n,c=e.cardData,f=e.domainId,d=e.getFindDmRoleUserList,s=e.privilegeDomainRoleStore.createBatchDmRoleUserAction,p=(0,l.useState)([]),m=(0,i.default)(p,2),v=m[0],b=m[1],g=(0,l.useState)([]),h=(0,i.default)(g,2),y=h[0],O=h[1];(0,l.useEffect)((function(){t&&c&&(b(c.map((function(e){return e.user.id}))),O(c.map((function(e){return e.user.id}))))}),[t]);var P=function(){b([]),r(!1)};return l.default.createElement(o.default,{visible:t,addType:"domain",domainId:f,allSelectIds:y,selectedRowKeys:v,setSelectedRowKeys:b,handleOk:function(){s({dmRole:{id:a},domainId:f,userIds:v}).then((function(e){P(),d()}))},handleCancel:P},l.default.createElement("div",{className:"thoughtware_user_add_modal_up"},l.default.createElement("div",null,"添加用户"),l.default.createElement("div",{onClick:function(){return P()}},l.default.createElement(u.default,null))))}},627:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(35));r(226);var i=n(r(142));r(225);var l=n(r(141)),o=n(r(146));r(97);var c=n(r(46)),f=n(r(145)),d=n(r(36)),s=n(r(109)),p=n(r(123)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),v=r(60),b=r(568);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=(0,v.inject)("systemRoleStore","privilegeDomainRoleStore")((0,v.observer)((function(e){var t=e.visible,r=e.handleOk,n=e.handleCancel,a=e.allSelectIds,d=e.addType,v=e.domainId,g=e.selectedRowKeys,h=e.setSelectedRowKeys,O=e.systemRoleStore,P=e.privilegeDomainRoleStore,E=O.getUserPageAction,w=P.findDmUserPageAction,j=(0,m.useState)([]),_=(0,p.default)(j,2),R=_[0],S=_[1],D=(0,m.useState)({pageSize:6,currentPage:1}),k=(0,p.default)(D,1)[0],x=(0,m.useState)(1),A=(0,p.default)(x,2),I=A[0],M=A[1],T=(0,m.useState)({}),F=(0,p.default)(T,2),C=F[0],z=F[1],L=(0,m.useState)({pageParam:k}),U=(0,p.default)(L,2),N=U[0],B=U[1];(0,m.useEffect)((function(){W(N).then()}),[N]);var W=function(){var e=(0,s.default)(u.default.mark((function e(t){var r,n,a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("system"!==d){e.next=6;break}return e.next=3,E(t);case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,w(y(y({},t),{},{domainId:v}));case 8:r=e.sent;case 9:0===r.code&&(z({currentPage:r.data.currentPage,totalPage:r.data.totalPage,totalRecord:r.data.totalRecord}),null!==(n=r.data)&&void 0!==n&&n.dataList&&(a=r.data.dataList,S("system"===d?a:a.map((function(e){return e.user})))));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){return a&&a.some((function(t){return t===e.id}))},V={selectedRowKeys:g,onSelectAll:function(e,t,r){var n=r.map((function(e){return e&&e.id})).filter((function(e){return void 0!==e}));if(e){var a=Array.from(new Set([].concat((0,f.default)(n),(0,f.default)(g))));h(a)}else{var u=g.filter((function(e){return!n.includes(e)}));h(u)}},onSelect:function(e){return J(e)},getCheckboxProps:function(e){return{disabled:G(e)}}},J=function(e){G(e)||(g.indexOf(e.id)>=0?g.splice(g.indexOf(e.id),1):g.push(e.id),h((0,f.default)(g)))},K=[{title:"账号",dataIndex:"nickname",key:"nickname",width:"40%",ellipsis:!0,render:function(e,t){return m.default.createElement(c.default,null,m.default.createElement(b.Profile,{userInfo:t}),e)}},{title:"手机号",dataIndex:"phone",key:"phone",width:"30%",ellipsis:!0,render:function(e){return e||"--"}},{title:"邮箱",dataIndex:"email",key:"email",width:"30%",ellipsis:!0,render:function(e){return e||"--"}}];return m.default.createElement(b.BaseModal,{visible:t,onCancel:n,onOk:r,width:700,title:"添加用户"},m.default.createElement("div",null,m.default.createElement(l.default,{placeholder:"搜索账号",style:{width:240},onPressEnter:function(e){return function(e){var t=y(y({},N),{},{nickname:e.target.value,pageParam:k});B(t)}(e)},prefix:m.default.createElement(o.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})}),m.default.createElement("div",{style:{width:"100%"}},m.default.createElement(i.default,{columns:K,dataSource:R,rowSelection:V,onRow:function(e){return{onClick:function(){return J(e)}}},rowKey:function(e){return e.id},pagination:!1}),m.default.createElement(b.Page,{currentPage:I,changPage:function(e){M(e);var t=y(y({},N),{},{pageParam:{pageSize:6,currentPage:e}});B(t)},page:C}))))})))},628:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(226);var u=n(r(142)),i=n(r(595)),l=n(r(36)),o=n(r(145)),c=n(r(123));r(333);var f=n(r(129)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),s=r(9),p=r(568);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=f.default.Group;t.default=function(e){var t=e.roleDetail,r=e.type,n=(0,d.useState)(!1),a=(0,c.default)(n,2),l=a[0],m=a[1],v=(0,d.useState)([]),h=(0,c.default)(v,2),y=h[0],O=h[1],P=(0,d.useState)({}),E=(0,c.default)(P,2),w=E[0],j=E[1],_=(0,d.useState)([]),R=(0,c.default)(_,2),S=R[0],D=R[1],k=(0,d.useState)({}),x=(0,c.default)(k,2),A=(x[0],x[1]),I=[{title:"模块",key:"label",width:"30%",render:function(e){return d.default.createElement(f.default,{disabled:!l,indeterminate:e.indeterminate,onChange:function(t){return N(t,e)},checked:e.checkAll},e.label)}},{title:"功能点",key:"name",render:function(e){return d.default.createElement("div",{className:"privilege-role-promise"},d.default.createElement(g,{disabled:!l,options:w[e.value],value:e.checkedList,onChange:function(t){return z(t,e)}}))}}];(0,d.useEffect)((function(){null!=t&&t.id&&M()}),[null==t?void 0:t.id]);var M=function(){var e;e="system"===r?{group:null==t?void 0:t.group}:{type:"2"},s.Axios.post("/function/findFunctionList",e).then((function(e){if(!e.code){var t=T(e.data);O(t.result),j(t.resultChild),C(!0,t.result,t.resultChild)}}))},T=function(e){var t=e.map((function(e){return!e.parentFunction&&{value:e.id,label:e.name}})).filter(Boolean),r=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&{value:e.id,label:e.name,parent:e.parentFunction.id}})).filter(Boolean),n=[],a={};return t.forEach((function(e){var t=e.value,u=r.filter((function(e){return e.parent===t}));n.push({value:e.value,label:e.label,indeterminate:!1,checkedList:[],checkAll:!1}),a[e.value]=u})),{result:n,resultChild:a}},F=function(e){var t=e.filter((function(e){return e.function&&e.function.parentFunction})).map((function(e){return{parentID:e.function.parentFunction.id,id:e.function.id}})),r=e.filter((function(e){return!e.function.parentFunction})).map((function(e){return e.function.id})),n={};return r.forEach((function(e){var r=t.map((function(t){if(t.parentID===e)return t.id})).filter(Boolean);n[e]=[].concat((0,o.default)(r),[e])})),n},C=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u={roleId:"domain"===r?t.role.id:t.id};s.Axios.post("roleFunction/findRoleFunctionList",u).then((function(t){if(!t.code){var r=F(t.data),u=t.data.reduce((function(e,t){return e[t.function.id]=t.id,e}),{}),i=e?a:w,l=(e?n:y).map((function(e){var t=r[e.value]?r[e.value]:[],n=0===i[e.value].length,a=t.length===i[e.value].length+1&&0!==t.length,u=a?!a:!!t.length&&t.length<i[e.value].length+1;return n&&1===t.length&&(a=!0,u=!1),b(b({},e),{},{checkedList:t,indeterminate:u,checkAll:a})}));A(u),O(l),D(t.data.map((function(e){return e.function.id})))}}))},z=function(e,t){L(e,t)},L=function(e,t){var r=y.map((function(r){if(r.value===t.value){if(0===e.length)return U(t,"delete"),b(b({},r),{},{checkedList:[],checkAll:!1,indeterminate:!1});if(e.length===w[t.value].length)return U(t,"add"),b(b({},r),{},{checkedList:e,checkAll:!0,indeterminate:!1});if(e.length<w[t.value].length)return U(t,"filterAdd",e),b(b({},r),{},{checkedList:e,checkAll:!1,indeterminate:!0})}return r}));O(r)},U=function(e,t,r){var n,a=w[e.value].map((function(e){return e.value})).filter(Boolean),u=[].concat((0,o.default)(a),[e.value]);if("add"===t)n=Array.from(new Set([].concat((0,o.default)(S),(0,o.default)(u))));else if("delete"===t)n=S.filter((function(e){return!u.includes(e)}));else{var i=S.filter((function(e){return!a.includes(e)}));n=Array.from(new Set([].concat((0,o.default)(i),(0,o.default)(r),[e.value])))}D(n)},N=function(e,t){var r=S.includes(t.value),n=y.map((function(e){if(e.value===t.value){if(U(t,r?"delete":"add"),r)return b(b({},e),{},{checkedList:[],checkAll:!1,indeterminate:!1});var n=w[t.value].map((function(e){return e.value})).filter(Boolean);return b(b({},e),{},{checkedList:n,checkAll:!0,indeterminate:!1})}return e}));O(n)},B=function(){C(),m(!1)},W=function(){var e={role:{id:"domain"===r?t.role.id:t.id},functionList:S};s.Axios.post("roleFunction/updateRoleAllFunction",e).then((function(e){0===e.code&&C(),m(!1)}))};return d.default.createElement("div",{className:"thoughtware_role_promisse"},l?d.default.createElement("div",{className:"thoughtware_role_promisse_up"},d.default.createElement(p.Btn,{onClick:B,isMar:!0},"取消"),d.default.createElement(p.Btn,{type:"primary",onClick:W},"保存")):d.default.createElement(p.Btn,{onClick:function(){return m(!0)},icon:d.default.createElement(i.default,null)},"编辑"),d.default.createElement("div",{className:"thoughtware_role_promisse_table"},d.default.createElement(u.default,{pagination:!1,columns:I,dataSource:y,rowKey:function(e){return e.value},bordered:!0})),l&&d.default.createElement("div",{className:"thoughtware_role_promisse_bottom"},d.default.createElement(p.Btn,{onClick:B,isMar:!0},"取消"),d.default.createElement(p.Btn,{type:"primary",onClick:W},"保存")))}},629:function(e,t,r){"use strict";r.r(t)},630:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(683));t.default=a.default},631:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(529);var u=n(r(523));r(225);var i=n(r(141));r(327);var l=n(r(124)),o=n(r(123)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),f=r(197),d=r(9),s=r(568);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}t.default=function(e){var t=e.visible,r=e.cancelAdd,n=e.editData,a=void 0===n?{}:n,p=e.parentId,m=void 0===p?"":p,v=e.urlType,b=void 0===v?"system":v,g=e.data,h=void 0===g?[]:g,y=l.default.useForm(),O=(0,o.default)(y,1)[0],P=(0,f.useTranslation)().t,E=(0,c.useState)([]),w=(0,o.default)(E,2),j=(w[0],w[1]);(0,c.useEffect)((function(){t&&R()}),[t]),(0,c.useEffect)((function(){"{}"!==JSON.stringify(a)&&(O.setFieldsValue({code:a.code}),O.setFieldsValue({name:a.name}),O.setFieldsValue({parent:a.parentFunction?a.parentFunction.id:a.parentFunction})),m&&O.setFieldsValue({parent:m})}),[a,m]);var _,R=function(){var e=new FormData;e.append("type","system"===b?"1":"2"),d.Axios.post("/function/findFunctionListByParentId",e).then((function(e){e.code||j(e.data)}))},S=function(){O.resetFields(),r()};return c.default.createElement(s.BaseModal,{title:"{}"!==JSON.stringify(a)?P("privilege-edit-feature"):P("privilege-add-feature"),visible:t,onOk:function(){O.submit()},onCancel:S,forceRender:!0,destroyOnClose:!0},c.default.createElement(l.default,{form:O,onFinish:function(e){if("{}"===JSON.stringify(a)){var t={name:e.name,code:e.code,parentFunction:{id:e.parent},type:"system"===b?"1":"2"};d.Axios.post("/function/createFunction",t).then((function(e){e.code||S()}))}else{var r={id:a.id,name:e.name,code:e.code,parentFunction:{id:e.parent},type:"system"===b?"1":"2"};d.Axios.post("/function/updateFunction",r).then((function(e){e.code||S()}))}},preserve:!1,layout:"vertical"},c.default.createElement(l.default.Item,{label:P("privilege-feature-name"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.default.createElement(i.default,{placeholder:P("privilege-feature-name")})),c.default.createElement(l.default.Item,{label:P("privilege-feature-code"),name:"code",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.default.createElement(i.default,{placeholder:P("privilege-feature-code")})),c.default.createElement(l.default.Item,{label:P("privilege-point-node"),name:"parent"},c.default.createElement(u.default,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(_=[],function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var u={title:t.name,value:t.id,disabled:n};if(t.id===a.id&&(u.disabled=!0),r.push(u),t.children&&t.children.length>0)return e(t.children,u.children=[],u.disabled)}))}(h,_),_),placeholder:P("privilege-point-node-placeholder"),disabled:m||a.children&&a.children.length>0}))))}},632:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(235)),i=n(r(123)),l=n(r(36)),o=n(r(199)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),f=r(586),d=["record","data","index","moveRow","className","style"];function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v="DraggableFeatureBodyRow";t.default=function(e){var t=e.record,r=(e.data,e.index),n=e.moveRow,a=e.className,l=e.style,s=(0,o.default)(e,d);if(!t)return null;var p=m(m({},t),{},{index:r}),b=(0,c.useRef)(null),g=(0,f.useDrop)({accept:v,collect:function(e){var t=e.getItem()||{},n=t.index;t.sort;return n===r?{}:{isOver:e.isOver(),dropClassName:n<r?" drop-over-downward":" drop-over-upward"}},drop:function(e){var r={dragId:e.id,drag:e,dropId:t.id,drop:m({},t)};n(r)}}),h=(0,i.default)(g,2),y=h[0],O=y.isOver,P=y.dropClassName,E=h[1],w=(0,f.useDrag)({type:v,item:p,collect:function(e){return{isDragging:e.isDragging()}}});return E((0,(0,i.default)(w,2)[1])(b)),c.default.createElement("tr",(0,u.default)({ref:b,className:"".concat(a).concat(O?P:""),style:m({cursor:"move"},l)},s))}},633:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.sortNum=t.sort=t.handelPeerFunction=void 0;var a=n(r(36));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.handelPeerFunction=function(e,t,r,n,a){var u=e.map((function(e){return e.id===t?i(i({},e),{},{sort:a}):e.id===r?i(i({},e),{},{sort:n}):e}));return l(u)};var l=t.sort=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e.sort-t.sort}))};t.sortNum=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e-t}))}},634:function(e,t,r){"use strict";r.r(t)},635:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(684));t.default=a.default},636:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(225);var u=n(r(141)),i=n(r(36));r(327);var l=n(r(124)),o=n(r(123)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),f=r(197),d=r(9),s=r(568);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t=(0,f.useTranslation)().t,r=e.visible,n=e.setVisible,a=e.findRole,i=e.isBase,p=e.urlType,m=void 0===p?"system":p;if(!["system","project"].includes(m))throw Error("use RoleAdd Component must have urlType props, value:'system'、 'project'");var b=l.default.useForm(),g=(0,o.default)(b,1)[0],h=function(){g.resetFields(),n(!1)};return c.default.createElement(s.BaseModal,{title:t("privilege-role.addRole"),visible:r,onCancel:h,onOk:function(){g.submit()},forceRender:!0,destroyOnClose:!0},c.default.createElement(l.default,{form:g,preserve:!1,onFinish:function(e){var t=v(v({},e),{},{group:i?"system":"custom",type:"system"===m?"1":"2"});d.Axios.post("/role/createRole",t).then((function(e){0===e.code&&(h(),a())}))},layout:"vertical"},c.default.createElement(l.default.Item,{label:t("privilege-role.roleName"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.default.createElement(u.default,{placeholder:t("privilege-role.roleName")})),c.default.createElement(l.default.Item,{label:t("privilege-desc"),name:"desc"},c.default.createElement(u.default,{placeholder:t("privilege-desc")}))))}},637:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(235));r(225);var i=n(r(141)),l=n(r(36)),o=n(r(123));r(528);var c=n(r(522)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),d=r(568),s=n(r(628)),p=n(r(685)),m=r(9);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(688);var h=c.default.TabPane;t.default=function(e){var t=e.roleType,r=e.roleDetailParams,n=e.setDetail,a=e.findRole,v=(0,f.useState)(null),b=(0,o.default)(v,2),y=b[0],O=b[1],P=function(e,u){if(O(null),r[u]!==e.target.value){e.target.value||"name"!==u||n(r);var i=(0,l.default)((0,l.default)((0,l.default)({type:"system"===t?"1":"2"},u,e.target.value),"id",r.id),"group",r.group);"name"===u&&(i.desc=null==r?void 0:r.desc),"desc"===u&&(i.name=null==r?void 0:r.name),m.Axios.post("/role/updateRole",i).then((function(t){0===t.code&&(n(g(g({},r),{},(0,l.default)({},u,e.target.value))),a())}))}};return f.default.createElement("div",{className:"thoughtware_system_role_detail"},f.default.createElement(d.BreadCrumb,{firstItem:r.name||"权限详情",onClick:function(){return n(null)}}),f.default.createElement("div",{className:"detail-title"},f.default.createElement("div",{className:"label_item"},f.default.createElement("div",null,"名称"),f.default.createElement("div",null,f.default.createElement(i.default,{bordered:"name"===y,defaultValue:r.name,className:"".concat("name"===y?"":"label_item_name"),onFocus:function(){return O("name")},onBlur:function(e){return P(e,"name")},onPressEnter:function(e){return e.target.blur()}}))),f.default.createElement("div",{className:"label_item"},f.default.createElement("div",null,"类型"),f.default.createElement("div",{className:"label_item_type"},"system"===r.group?"内置":"自定义"))),f.default.createElement("div",{className:"label_item label_desc"},f.default.createElement("div",null,"描述"),f.default.createElement("div",null,f.default.createElement(i.default.TextArea,{bordered:"desc"===y,defaultValue:r.desc,className:"".concat("desc"===y?"":"label_item_name"),onFocus:function(){return O("desc")},onBlur:function(e){return P(e,"desc")},autoSize:{minRows:1,maxRows:4}}))),f.default.createElement(c.default,{defaultActiveKey:"people"},f.default.createElement(h,{tab:"成员",key:"people"},f.default.createElement(p.default,(0,u.default)({},e,{roleType:t,roleDetail:r}))),f.default.createElement(h,{tab:"权限",key:"promise"},f.default.createElement(s.default,{type:t,roleDetail:r}))))}},638:function(e,t,r){"use strict";r.r(t)},639:function(e,t,r){"use strict";r.r(t)},640:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(690));t.default=a.default},641:function(e,t,r){"use strict";r.r(t)},647:function(e,t,r){"use strict";r(639)},663:function(e,t,r){},668:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(35));r(329);var i=n(r(228)),l=n(r(235));r(330);var o=n(r(231));r(226);var c=n(r(142)),f=n(r(234)),d=n(r(109)),s=n(r(36));r(229);var p=n(r(143)),m=n(r(233));r(125);var v=n(r(52)),b=n(r(618));r(97);var g=n(r(46));r(332);var h=n(r(236)),y=n(r(123)),O=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),P=r(60),E=r(197),w=r(669),j=r(568);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(629);t.default=(0,P.inject)("privilegeDomainRoleStore")((0,P.observer)((function(e){var t=(0,E.useTranslation)().t,r=e.privilegeDomainRoleStore,n=e.domainId,a=r.privilegeDomainRole,s=r.deleteDomainRoleAction,P=r.setDomainRoleAction,_=r.findDomainRolePageAction,R=r.domainRolePage,D=(0,O.useState)(!1),k=(0,y.default)(D,2),x=k[0],A=k[1],I=(0,O.useState)({pageSize:12,currentPage:1}),M=(0,y.default)(I,1)[0],T=(0,O.useState)({pageParam:M}),F=(0,y.default)(T,2),C=F[0],z=F[1],L=(0,O.useState)(null),U=(0,y.default)(L,2),N=U[0],B=U[1],W=[{title:"角色名称",dataIndex:"name",width:"40%",ellipsis:!0,render:function(e,t){var r=t.businessType,n=t.role;return 1===r&&1===n.defaultRole?O.default.createElement(g.default,null,O.default.createElement("div",{className:"thoughtware_domain_role_name",onClick:function(){return J(t)}},n.name),O.default.createElement(h.default,{color:"#87d068"},"默认"),O.default.createElement(h.default,null,"管理员")):1===n.defaultRole?O.default.createElement(g.default,null,O.default.createElement("div",{className:"thoughtware_domain_role_name",onClick:function(){return J(t)}},n.name),O.default.createElement(h.default,{color:"#87d068"},"默认")):1===r?O.default.createElement(g.default,null,O.default.createElement("div",{className:"thoughtware_domain_role_name",onClick:function(){return J(t)}},n.name),O.default.createElement(h.default,null,"管理员")):O.default.createElement("div",{className:"thoughtware_domain_role_name",onClick:function(){return J(t)}},n.name)}},{title:"成员数",dataIndex:"roleUserList",width:"25%",ellipsis:!0,render:function(e,t){var r=t.dmRoleUserList,n=r&&r.length>0?r.length:0;return"".concat(n,"人")}},{title:"角色类型",dataIndex:["role","group"],width:"25%",ellipsis:!0,render:function(e){return"system"===e?"内置":t("privilege-role.custom")}},{title:"操作",dataIndex:"action",render:function(e,t){var r=t.role,n=t.businessType,a=t.id;return O.default.createElement(g.default,null,0===(null==r?void 0:r.defaultRole)&&O.default.createElement(v.default,{title:"设置默认"},O.default.createElement(b.default,{onClick:function(){return V(t)},style:{fontSize:"var(--thoughtware-icon-size-16)"}})),0===n&&"system"!==r.group&&O.default.createElement(v.default,{title:"删除"},O.default.createElement(p.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(){return K(a)},okText:"确定",cancelText:"取消"},O.default.createElement(m.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}}))))}}];(0,O.useEffect)((function(){G()}),[C]);var G=function(){_(S(S({},C),{},{domainId:n}))},V=function(){var e=(0,d.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:e.sent.code||G();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){B(e)},K=function(){var e=(0,d.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:0===e.sent.code&&G();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return O.default.createElement(i.default,{className:"thoughtware_domain_role"},O.default.createElement(o.default,{sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"}},N?O.default.createElement(w.DmRoleDetail,{roleDetailParams:N,domainId:n,setDetail:B,getProjectDmRole:G}):O.default.createElement("div",{className:"thoughtware_domain_role-content"},O.default.createElement(j.BreadCrumb,{firstItem:"权限"},O.default.createElement(j.Btn,{onClick:function(){return A(!0)},type:"primary",icon:O.default.createElement(f.default,null),title:t("privilege-role.addRole")})),O.default.createElement(c.default,{columns:W,dataSource:a,rowKey:function(e){return e.id},pagination:!1}),O.default.createElement(j.Page,{currentPage:C.pageParam.currentPage,changPage:function(e){z(S(S({},C),{},{pageParam:{pageSize:12,currentPage:e}}))},page:R}))),O.default.createElement(w.DmRoleCreate,(0,l.default)({},e,{visible:x,domainId:n,handleCancel:function(){return A(!1)},getProjectDmRole:G})))})))},669:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DmRoleCreate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"DmRoleDetail",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"DmRolePeople",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"DomainRoleUserCreate",{enumerable:!0,get:function(){return l.default}});var a=n(r(670)),u=n(r(680)),i=n(r(625)),l=n(r(626))},670:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(225);var a=n(r(141)),u=n(r(36));r(327);var i=n(r(124)),l=n(r(123)),o=n(r(0)),c=r(197),f=r(568);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t=e.visible,r=e.handleCancel,n=e.getProjectDmRole,u=e.domainId,d=e.privilegeDomainRoleStore.createDomainRoleAction,p=(0,c.useTranslation)().t,m=i.default.useForm(),v=(0,l.default)(m,1)[0];return o.default.createElement(f.BaseModal,{title:"添加角色",visible:t,onCancel:r,onOk:function(){v.submit()},destroyOnClose:!0},o.default.createElement(i.default,{form:v,preserve:!1,onFinish:function(e){var t={domainId:u,businessType:0,role:s({},e)};d(t).then((function(e){0===e.code&&(r(),n())}))},layout:"vertical"},o.default.createElement(i.default.Item,{label:p("privilege-role.roleName"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},o.default.createElement(a.default,{placeholder:p("privilege-role.roleName")})),o.default.createElement(i.default.Item,{label:p("privilege-desc"),name:"desc"},o.default.createElement(a.default,{placeholder:p("privilege-desc")}))))}},671:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(331);var a=n(r(232)),u=n(r(235)),i=n(r(199)),l=n(r(0)),o=n(r(624));r(673);var c=["children"];t.default=function(e){var t=e.children,r=(0,i.default)(e,c),n=l.default.createElement(l.default.Fragment,null,l.default.createElement(o.default,{onClick:r.onCancel,title:"取消",isMar:!0}),l.default.createElement(o.default,{onClick:r.onOk,title:"确定",type:"primary"}));return l.default.createElement(a.default,(0,u.default)({style:{maxWidth:"calc(100vw - 120px)",maxHeight:"calc(100vh - 120px)",marginRight:"auto",marginLeft:"auto",position:"absolute",top:60,right:0,left:0,height:"100%",display:"flex",flexDirection:"column"},wrapClassName:"thoughtware_modal",closable:!1,destroyOnClose:!0,footer:n},r),t)}},672:function(e,t,r){"use strict";r.r(t)},673:function(e,t,r){"use strict";r.r(t)},674:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(97);var a=n(r(46)),u=n(r(128)),i=n(r(0));r(675);t.default=function(e){var t=e.firstItem,r=e.secondItem,n=e.children,l=e.onClick;return i.default.createElement("div",{className:"privilege-breadcrumb"},i.default.createElement(a.default,null,i.default.createElement("span",{className:l?"privilege-breadcrumb-first":"",onClick:l},l&&i.default.createElement(u.default,{style:{marginRight:8}}),i.default.createElement("span",{className:r?"privilege-breadcrumb-span":""},t)),r&&i.default.createElement("span",null," /   ",r)),i.default.createElement("div",null,n))}},675:function(e,t,r){"use strict";r.r(t)},676:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(521));r(328);var u=n(r(126)),i=n(r(0)),l=r(9);r(677);t.default=function(e){var t=e.userInfo,r=void 0===t?void 0:t,n=r||(0,l.getUser)();return i.default.createElement("div",{className:"thoughtware-profile"},n.avatar&&"null"!==n.avatar?i.default.createElement(u.default,{src:n.avatar}):n.nickname&&"null"!==n.nickname?i.default.createElement(u.default,null,n.nickname.substring(0,1)):n.name&&"null"!==n.name?i.default.createElement(u.default,null,n.name.substring(0,1)):i.default.createElement(u.default,{size:32,icon:i.default.createElement(a.default,null)}))}},677:function(e,t,r){"use strict";r.r(t)},678:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(89)),u=n(r(128)),i=n(r(0));r(679);t.default=function(e){var t=e.currentPage,r=e.changPage,n=e.page,l=n.totalPage,o=void 0===l?1:l,c=n.totalRecord,f=void 0===c?1:c;return o>1&&i.default.createElement("div",{className:"privilege-page"},i.default.createElement("div",{className:"".concat(1===t?"privilege-page-ban":"privilege-page-allow"),onClick:function(){return 1===t?null:r(t-1)}},i.default.createElement(u.default,null)),i.default.createElement("div",{className:"privilege-page-current"},t),i.default.createElement("div",{className:"privilege-page-line"}," / "),i.default.createElement("div",null,o),i.default.createElement("div",{className:"".concat(t===o?"privilege-page-ban":"privilege-page-allow"),onClick:function(){return t===o?null:r(t+1)}},i.default.createElement(a.default,null)),i.default.createElement("div",{className:"privilege-page-record"},"  共",f,"条 "))}},679:function(e,t,r){"use strict";r.r(t)},680:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(235));r(225);var i=n(r(141)),l=n(r(36)),o=n(r(123));r(528);var c=n(r(522)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),d=r(197),s=n(r(625)),p=r(568),m=n(r(628)),v=r(9);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=c.default.TabPane;t.default=function(e){var t,r,n,a,b=e.roleDetailParams,g=e.domainId,O=e.setDetail,P=e.getProjectDmRole,E=(0,d.useTranslation)().t,w=(0,f.useState)(null),j=(0,o.default)(w,2),_=j[0],R=j[1],S=function(e,t){if(R(null),b.role[t]!==e.target.value){e.target.value||"name"!==t||O(b);var r=b.role,n={domainId:g,id:b.id,role:h(h({},r),{},(0,l.default)({},t,e.target.value))};v.Axios.post("/dmRole/updateDmRole",n).then((function(n){0===n.code&&(O(h(h({},b),{},{role:h(h({},r),{},(0,l.default)({},t,e.target.value))})),P())}))}};return f.default.createElement("div",{className:"thoughtware_domain_role_detail"},f.default.createElement(p.BreadCrumb,{firstItem:(null==b||null===(t=b.role)||void 0===t?void 0:t.name)||"权限详情",onClick:function(){return O(null)}}),f.default.createElement("div",{className:"detail-title"},f.default.createElement("div",{className:"label_item"},f.default.createElement("div",null,"名称"),f.default.createElement("div",null,f.default.createElement(i.default,{bordered:"name"===_,defaultValue:null==b||null===(r=b.role)||void 0===r?void 0:r.name,className:"".concat("name"===_?"":"label_item_name"),onFocus:function(){return R("name")},onBlur:function(e){return S(e,"name")},onPressEnter:function(e){return e.target.blur()}}))),f.default.createElement("div",{className:"label_item"},f.default.createElement("div",null,"类型"),f.default.createElement("div",{className:"label_item_type"},"system"===(null==b||null===(n=b.role)||void 0===n?void 0:n.group)?"内置":"自定义"))),f.default.createElement("div",{className:"label_item label_desc"},f.default.createElement("div",null,"描述"),f.default.createElement("div",null,f.default.createElement(i.default.TextArea,{bordered:"desc"===_,defaultValue:null==b||null===(a=b.role)||void 0===a?void 0:a.desc,className:"".concat("desc"===_?"":"label_item_name"),onFocus:function(){return R("desc")},onBlur:function(e){return S(e,"desc")},autoSize:{minRows:1,maxRows:4}}))),f.default.createElement(c.default,{defaultActiveKey:"people"},f.default.createElement(y,{tab:E("privilege-role.people"),key:"people"},f.default.createElement(s.default,(0,u.default)({},e,{domainId:g,dmRoleDetail:b}))),f.default.createElement(y,{tab:E("privilege-role.promise"),key:"promise"},f.default.createElement(m.default,{type:"domain",roleDetail:b}))))}},681:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(682));t.default=a.default},682:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(199)),u=(n(r(0)),r(60)),i=r(9),l=["code","domainId","systemRoleStore"];t.default=(0,u.inject)("systemRoleStore")((0,u.observer)((function(e){var t=e.code,r=void 0===t?"":t,n=e.domainId,u=e.systemRoleStore,o=(0,a.default)(e,l),c=u.domainPermissions,f=(0,i.getUser)().userId;try{return r?c["".concat(f,"_").concat(n)]&&c["".concat(f,"_").concat(n)].includes(r)?o.children:null:o.children}catch(e){return c["".concat(f,"_").concat(n)]&&c["".concat(f,"_").concat(n)].includes(r)?o.children:null}})))},683:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(329);var u=n(r(228));r(330);var i=n(r(231));r(226);var l=n(r(142));r(225);var o=n(r(141)),c=n(r(146)),f=n(r(199)),d=n(r(145)),s=n(r(36));r(97);var p=n(r(46));r(229);var m=n(r(143)),v=n(r(233)),b=n(r(595));r(125);var g=n(r(52)),h=n(r(234)),y=n(r(123)),O=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=T(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),P=r(60),E=r(19),w=r(197),j=r(586),_=r(588),R=n(r(631)),S=r(127),D=n(r(632)),k=r(205),x=r(633),A=r(568);r(634);var I=["children","sort"],M=["children","sort"];function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(T=function(e){return e?r:t})(e)}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=(0,P.inject)(S.PRIVILEGE_PROJECT_FEATURE_STORE,S.PRIVILEGE_SYSTEM_STORE)((0,P.observer)((function(e){var t=(0,w.useTranslation)().t,r=e.privilegeProjectFeatureStore,n=e.privilegeSystemStore,a=n.deleteFunctionAction,P=n.getFunctionListListAction,S=n.updateFunctionSortAction,T=r.privilegeProjectTreeData,F=r.getDmPrivilegeTree,z=(0,O.useState)(""),L=(0,y.default)(z,2),U=L[0],N=L[1],B=(0,O.useState)(!1),W=(0,y.default)(B,2),G=W[0],V=W[1],J=(0,O.useState)({}),K=(0,y.default)(J,2),Y=K[0],q=K[1],H=(0,O.useState)({}),Q=(0,y.default)(H,2),X=Q[0],Z=Q[1],$={type:"2",pageParam:{pageSize:99999,currentPage:1}},ee=(0,O.useState)($),te=(0,y.default)(ee,2),re=te[0],ne=te[1],ae=[{title:t("privilege-feature-name"),dataIndex:"name",key:"name"},{title:t("privilege-feature-code"),dataIndex:"code",key:"code"},{title:"操作",dataIndex:"action",width:"10%",render:function(e,t){return O.default.createElement(p.default,{size:"middle"},!t.parentFunction&&O.default.createElement(g.default,{title:"添加"},O.default.createElement(h.default,{onClick:function(){return oe(t.id)}})),O.default.createElement(g.default,{title:"编辑"},O.default.createElement(b.default,{onClick:function(){return fe(t)}})),!t.children&&O.default.createElement(g.default,{title:"删除"},O.default.createElement(m.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(){return de(t)},okText:"确定",cancelText:"取消"},O.default.createElement(v.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}}))))}}];(0,O.useEffect)((function(){ue()}),[re]);var ue=function(){P(re).then((function(e){if(!e.code){var t=le(e.data);F(t)}}))},ie=function(){P($).then((function(e){if(!e.code){var t=le(e.data);F(t)}}))},le=function(e){var t=(0,k.sort)(e.map((function(e){return!e.parentFunction&&e})).filter(Boolean)),r=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&e})).filter(Boolean),n=[];return t.forEach((function(e){var t=e.id,a=(0,k.sort)(r.filter((function(e){return e.parentFunction.id===t})));a.length>0?n.push(C(C({},e),{},{children:a})):n.push(e)})),n},oe=(0,O.useCallback)((function(e){N(e),V(!0)}),[]),ce=(0,O.useCallback)((function(){N(""),q({}),V(!1),ie()}),[]),fe=(0,O.useCallback)((function(e){q(e),V(!0)}),[]),de=(0,O.useCallback)((function(e){a(e.id).then((function(e){e.code||ue()}))}),[]),se=(0,O.useCallback)((function(e){var t,r=e.dragId,n=e.dropId,a=e.drag,u=e.drop,i=a.sort,l=-1,o=[],c=[],s={},p={};if(u.children){var m=[],v=X[n],b=u.children[0];if(v){var g=me(b.id);s=C(C({},a),{},{parentFunction:g.parentFunction}),i<g.sort?(m=[s].concat((0,d.default)(u.children)),pe(m).then((function(e){ie()}))):(l=u.children.findIndex((function(e){return e.id===g.id})),u.children.splice(l,0,a),u.children.forEach((function(e){c.push(e.sort)})),o=(0,x.sortNum)(c),u.children=u.children.map((function(e,t){return C(C({},e),{},{sort:o[t]})})),pe(u.children).then((function(e){ie()})))}}if(u.parentFunction){var h=u.parentFunction.id,y=me(h);l=(t=y.children.filter((function(e){return e.id!==r}))).findIndex((function(e){return e.id===u.id})),t.splice(l,0,C(C({},a),{},{parentFunction:y.children[0].parentFunction})),t.forEach((function(e){c.push(e.sort)})),o=(0,x.sortNum)(c),y.children=t.map((function(e,t){return C(C({},e),{},{sort:o[t]})})),pe(y.children).then((function(e){ie()}))}else{a.children;var O=a.sort,P=(0,f.default)(a,I),E=(u.children,u.sort),w=(0,f.default)(u,M);if(a.parentFunction&&!u.parentFunction){a.parentFunction.id;p=C(C({},w),{},{parentFunction:u.parentFunction,sort:O}),s=C(C({},P),{},{parentFunction:u.parentFunction,sort:E}),pe([p,s]).then((function(e){ie()}))}else{var j=[C(C({},P),{},{sort:E}),C(C({},w),{},{sort:O})];pe(j).then((function(e){ie()}))}}}),[T,X]),pe=function(e){return S({list:e})},me=(0,O.useCallback)((function(e){var t={};return function r(n){for(var a=0;a<n.length;a++){var u=n[a];if(u.id===e){t=u;break}u.children&&u.children.length>0&&r(u.children)}return t}((0,E.toJS)(T)),t}),[T]);return O.default.createElement(u.default,{className:"privilege-dm"},O.default.createElement(i.default,{sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"}},O.default.createElement(A.BreadCrumb,{firstItem:"项目功能管理"},O.default.createElement(A.Btn,{icon:O.default.createElement(h.default,null),type:"primary",onClick:function(){return V(!0)},title:t("privilege-add-feature")})),O.default.createElement("div",{style:{paddingBottom:16}},O.default.createElement(o.default,{placeholder:t("privilege-search")+t("privilege-orga-name"),onPressEnter:function(e){return function(e){var t=e.target.value;ne(C(C({},re),{},{name:t}))}(e)},style:{width:200},prefix:O.default.createElement(c.default,null)})),O.default.createElement("div",{id:"project-drag-sorting"},O.default.createElement(j.DndProvider,{backend:_.HTML5Backend},O.default.createElement(l.default,{dataSource:(0,E.toJS)(T),columns:ae,rowKey:"id",tableLayout:"fixed",pagination:!1,components:{body:{row:D.default}},onRow:function(e,t){return{record:e,data:(0,E.toJS)(T),index:t,moveRow:se}},expandable:{onExpand:function(e,t){Z(C(C({},X),{},(0,s.default)({},t.id,e)))}}})))),O.default.createElement(R.default,{data:T,editData:Y,visible:G,cancelAdd:ce,parentId:U,urlType:"project"}))})))},684:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(329);var u=n(r(228));r(330);var i=n(r(231));r(226);var l=n(r(142)),o=n(r(234)),c=n(r(36));r(229);var f=n(r(143)),d=n(r(233));r(125);var s=n(r(52)),p=n(r(618));r(97);var m=n(r(46));r(332);var v=n(r(236)),b=n(r(123)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),h=r(60),y=r(197),O=n(r(636)),P=n(r(637)),E=r(568),w=r(127);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(638);t.default=(0,h.inject)(w.PRIVILEGE_PROJECT_ROLE_STORE,w.SYSTEM_ROLE_STORE)((0,h.observer)((function(e){var t=e.privilegeProjectRoleStore,r=e.systemRoleStore,n=e.isBase,a=void 0!==n&&n,c=(0,y.useTranslation)().t,h=t.getProjectRoles,w=t.privilegeProjectRole,j=r.deleteRoleAction,_=r.findRolePageAction,S=r.setDefaultRoleAction,D=r.rolePage,k=(0,g.useState)(!1),x=(0,b.default)(k,2),A=x[0],I=x[1],M=(0,g.useState)(null),T=(0,b.default)(M,2),F=T[0],C=T[1],z=(0,g.useState)({pageSize:15,currentPage:1}),L=(0,b.default)(z,1)[0],U=(0,g.useState)({pageParam:L}),N=(0,b.default)(U,2),B=N[0],W=N[1],G=[{title:"角色名称",dataIndex:"name",width:"40%",ellipsis:!0,render:function(e,t){var r=t.businessType,n=t.defaultRole;return 1===r&&1===n?g.default.createElement(m.default,null,g.default.createElement("div",{className:"thoughtware_project_role-name",onClick:function(){return q(t)}},e),g.default.createElement(v.default,{color:"#87d068"},"默认"),g.default.createElement(v.default,null,"管理员")):1===n?g.default.createElement(m.default,null,g.default.createElement("div",{className:"thoughtware_project_role-name",onClick:function(){return q(t)}},e),g.default.createElement(v.default,{color:"#87d068"},"默认")):1===r?g.default.createElement(m.default,null,g.default.createElement("div",{className:"thoughtware_project_role-name",onClick:function(){return q(t)}},e),g.default.createElement(v.default,null,"管理员")):g.default.createElement("div",{className:"thoughtware_project_role-name",onClick:function(){return q(t)}},e)}},{title:"成员数",dataIndex:"user",width:"25%",ellipsis:!0,render:function(e,t){var r=t.roleUserList,n=r&&r.length>0?r.length:0;return"".concat(n,"人")}},{title:"类型",dataIndex:"group",width:"25%",ellipsis:!0,render:function(e){return"system"===e?"内置":c("privilege-role.custom")}},{title:"操作",dataIndex:"action",render:function(e,t){return a?g.default.createElement(m.default,{size:"middle"},0===t.defaultRole&&g.default.createElement(s.default,{title:"设置默认"},g.default.createElement(p.default,{onClick:function(){return K(t)},style:{fontSize:"var(--thoughtware-icon-size-16)"}})),g.default.createElement(s.default,{title:"删除"},g.default.createElement(f.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(){return J(t.id)},okText:"确定",cancelText:"取消"},g.default.createElement(d.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})))):g.default.createElement(m.default,{size:"middle"},0===t.defaultRole&&g.default.createElement(s.default,{title:"设置默认"},g.default.createElement(p.default,{onClick:function(){return K(t)},style:{fontSize:"var(--thoughtware-icon-size-16)"}})),0===t.businessType&&"system"!==t.group&&g.default.createElement(s.default,{title:"删除"},g.default.createElement(f.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(){return J(t.id)},okText:"确定",cancelText:"取消"},g.default.createElement(d.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}}))))}}];(0,g.useEffect)((function(){V()}),[B]);var V=function(){_(R({type:"2",group:"system"},B)).then((function(e){0===e.code&&h(e.data.dataList)}))},J=function(e){j(e).then((function(e){e.code||V()}))},K=function(e){S(e).then((function(e){e.code||V()}))},Y=function(){I(!0)},q=function(e){C(e)};return g.default.createElement(u.default,{className:"thoughtware_project_role"},g.default.createElement(i.default,{sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"}},F?g.default.createElement(P.default,{roleDetailParams:F,setDetail:C,findRole:V,isBase:a,roleType:"project"}):g.default.createElement("div",{className:"thoughtware_project_role-content"},g.default.createElement(E.BreadCrumb,{firstItem:"项目角色"},a?g.default.createElement(E.Btn,{icon:g.default.createElement(o.default,null),onClick:Y,title:c("privilege-role.addSystemRole")}):g.default.createElement(E.Btn,{icon:g.default.createElement(o.default,null),type:"primary",onClick:Y,title:c("privilege-role.addRole")})),g.default.createElement(l.default,{columns:G,dataSource:w,rowKey:function(e){return e.id},pagination:!1}),g.default.createElement(E.Page,{currentPage:B.pageParam.currentPage,changPage:function(e){W(R(R({},B),{},{pageParam:{pageSize:15,currentPage:e}}))},page:D}))),g.default.createElement(O.default,{visible:A,setVisible:I,isBase:a,findRole:V,urlType:"project"}))})))},685:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(235));r(226);var i=n(r(142));r(239);var l=n(r(113)),o=n(r(234)),c=n(r(145));r(530);var f=n(r(106));r(125);var d=n(r(52));r(229);var s=n(r(143)),p=n(r(233));r(97);var m=n(r(46));r(332);var v=n(r(236)),b=n(r(123)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),h=r(60),y=n(r(686)),O=n(r(687)),P=r(568),E=r(127);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}t.default=(0,h.inject)(E.SYSTEM_ROLE_STORE)((0,h.observer)((function(e){var t=e.roleType,r=e.roleDetail,n=e.systemRoleStore,a=n.deleteRoleUserGroupAction,h=n.deleteRoleUserAction,E=n.findAllUserGroupAction,w=n.findRoleUserGroupListAction,j=n.findRoleUserListAction,_=(0,g.useState)(!1),R=(0,b.default)(_,2),S=R[0],D=R[1],k=(0,g.useState)("all"),x=(0,b.default)(k,2),A=x[0],I=x[1],M=(0,g.useState)(!1),T=(0,b.default)(M,2),F=T[0],C=T[1],z=(0,g.useState)([]),L=(0,b.default)(z,2),U=L[0],N=L[1],B=(0,g.useState)([]),W=(0,b.default)(B,2),G=W[0],V=W[1],J=(0,g.useState)([]),K=(0,b.default)(J,2),Y=K[0],q=K[1],H=[{title:"名称",dataIndex:"name",render:function(e,t){var r=t.user,n=t.userGroup;return n?g.default.createElement(m.default,null,n.name,n.type>0&&g.default.createElement(v.default,null,"管理员组")):g.default.createElement(m.default,null,r.nickname,1===r.type&&g.default.createElement(v.default,null,"管理员用户"))}},{title:"类型",dataIndex:"type",render:function(e,t){t.user;return t.userGroup?"用户组":"用户"}},{title:"操作",dataIndex:"action",width:100,render:function(e,t){var r=t.user,n=t.userGroup;return re(n?n.type:r.type,t)}}];(0,g.useEffect)((function(){te()}),[]),(0,g.useEffect)((function(){null!=r&&r.id&&(X(),Q())}),[null==r?void 0:r.id]);var Q=function(){w({roleId:r.id}).then((function(e){e.code||V(e.data)}))},X=function(){j({roleId:r.id}).then((function(e){e.code||q(e.data)}))},Z=function(e){e.user&&$(e.id),e.userGroup&&ee(e.id)},$=function(e){h(e).then((function(e){e.code||X()}))},ee=function(e){a(e).then((function(e){e.code||Q()}))},te=function(){E().then((function(e){0===e.code&&N(e.data)}))},re=function(e,t){var n=r.businessType,a=[];return 0===n&&a.push(g.default.createElement(d.default,{title:"删除"},g.default.createElement(s.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(){return Z(t)},okText:"确定",cancelText:"取消"},g.default.createElement(p.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})))),n>0&&e<1&&a.push(g.default.createElement(d.default,{title:"删除"},g.default.createElement(s.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(){return Z(t)},okText:"确定",cancelText:"取消"},g.default.createElement(p.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})))),a},ne=function(e){switch(e.key){case"1":D(!0);break;case"2":C(!0)}};return g.default.createElement("div",{className:"thoughtware_promisse"},g.default.createElement("div",{className:"thoughtware_promisse_up"},g.default.createElement("div",{className:"thoughtware_promisse_up_type"},g.default.createElement("div",{className:"".concat("all"===A?"promisse_up_type":""),onClick:function(){return I("all")}},"全部(",Number(Y.length+G.length),")"),g.default.createElement("div",{className:"".concat("user"===A?"promisse_up_type":""),onClick:function(){return I("user")}},"用户(",Y.length,")"),g.default.createElement("div",{className:"".concat("group"===A?"promisse_up_type":""),onClick:function(){return I("group")}},"用户组(",G.length,")")),g.default.createElement(l.default,{overlay:function(){return g.default.createElement(f.default,{onClick:ne},g.default.createElement(f.default.Item,{key:"1"},"添加用户"),g.default.createElement(f.default.Item,{key:"2"},"添加用户组"))},trigger:["click"]},g.default.createElement("div",null,g.default.createElement(P.Btn,{type:"primary",icon:g.default.createElement(o.default,null)},"添加")))),g.default.createElement("div",{className:"thoughtware_promisse_person"},g.default.createElement(i.default,{columns:H,dataSource:"all"===A?[].concat((0,c.default)(Y),(0,c.default)(G)):"user"===A?Y:G,rowKey:function(e){return e.id},pagination:!1})),g.default.createElement(y.default,(0,u.default)({},e,{roleType:t,visible:S,setVisible:D,getRoleDetail:X,cardData:Y,roleId:r.id})),g.default.createElement(O.default,{roleId:r.id,onClose:function(){return C(!1)},getRoleDetail:Q,groupUserList:U,open:F}))})))},686:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(123)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),l=r(60),o=r(127),c=n(r(627));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}t.default=(0,l.inject)(o.SYSTEM_ROLE_STORE)((0,l.observer)((function(e){var t=e.roleType,r=e.visible,n=e.setVisible,a=e.roleId,l=e.cardData,o=e.getRoleDetail,f=e.systemRoleStore.createBatchRoleUserAction,d=(0,i.useState)([]),s=(0,u.default)(d,2),p=s[0],m=s[1],v=(0,i.useState)([]),b=(0,u.default)(v,2),g=b[0],h=b[1];(0,i.useEffect)((function(){l&&r&&(m(l.map((function(e){return e.user.id}))),h(l.map((function(e){return e.user.id}))))}),[r]);var y=function(){m([]),n(!1)};return i.default.createElement(c.default,{visible:r,addType:t,allSelectIds:g,selectedRowKeys:p,setSelectedRowKeys:m,handleOk:function(){f({role:{id:a},userIds:p}).then((function(e){y(),o()}))},handleCancel:y})})))},687:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(144);var u=n(r(64)),i=n(r(36));r(327);var l=n(r(124)),o=n(r(123)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),f=r(60),d=r(568),s=r(127);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.default=(0,f.inject)(s.SYSTEM_ROLE_STORE)((0,f.observer)((function(e){var t=e.open,r=e.onClose,n=e.roleId,a=e.groupUserList,f=e.getRoleDetail,s=e.systemRoleStore,p=s.createBatchRoleUserGroupAction,v=s.findRoleUserGroupListAction,b=l.default.useForm(),g=(0,o.default)(b,1)[0];(0,c.useEffect)((function(){n&&t&&v({roleId:n}).then((function(e){if(0===e.code){var t=e.data.map((function(e){return e.userGroup.id}));g.setFieldsValue({tagValues:t})}}))}),[t]);var h=function(){g.resetFields(),r()};return c.default.createElement(d.BaseModal,{visible:t,onOk:function(){g.submit()},onCancel:h,title:"添加用户组"},c.default.createElement(l.default,{form:g,preserve:!1,onFinish:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({role:{id:n}},e);p(t).then((function(e){0===e.code&&(h(),f())}))},layout:"vertical"},c.default.createElement(l.default.Item,{label:"用户组",name:"userGroupIds",rules:[{required:!0,message:"选择用户组"}]},c.default.createElement(u.default,{placeholder:"选择用户组",mode:"multiple"},a.map((function(e){return c.default.createElement(u.default.Option,{value:e.id,key:e.id},e.name)}))))))})))},688:function(e,t,r){"use strict";r.r(t)},689:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(329);var u=n(r(228));r(330);var i=n(r(231));r(226);var l=n(r(142)),o=n(r(234)),c=n(r(36));r(229);var f=n(r(143)),d=n(r(233));r(125);var s=n(r(52)),p=n(r(618));r(97);var m=n(r(46));r(332);var v=n(r(236)),b=n(r(123)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),h=r(60),y=r(197),O=n(r(636)),P=n(r(637)),E=r(127),w=r(568);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(639);t.default=(0,h.inject)(E.SYSTEM_ROLE_STORE)((0,h.observer)((function(e){var t=e.systemRoleStore,r=e.isBase,n=void 0!==r&&r,a=(0,y.useTranslation)().t,c=t.findRolePageAction,h=t.rolePage,E=t.deleteRoleAction,j=t.privilegeSystemRole,_=t.setDefaultRoleAction,S=(0,g.useState)(!1),D=(0,b.default)(S,2),k=D[0],x=D[1],A=(0,g.useState)(null),I=(0,b.default)(A,2),M=I[0],T=I[1],F=(0,g.useState)({pageParam:{pageSize:13,currentPage:1}}),C=(0,b.default)(F,2),z=C[0],L=C[1];(0,g.useEffect)((function(){U()}),[z]);var U=function(){c(z)},N=[{title:"角色名称",dataIndex:"name",width:"40%",ellipsis:!0,render:function(e,t){var r=t.businessType,n=t.defaultRole;return 1===r&&1===n?g.default.createElement(m.default,null,g.default.createElement("div",{className:"thoughtware_system_role_name",onClick:function(){return V(t)}},e),g.default.createElement(v.default,{color:"#87d068",style:{marginLeft:8,marginRight:0}},"默认"),g.default.createElement(v.default,{style:{marginLeft:8,marginRight:0}},"管理员")):1===n?g.default.createElement(m.default,null,g.default.createElement("div",{className:"thoughtware_system_role_name",onClick:function(){return V(t)}},e),g.default.createElement(v.default,{color:"#87d068",style:{marginLeft:8,marginRight:0}},"默认")):1===r?g.default.createElement(m.default,null,g.default.createElement("div",{className:"thoughtware_system_role_name",onClick:function(){return V(t)}},e),g.default.createElement(v.default,{style:{marginLeft:8,marginRight:0}},"管理员")):g.default.createElement("div",{className:"thoughtware_system_role_name",onClick:function(){return V(t)}},e)}},{title:"成员数",dataIndex:"roleUserList",width:"25%",ellipsis:!0,render:function(e,t){var r=t.roleUserList,n=r&&r.length>0?r.length:0;return"".concat(n,"人")}},{title:"类型",dataIndex:"group",width:"26%",ellipsis:!0,render:function(e){return"system"===e?"内置":a("privilege-role.custom")}},{title:"操作",dataIndex:"action",render:function(e,t){return n?g.default.createElement(m.default,{size:"middle"},0===t.defaultRole&&g.default.createElement(s.default,{title:"设置默认"},g.default.createElement(p.default,{onClick:function(){return W(t)},style:{fontSize:"var(--thoughtware-icon-size-16)"}})),g.default.createElement(s.default,{title:"删除"},g.default.createElement(f.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(){return B(t.id)},okText:"确定",cancelText:"取消"},g.default.createElement(d.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})))):g.default.createElement(m.default,{size:"middle"},0===t.defaultRole&&g.default.createElement(s.default,{title:"设置默认"},g.default.createElement(p.default,{onClick:function(){return W(t)},style:{fontSize:"var(--thoughtware-icon-size-16)"}})),0===t.businessType&&"system"!==t.group&&g.default.createElement(s.default,{title:"删除"},g.default.createElement(f.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(){return B(t.id)},okText:"确定",cancelText:"取消"},g.default.createElement(d.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}}))))}}],B=function(e){E(e).then((function(e){e.code||c(z)}))},W=function(e){_(e).then((function(e){e.code||c(z)}))},G=function(){x(!0)},V=function(e){T(e)};return g.default.createElement(u.default,{className:"thoughtware_system_role"},g.default.createElement(i.default,{sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"}},M?g.default.createElement(P.default,{roleDetailParams:M,setDetail:T,findRole:U,roleType:"system"}):g.default.createElement("div",{className:"thoughtware_system_role-content"},g.default.createElement(w.BreadCrumb,{firstItem:"权限"},n?g.default.createElement(w.Btn,{icon:g.default.createElement(o.default,null),onClick:function(){return G()},title:a("privilege-role.addSystemRole")}):g.default.createElement(w.Btn,{icon:g.default.createElement(o.default,null),type:"primary",onClick:function(){return G()},title:a("privilege-role.addRole")})),g.default.createElement(l.default,{columns:N,dataSource:j,rowKey:function(e){return e.id},pagination:!1}),g.default.createElement(w.Page,{currentPage:z.pageParam.currentPage,changPage:function(e){L(R(R({},z),{},{pageParam:{pageSize:12,currentPage:e}}))},page:h}))),g.default.createElement(O.default,{visible:k,setVisible:x,isBase:n,findRole:U,urlType:"system"}))})))},690:function(e,t,r){"use strict";var n=r(39),a=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(329);var u=n(r(228));r(330);var i=n(r(231));r(226);var l=n(r(142));r(225);var o=n(r(141)),c=n(r(146)),f=n(r(199)),d=n(r(35)),s=n(r(145)),p=n(r(36)),m=n(r(109));r(97);var v=n(r(46));r(229);var b=n(r(143)),g=n(r(233)),h=n(r(595));r(125);var y=n(r(52)),O=n(r(234)),P=n(r(123)),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=F(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),w=r(60),j=r(197),_=r(19),R=r(586),S=r(588),D=r(127),k=n(r(632)),x=n(r(631)),A=r(568),I=r(633);r(641);var M=["children","sort"],T=["children","sort"];function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(F=function(e){return e?r:t})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,p.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=(0,w.inject)(D.PRIVILEGE_SYSTEM_STORE)((0,w.observer)((function(e){var t=(0,j.useTranslation)().t,r=e.privilegeSystemStore,n=r.privilegeSystemTreeData,a=r.getFunctionListListAction,w=r.deleteFunctionAction,D=r.updateFunctionSortAction,F=(0,E.useState)(""),C=(0,P.default)(F,2),L=C[0],U=C[1],N=(0,E.useState)(!1),B=(0,P.default)(N,2),W=B[0],G=B[1],V=(0,E.useState)({}),J=(0,P.default)(V,2),K=J[0],Y=J[1],q=(0,E.useState)({}),H=(0,P.default)(q,2),Q=H[0],X=H[1],Z=(0,E.useState)({pageParam:{pageSize:9999,currentPage:1}}),$=(0,P.default)(Z,2),ee=$[0],te=$[1],re=[{title:t("privilege-feature-name"),dataIndex:"name",key:"name",className:"column_bg_w"},{title:t("privilege-feature-code"),dataIndex:"code",key:"code"},{title:"操作",dataIndex:"action",className:"column_bg_w",width:"10%",render:function(e,t){return E.default.createElement(v.default,{size:"middle"},!t.parentFunction&&E.default.createElement(y.default,{title:"添加"},E.default.createElement(O.default,{onClick:function(){return ae(t)},style:{fontSize:"var(--thoughtware-icon-size-16)"}})),E.default.createElement(y.default,{title:"编辑"},E.default.createElement(h.default,{onClick:function(){return ie(t)},style:{fontSize:"var(--thoughtware-icon-size-16)"}})),!t.children&&E.default.createElement(y.default,{title:"删除"},E.default.createElement(b.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(){return le(t)},okText:"确定",cancelText:"取消"},E.default.createElement(g.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}}))))}}];(0,E.useEffect)((function(){(0,m.default)(d.default.mark((function e(){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:case"end":return e.stop()}}),e)})))()}),[ee]);var ne=function(){var e=(0,m.default)(d.default.mark((function e(){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(ee);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=(0,E.useCallback)((function(e){U(e.id),G(!0)}),[]),ue=function(){var e=(0,m.default)(d.default.mark((function e(){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(""),Y({}),G(!1),e.next=5,ne();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(e){Y(e),G(!0)},le=function(){var e=(0,m.default)(d.default.mark((function e(t){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t.id);case 2:if(e.sent.code){e.next=6;break}return e.next=6,ne();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=(0,E.useCallback)(function(){var e=(0,m.default)(d.default.mark((function e(t){var r,n,a,u,i,l,o,c,p,m,v,b,g,h,y,O,P,E,w,j,_,R;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dragId,n=t.dropId,a=t.drag,u=t.drop,i=a.sort,l=-1,o=[],c=[],p={},m={},!u.children){e.next=31;break}if([],b=Q[n],g=u.children[0],!b){e.next=31;break}if(h=fe(g.id),p=z(z({},a),{},{parentFunction:h.parentFunction}),!(i<h.sort)){e.next=22;break}return v=[p].concat((0,s.default)(u.children)),e.next=18,ce(v);case 18:return e.next=20,ne();case 20:e.next=31;break;case 22:return l=u.children.findIndex((function(e){return e.id===h.id})),u.children.splice(l,0,a),u.children.forEach((function(e){c.push(e.sort)})),o=(0,I.sortNum)(c),u.children=u.children.map((function(e,t){return z(z({},e),{},{sort:o[t]})})),e.next=29,ce(u.children);case 29:return e.next=31,ne();case 31:u.parentFunction?(O=u.parentFunction.id,P=fe(O),y=P.children.filter((function(e){return e.id!==r})),l=y.findIndex((function(e){return e.id===u.id})),y.splice(l,0,z(z({},a),{},{parentFunction:P.children[0].parentFunction})),y.forEach((function(e){c.push(e.sort)})),o=(0,I.sortNum)(c),P.children=y.map((function(e,t){return z(z({},e),{},{sort:o[t]})})),ce(P.children).then((function(e){ne()}))):(a.children,E=a.sort,w=(0,f.default)(a,M),u.children,j=u.sort,_=(0,f.default)(u,T),a.parentFunction&&!u.parentFunction?(a.parentFunction.id,m=z(z({},_),{},{parentFunction:u.parentFunction,sort:E}),p=z(z({},w),{},{parentFunction:u.parentFunction,sort:j}),ce([m,p]).then((function(e){ne()}))):(R=[z(z({},w),{},{sort:j}),z(z({},_),{},{sort:E})],ce(R).then((function(e){ne()}))));case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,Q]),ce=function(){var e=(0,m.default)(d.default.mark((function e(t){var r;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={list:t},e.next=3,D(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=(0,E.useCallback)((function(e){var t={};return function r(n){for(var a=0;a<n.length;a++){var u=n[a];if(u.id===e){t=u;break}u.children&&u.children.length>0&&r(u.children)}return t}((0,_.toJS)(n)),t}),[n]);return E.default.createElement(u.default,{className:"systemFeature"},E.default.createElement(i.default,{sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"}},E.default.createElement(A.BreadCrumb,{firstItem:"功能管理"},E.default.createElement(A.Btn,{type:"primary",onClick:function(){return G(!0)},icon:E.default.createElement(O.default,null),title:t("privilege-add-feature")})),E.default.createElement("div",{style:{paddingBottom:16}},E.default.createElement(o.default,{placeholder:t("privilege-search")+t("privilege-orga-name"),onPressEnter:function(e){return function(e){var t=e.target.value;te(z(z({},ee),{},{name:t}))}(e)},style:{width:200},prefix:E.default.createElement(c.default,{style:{fontSize:"var(--thoughtware-icon-size-16)"}})})),E.default.createElement("div",{id:"drag-sorting"},E.default.createElement(R.DndProvider,{backend:S.HTML5Backend},E.default.createElement(l.default,{dataSource:(0,_.toJS)(n),columns:re,rowKey:"id",tableLayout:"fixed",pagination:!1,components:{body:{row:k.default}},onRow:function(e,t){return{record:e,data:(0,_.toJS)(n),index:t,moveRow:oe}},expandable:{onExpand:function(e,t){X(z(z({},Q),{},(0,p.default)({},t.id,e)))}}})))),E.default.createElement(x.default,{data:n,editData:K,visible:W,cancelAdd:ue,parentId:L,urlType:"system"}))})))},691:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(692));t.default=a.default},692:function(e,t,r){"use strict";var n=r(140);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}(r(0)),u=r(60),i=r(9),l=r(334);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}t.default=(0,u.inject)("systemRoleStore")((0,u.observer)((function(e){var t=e.projectRouters,r=e.outerPath,n=e.notFoundPath,u=e.domainId,o=e.systemRoleStore.domainPermissions,c=e.location.pathname,f=(0,i.getUser)().userId;return(0,a.useEffect)((function(){if(o){var a=o["".concat(f,"_").concat(u)];if(a&&a.length>0){var i=(0,l.SameValue)(a,t,"purviewCode");i&&c===r&&e.history.replace(i.id);var d=t.find((function(e){return e.id===c}));if(d)if(d.purviewCode)if(!a.includes(d.purviewCode))return e.history.push(n||"/index/404")}}}),[c,o]),e.children})))},725:function(e,t,r){"use strict";r(641)},726:function(e,t,r){"use strict";r(634)},727:function(e,t,r){"use strict";r(638)},728:function(e,t,r){"use strict";r(629)}}]);