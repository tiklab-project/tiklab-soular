(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{826:function(e,t,n){"use strict";n.r(t);var a=n(41),r=n.n(a),c=(n(31),n(29)),i=(n(32),n(27)),s=n(98),o=n.n(s),u=n(23),l=n.n(u),p=n(47),f=n.n(p),m=n(0),d=n.n(m),b=n(191),k=n(69),v=n.n(k),x=n(24),h=n.n(x),w=n(30),E=new function e(){v()(this,e),h()(this,"createWorkAppLink",function(){var e=o()(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Axios.post("/workAppLink/createWorkAppLink",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h()(this,"getWorkList",o()(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Axios.post("/workAppLink/findWorkAppLinkList",{});case 2:if((t=e.sent).code){e.next=5;break}return e.abrupt("return",t.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})))),h()(this,"findWorkByID",function(){var e=o()(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("id",t),e.next=4,w.Axios.post("/workAppLink/findWorkAppLink",n);case 4:if((a=e.sent).code){e.next=7;break}return e.abrupt("return",a.data);case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h()(this,"deleteWorkByID",function(){var e=o()(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("id",t),e.next=4,w.Axios.post("/workAppLink/deleteWorkAppLink",n);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h()(this,"updateWork",function(){var e=o()(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Axios.post("/workAppLink/updateWorkAppLink",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},y=(n(78),n(75)),O=n(235),j=(n(38),n(36)),g=(n(125),n(72)),A=(n(99),n(79)),L=(n(67),n(61));function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){var t=e.visible,n=e.setVisible,a=e.callBack,c=e.edit,i=L.default.useForm(),s=l()(i,1)[0];Object(m.useEffect)((function(){c&&s.setFieldsValue({appType:c.appType,appUrl:c.appUrl})}),[c]);return d.a.createElement(y.default,{title:"添加项目",visible:t,onOk:function(){s.submit()},onCancel:function(){s.resetFields(),a(),n(!1)},closable:!1,destroyOnClose:!0,preserve:!1},d.a.createElement(L.default,r()({},{labelCol:{span:6},wrapperCol:{span:18}},{form:s,onFinish:function(e){c?E.updateWork(W(W({},e),{},{id:c.id})).then((function(e){e.code?A.default.error("失败!"):(A.default.success("成功!"),a(),n(!1))})):E.createWorkAppLink(e).then((function(e){e.code?A.default.error("失败!"):(A.default.success("成功!"),a(),n(!1))}))}}),d.a.createElement(L.default.Item,{label:"标题",name:"appType",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},d.a.createElement(g.default,{options:[{label:"项目管理",value:"project"},{label:"API BOX",value:"apibox"}]})),d.a.createElement(L.default.Item,{label:"应用链接地址",name:"appUrl",rules:[{required:!0,message:"请填写地址"}]},d.a.createElement(j.default,null))))},P={apibox:{label:"API BOX"},project:{label:"项目管理"}},I=function(e){var t=e.visibleManagement,n=e.setVisibleManagement,a=e.workList,s=e.requestWorkList,u=Object(m.useState)(!1),p=l()(u,2),b=p[0],k=p[1],v=Object(m.useState)(null),x=l()(v,2),h=x[0],w=x[1],j=function(){var e=o()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.deleteWorkByID(t);case 2:e.sent.code||s();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d.a.createElement(y.default,{title:"应用链接管理",visible:t,onOk:function(){s(),n(!1)},onCancel:function(){n(!1)},closable:!1,destroyOnClose:!0},d.a.createElement(c.default,null,d.a.createElement(i.default,{span:24,style:{overflow:"auto"}},d.a.createElement("div",{className:"title"},"default"),d.a.createElement("div",{className:"box-gather"},a.map((function(e){return d.a.createElement("div",{className:"box-item",key:e.id},d.a.createElement("div",{className:"box-icon management"},P[e.appType].label,d.a.createElement("div",{className:"action"},d.a.createElement("span",{onClick:function(){return w(e),void k(!0)}},"编辑"),d.a.createElement("span",{onClick:function(){return j(e.id)}},"删除"))))})),d.a.createElement("div",{className:"box-item",onClick:function(){k(!0)}},d.a.createElement("div",{className:"box-icon"},d.a.createElement(O.a,{className:{fontSize:20}})))))),d.a.createElement(C,r()({},e,{edit:h,visible:b,setVisible:k,callBack:function(){w(null),s()}})))},D={apibox:{label:"API BOX"},project:{label:"项目管理"}};t.default=function(e){var t=Object(m.useState)([]),n=l()(t,2),a=n[0],s=n[1],u=Object(m.useState)(!1),p=l()(u,2),k=p[0],v=p[1],x=Object(b.f)();Object(m.useEffect)((function(){w().then((function(e){}))}),[]);var h=function(e){v(!0)},w=function(){var e=o()(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.getWorkList();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d.a.createElement(d.a.Fragment,null,d.a.createElement(c.default,{justify:"center",style:{width:"100%"}},d.a.createElement(i.default,{xl:{span:24},xxl:{span:16}},d.a.createElement("div",{className:"title"},"default",d.a.createElement("span",{className:"head-action",onClick:function(){return h()}},"管理")),d.a.createElement("div",{className:"box-gather"},a.map((function(e){var t=x.ticket?"".concat(e.appUrl,"?email=").concat(x.email,"&name=").concat(x.name,"&expireTime=").concat(x.expireTime,"&ticket=").concat(x.ticket,"&phone=").concat(x.phone,"&userId=").concat(x.userId):e.appUrl;return d.a.createElement("div",{className:"box-item",key:e.id},d.a.createElement("div",{className:"box-icon"},d.a.createElement("a",{href:t,target:"_blank"}," ",D[e.appType].label)))}))))),0===a.length&&d.a.createElement(c.default,{justify:"center",style:{width:"100%"}},d.a.createElement(i.default,{xl:{span:24},xxl:{span:16}},d.a.createElement("div",{className:"title"},"default",d.a.createElement("span",{className:"head-action",onClick:function(){return h()}},"管理")),d.a.createElement("div",{className:"box-gather"}))),d.a.createElement(I,r()({},e,{workList:a,requestWorkList:function(){w().then((function(e){}))},visibleManagement:k,setVisibleManagement:v})))}}}]);