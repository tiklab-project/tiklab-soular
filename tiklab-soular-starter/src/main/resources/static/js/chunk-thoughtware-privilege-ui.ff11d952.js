(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{138:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PRIVILEGE_DOMAIN_ROLE_STORE",{enumerable:!0,get:function(){return i.PRIVILEGE_DOMAIN_ROLE_STORE}}),Object.defineProperty(t,"PRIVILEGE_PROJECT_FEATURE_STORE",{enumerable:!0,get:function(){return u.PRIVILEGE_PROJECT_FEATURE_STORE}}),Object.defineProperty(t,"PRIVILEGE_PROJECT_ROLE_STORE",{enumerable:!0,get:function(){return c.PRIVILEGE_PROJECT_ROLE_STORE}}),Object.defineProperty(t,"PRIVILEGE_PROJECT_VIRTUAL_ROLE_STORE",{enumerable:!0,get:function(){return o.PRIVILEGE_PROJECT_VIRTUAL_ROLE_STORE}}),Object.defineProperty(t,"PRIVILEGE_SYSTEM_STORE",{enumerable:!0,get:function(){return f.PRIVILEGE_SYSTEM_STORE}}),Object.defineProperty(t,"SYSTEM_ROLE_STORE",{enumerable:!0,get:function(){return l.SYSTEM_ROLE_STORE}}),t.privilegeStores=void 0;var a=n(r(42)),i=r(337),u=r(338),l=r(339),o=r(340),c=r(341),f=r(342);t.privilegeStores=(0,a.default)((0,a.default)((0,a.default)((0,a.default)((0,a.default)((0,a.default)({},f.PRIVILEGE_SYSTEM_STORE,new f.SystemFeatureStore),l.SYSTEM_ROLE_STORE,new l.SystemRoleStore),c.PRIVILEGE_PROJECT_ROLE_STORE,new c.ProjectRoleStore),u.PRIVILEGE_PROJECT_FEATURE_STORE,new u.ProjectFeatureStore),i.PRIVILEGE_DOMAIN_ROLE_STORE,new i.DomainRoleStore),o.PRIVILEGE_PROJECT_VIRTUAL_ROLE_STORE,new o.ProjectVirtualRoleStore)},204:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.handlerFeaterNode=void 0,Object.defineProperty(t,"privilege_cn",{enumerable:!0,get:function(){return i.default}}),t.sort=void 0,Object.defineProperty(t,"usePermission",{enumerable:!0,get:function(){return u.default}});var a=n(r(42)),i=n(r(333)),u=n(r(334));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=t.sort=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e.sort-t.sort}))};t.handlerFeaterNode=function(e){return function e(t,r){for(var n=[],a=0;a<t.length;a++){var i=t[a];if(i.parentFunction===r||i.parentFunction&&i.parentFunction.id===r){var u=o(o({},i),{},{children:[]});u.children=e(t,i.id),0===u.children.length&&delete u.children,n.push(u)}}return c(n),n}(e,null)}},240:function(e){e.exports=JSON.parse('{"privilege-feature-name":"功能名称","privilege-feature-code":"功能编码","privilege-add-feature":"添加功能","privilege-orga-name":"组织名称","privilege-add-user":"添加成员","privilege-search":"搜索","privilege-desc":"描述","privilege-user-and-org":"用户名、部门","privilege-user":"用户名","privilege-select-user":"选择用户","privilege-common":{"edit":"编辑","delete":"删除","action":"操作","please-input":"请输入","please-select":"请输入","save":"保存","cancel":"取消"},"privilege-add-node":"添加子节点","privilege-edit-feature":"编辑功能","privilege-point-node":"挂载节点","privilege-point-node-placeholder":"请选择挂载节点","privilege-role":{"addRole":"添加角色","addSystemRole":"添加系统角色","editRole":"编辑角色","roleName":"角色名称","roleDesc":"角色描述","people":"成员","promise":"权限","name":"用户名","phone":"手机号","nickname":"姓名","email":"邮箱","type":"类别","orga":"部门","thirdparty":"第三方","internal":"内部","system":"系统","custom":"自定义","org":"组织"}}')},242:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(335));t.default=a.default},243:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(336));t.default=a.default},327:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.links=t.deleteSuccessReturnCurrenPage=void 0;var a=n(r(42));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.links=function(e,t){var r=[];return function e(n,a){n&&n.map((function(n){if(n.children){var i=n.children.map((function(e){return u(u({},e),{},{type:n[t]})}));e(i,r)}else a.push(n)}))}(e,r),r},t.deleteSuccessReturnCurrenPage=function(e,t,r){return e>=r*t?r:e<=(r-1)*t+1?1===r?1:r-1:r}},333:function(e,t,r){"use strict";r.r(t);var n=r(240);t.default=n},334:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(198)),i=r(0),u=r(10);t.default=function(e){var t=e.code,r=e.systemRoleStore,n=e.domainId,l=r.setSystemPermissionsCodes,o=r.setDomainPermissionsCodes,c=r.systemPermissions,f=r.domainPermissions,d=(0,i.useState)(null),s=(0,a.default)(d,2),p=s[0],m=s[1];return(0,i.useEffect)((function(){var e=new FormData,r=n?"permission/findDomainPermissions":"permission/findPermissions",a=(0,u.getUser)();if(a.userId){if(e.append("userId",a.userId),n){if(f.hasOwnProperty(n))return void m(f[n].includes(t));e.append("domainId",n)}else if(c.length>0)return void m(c.includes(t));u.Axios.post(r,e).then((function(e){e.code||(n?o(n,e.data):l(e.data),m(e.data.includes(t)))}))}}),[]),p}},335:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(323)),i=(n(r(0)),r(58)),u=["code","disabled","systemRoleStore"];t.default=(0,i.inject)("systemRoleStore")((0,i.observer)((function(e){var t=e.code,r=void 0===t?"":t,n=(e.disabled,e.systemRoleStore),i=(0,a.default)(e,u),l=n.systemPermissions;try{return r?l.includes(r)?i.children:null:i.children}catch(e){return l.includes(r)?i.children:null}})))},336:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(200)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),l=r(58),o=r(327);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}t.default=(0,l.inject)("systemRoleStore")((0,l.observer)((function(e){var t=e.expandedTree,r=e.setExpandedTree,n=e.applicationRouters,a=e.outerPath,l=e.pathKey,c=void 0===l?"id":l,f=e.noAccessPath,d=e.systemRoleStore,s=d.systemPermissions,p=d.privilegeLoading,m=e.location.pathname,v=(0,o.links)(n,c);return(0,u.useEffect)((function(){if(m===a)if(s&&s.length>0){var n=v.find((function(e){return s.includes(e.purviewCode)}));if(n)e.history.replace(n[c]);else{var u=v.find((function(e){return!e.purviewCode}));u&&e.history.replace(u[c])}}else{var l=v.find((function(e){return!e.purviewCode}));l&&e.history.replace(l[c])}else{var o=v.find((function(e){return e[c]===m}));if(o&&(t&&r([o.type].concat((0,i.default)(t))),o.purviewCode&&!p&&!s.includes(o.purviewCode)))return e.history.replace(f)}}),[m,s]),e.children})))},337:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.PRIVILEGE_DOMAIN_ROLE_STORE=t.DomainRoleStore=void 0;var a,i,u,l,o,c,f,d,s,p,m,v,b,g,y=n(r(35)),h=n(r(92)),O=n(r(75)),P=n(r(64)),E=n(r(63)),w=(n(r(42)),n(r(76))),j=(n(r(77)),r(17)),R=r(10);t.DomainRoleStore=(a=(0,P.default)((function e(){(0,E.default)(this,e),(0,O.default)(this,"privilegeDomainRole",i,this),(0,O.default)(this,"domainRolePage",u,this),(0,O.default)(this,"createDomainRoleAction",l,this),(0,O.default)(this,"deleteDomainRoleAction",o,this),(0,O.default)(this,"findDomainRoleListAction",c,this),(0,O.default)(this,"findDomainRolePageAction",f,this),(0,O.default)(this,"findDmRolePageByNumber",d,this),(0,O.default)(this,"setDomainRoleAction",s,this),(0,O.default)(this,"createDmRoleUserAction",p,this),(0,O.default)(this,"createBatchDmRoleUserAction",m,this),(0,O.default)(this,"updateDmRoleUserAction",v,this),(0,O.default)(this,"deleteDmRoleUserAction",b,this),(0,O.default)(this,"findDmRoleUserListAction",g,this)})),i=(0,w.default)(a.prototype,"privilegeDomainRole",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=(0,w.default)(a.prototype,"domainRolePage",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{currentPage:1,totalPage:1,totalRecord:1}}}),l=(0,w.default)(a.prototype,"createDomainRoleAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,h.default)(y.default.mark((function e(t){return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/dmRole/createDmRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),o=(0,w.default)(a.prototype,"deleteDomainRoleAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,h.default)(y.default.mark((function e(t){var r;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,R.Axios.post("/dmRole/deleteDmRole",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),c=(0,w.default)(a.prototype,"findDomainRoleListAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,h.default)(y.default.mark((function e(t){var r;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/dmRole/findDmRoleList",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),f=(0,w.default)(a.prototype,"findDomainRolePageAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,h.default)(y.default.mark((function t(r){var n;return y.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.Axios.post("/dmRole/findDmRolePage",r);case 2:return 0===(n=t.sent).code&&(e.domainRolePage={currentPage:n.data.currentPage,totalPage:n.data.totalPage,totalRecord:n.data.totalRecord},e.privilegeDomainRole=n.data.dataList),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),d=(0,w.default)(a.prototype,"findDmRolePageByNumber",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,h.default)(y.default.mark((function t(r){var n;return y.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.Axios.post("/dmRole/findDmRolePageByNumber",r);case 2:return 0===(n=t.sent).code&&(e.domainRolePage={currentPage:n.data.currentPage,totalPage:n.data.totalPage,totalRecord:n.data.totalRecord},e.privilegeDomainRole=n.data.dataList),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),s=(0,w.default)(a.prototype,"setDomainRoleAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,h.default)(y.default.mark((function e(t){return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/dmRole/setdefaultRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),p=(0,w.default)(a.prototype,"createDmRoleUserAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,h.default)(y.default.mark((function e(t){return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/dmRoleUser/createDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),m=(0,w.default)(a.prototype,"createBatchDmRoleUserAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,h.default)(y.default.mark((function e(t){return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/dmRoleUser/createBatchDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),v=(0,w.default)(a.prototype,"updateDmRoleUserAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,h.default)(y.default.mark((function e(t){return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/dmRoleUser/updateDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),b=(0,w.default)(a.prototype,"deleteDmRoleUserAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,h.default)(y.default.mark((function e(t){var r;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,R.Axios.post("/dmRoleUser/deleteDmRoleUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),g=(0,w.default)(a.prototype,"findDmRoleUserListAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,h.default)(y.default.mark((function e(t){return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.Axios.post("/dmRoleUser/findDmRoleUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),a),t.PRIVILEGE_DOMAIN_ROLE_STORE="privilegeDomainRoleStore"},338:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectFeatureStore=t.PRIVILEGE_PROJECT_FEATURE_STORE=void 0;var a,i,u,l,o,c,f,d=n(r(200)),s=n(r(75)),p=n(r(64)),m=n(r(63)),v=n(r(42)),b=n(r(76)),g=(n(r(77)),r(17));function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,v.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.ProjectFeatureStore=(a=(0,p.default)((function e(){(0,m.default)(this,e),(0,s.default)(this,"privilegeProjectTreeData",i,this),(0,s.default)(this,"getDmPrivilegeTree",u,this),(0,s.default)(this,"addDmFeature",l,this),(0,s.default)(this,"addDmChildrenFeature",o,this),(0,s.default)(this,"deleteDmFeature",c,this),(0,s.default)(this,"editDmFeature",f,this)})),i=(0,b.default)(a.prototype,"privilegeProjectTreeData",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=(0,b.default)(a.prototype,"getDmPrivilegeTree",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeProjectTreeData=t}}}),l=(0,b.default)(a.prototype,"addDmFeature",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeProjectTreeData.push(t)}}}),o=(0,b.default)(a.prototype,"addDmChildrenFeature",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){e.privilegeProjectTreeData=e.privilegeProjectTreeData.map((function(e){return e.id===r?h(h({},e),{},{children:[t].concat((0,d.default)(e.children))}):e}))}}}),c=(0,b.default)(a.prototype,"deleteDmFeature",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id!==t.id&&n.push(h(h({},r),{},{children:[]})),r.children&&r.children.length>0&&e(r.children,n[a].children)}))}(e.privilegeProjectTreeData,r),e.privilegeProjectTreeData=r}}}),f=(0,b.default)(a.prototype,"editDmFeature",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id===t.id?n.push(h(h(h({},r),t),{},{children:[]})):n.push(h(h({},r),{},{children:[]})),r.children&&n[a].children&&e(r.children,n[a].children)}))}(e.privilegeProjectTreeData,r),e.privilegeProjectTreeData=r}}}),a),t.PRIVILEGE_PROJECT_FEATURE_STORE="privilegeProjectFeatureStore"},339:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRoleStore=t.SYSTEM_ROLE_STORE=void 0;var a,i,u,l,o,c,f,d,s,p,m,v,b,g,y,h,O,P,E,w,j,R,_,S,k,x,D,I,T,A,M,L,F,C=n(r(35)),N=n(r(92)),U=n(r(75)),z=n(r(64)),B=n(r(63)),V=(n(r(42)),n(r(76))),G=(n(r(77)),r(17)),W=r(10);t.SystemRoleStore=(a=(0,z.default)((function e(){(0,B.default)(this,e),(0,U.default)(this,"privilegeLoading",i,this),(0,U.default)(this,"privilegeSystemRole",u,this),(0,U.default)(this,"systemPermissions",l,this),(0,U.default)(this,"rolePage",o,this),(0,U.default)(this,"domainPermissions",c,this),(0,U.default)(this,"clearAllPermissions",f,this),(0,U.default)(this,"findAllList",d,this),(0,U.default)(this,"findRoleUserList",s,this),(0,U.default)(this,"findRoleUserPage",p,this),(0,U.default)(this,"deleteRoleUser",m,this),(0,U.default)(this,"createBatchRoleUser",v,this),(0,U.default)(this,"findRoleUserGroupList",b,this),(0,U.default)(this,"findRoleUserGroupPage",g,this),(0,U.default)(this,"deleteRoleUserGroup",y,this),(0,U.default)(this,"createBatchRoleUserGroup",h,this),(0,U.default)(this,"findRoleOrgaList",O,this),(0,U.default)(this,"findRoleOrgaPage",P,this),(0,U.default)(this,"deleteRoleOrga",E,this),(0,U.default)(this,"createBatchRoleOrga",w,this),(0,U.default)(this,"findOrgaTree",j,this),(0,U.default)(this,"findUserGroupList",R,this),(0,U.default)(this,"findDmUserPage",_,this),(0,U.default)(this,"findUserPage",S,this),(0,U.default)(this,"getInitProjectPermissions",k,this),(0,U.default)(this,"getSystemPermissions",x,this),(0,U.default)(this,"findRolePageAction",D,this),(0,U.default)(this,"findRolePageAndRoleUserNumber",I,this),(0,U.default)(this,"setDefaultRoleAction",T,this),(0,U.default)(this,"deleteRoleAction",A,this),(0,U.default)(this,"deleteRoleUserAction",M,this),(0,U.default)(this,"findRoleUserListAction",L,this),(0,U.default)(this,"createBatchRoleUserAction",F,this)})),i=(0,V.default)(a.prototype,"privilegeLoading",[G.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=(0,V.default)(a.prototype,"privilegeSystemRole",[G.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,V.default)(a.prototype,"systemPermissions",[G.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=(0,V.default)(a.prototype,"rolePage",[G.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{currentPage:1,totalPage:1,totalRecord:1}}}),c=(0,V.default)(a.prototype,"domainPermissions",[G.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f=(0,V.default)(a.prototype,"clearAllPermissions",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.systemPermissions=[],e.domainPermissions={}}}}),d=(0,V.default)(a.prototype,"findAllList",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,N.default)(C.default.mark((function e(){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Axios.post("/user/userdir/findAllList");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),s=(0,V.default)(a.prototype,"findRoleUserList",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){var r;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("roleId",t),e.abrupt("return",W.Axios.post("/role/count/findRoleUserList",r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),p=(0,V.default)(a.prototype,"findRoleUserPage",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.Axios.post("/roleUser/findRoleUserPage",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),m=(0,V.default)(a.prototype,"deleteRoleUser",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.Axios.post("/roleUser/deleteRoleUser",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),v=(0,V.default)(a.prototype,"createBatchRoleUser",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.Axios.post("/roleUser/createBatchRoleUser",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),b=(0,V.default)(a.prototype,"findRoleUserGroupList",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.Axios.post("/role/userGroup/findRoleUserGroupList",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),g=(0,V.default)(a.prototype,"findRoleUserGroupPage",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.Axios.post("/role/userGroup/findRoleUserGroupPage",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),y=(0,V.default)(a.prototype,"deleteRoleUserGroup",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.Axios.post("/role/userGroup/deleteRoleUserGroup",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),h=(0,V.default)(a.prototype,"createBatchRoleUserGroup",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.Axios.post("/role/userGroup/createBatchRoleUserGroup",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),O=(0,V.default)(a.prototype,"findRoleOrgaList",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.Axios.post("/role/orga/findRoleOrgaList",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),P=(0,V.default)(a.prototype,"findRoleOrgaPage",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.Axios.post("/role/orga/findRoleOrgaPage",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),E=(0,V.default)(a.prototype,"deleteRoleOrga",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.Axios.post("/role/orga/deleteRoleOrga",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),w=(0,V.default)(a.prototype,"createBatchRoleOrga",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W.Axios.post("/role/orga/createBatchRoleOrga",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),j=(0,V.default)(a.prototype,"findOrgaTree",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Axios.post("/user/orga/findOrgaTree",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),R=(0,V.default)(a.prototype,"findUserGroupList",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Axios.post("/usergroup/findUserGroupList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),_=(0,V.default)(a.prototype,"findDmUserPage",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){var r;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Axios.post("/dmUser/findDmUserPage",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),S=(0,V.default)(a.prototype,"findUserPage",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Axios.post("/user/user/findUserPage",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),k=(0,V.default)(a.prototype,"getInitProjectPermissions",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.privilegeLoading=!0,t&&r){var a={userId:t,domainId:r,globalPublic:n},i={};return(0,W.getUser)()&&(0,W.getUser)().tenant&&(i={tenant:(0,W.getUser)().tenant}),W.Axios.post("/permission/findDomainPermissions",a,i).then((function(n){return n.code||(e.domainPermissions["".concat(t,"_").concat(r)]=n.data),e.privilegeLoading=!1,n}))}}}}),x=(0,V.default)(a.prototype,"getSystemPermissions",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeLoading=!0;var r=new FormData;r.append("userId",t);var n={};return(0,W.getUser)()&&(0,W.getUser)().tenant&&(n={tenant:(0,W.getUser)().tenant}),W.Axios.post("/permission/findPermissions",r,n).then((function(t){return t.code||(e.systemPermissions=t.data),e.privilegeLoading=!1,t}))}}}),D=(0,V.default)(a.prototype,"findRolePageAction",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,N.default)(C.default.mark((function t(r,n){var a;return C.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.Axios.post("/role/findRolePage",r,n);case 2:return 0===(a=t.sent).code&&(e.rolePage={currentPage:a.data.currentPage,totalPage:a.data.totalPage,totalRecord:a.data.totalRecord},e.privilegeSystemRole=a.data.dataList),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}}),I=(0,V.default)(a.prototype,"findRolePageAndRoleUserNumber",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,N.default)(C.default.mark((function t(r,n){var a;return C.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.Axios.post("/role/findRolePageAndRoleUserNumber",r,n);case 2:return 0===(a=t.sent).code&&(e.rolePage={currentPage:a.data.currentPage,totalPage:a.data.totalPage,totalRecord:a.data.totalRecord},e.privilegeSystemRole=a.data.dataList),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}}),T=(0,V.default)(a.prototype,"setDefaultRoleAction",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Axios.post("/role/setdefaultRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),A=(0,V.default)(a.prototype,"deleteRoleAction",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){var r;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,W.Axios.post("/role/deleteRole",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),M=(0,V.default)(a.prototype,"deleteRoleUserAction",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){var r;return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,W.Axios.post("/roleUser/deleteRoleUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),L=(0,V.default)(a.prototype,"findRoleUserListAction",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Axios.post("/roleUser/findRoleUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),F=(0,V.default)(a.prototype,"createBatchRoleUserAction",[G.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,N.default)(C.default.mark((function e(t){return C.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.Axios.post("/roleUser/createBatchRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),a),t.SYSTEM_ROLE_STORE="systemRoleStore"},340:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectVirtualRoleStore=t.PRIVILEGE_PROJECT_VIRTUAL_ROLE_STORE=void 0;var a,i,u,l,o,c=n(r(35)),f=n(r(92)),d=n(r(75)),s=n(r(64)),p=n(r(63)),m=(n(r(42)),n(r(76))),v=(n(r(77)),r(17)),b=r(10);t.ProjectVirtualRoleStore=(a=(0,s.default)((function e(){(0,p.default)(this,e),(0,d.default)(this,"createVRole",i,this),(0,d.default)(this,"updateVRole",u,this),(0,d.default)(this,"deleteVRole",l,this),(0,d.default)(this,"findVRolePage",o,this)})),i=(0,m.default)(a.prototype,"createVRole",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,f.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.Axios.post("/vRole/createVRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),u=(0,m.default)(a.prototype,"updateVRole",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,f.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.Axios.post("/vRole/updateVRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),l=(0,m.default)(a.prototype,"deleteVRole",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,f.default)(c.default.mark((function e(t){var r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,b.Axios.post("/vRole/deleteVRole",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),o=(0,m.default)(a.prototype,"findVRolePage",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,f.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.Axios.post("/vRole/findVRolePage",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),a),t.PRIVILEGE_PROJECT_VIRTUAL_ROLE_STORE="projectVirtualRoleStore"},341:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectRoleStore=t.PRIVILEGE_PROJECT_ROLE_STORE=void 0;var a,i,u,l=n(r(75)),o=n(r(64)),c=n(r(63)),f=(n(r(42)),n(r(76))),d=(n(r(77)),r(17));t.ProjectRoleStore=(a=(0,o.default)((function e(){(0,c.default)(this,e),(0,l.default)(this,"privilegeProjectRole",i,this),(0,l.default)(this,"getProjectRoles",u,this)})),i=(0,f.default)(a.prototype,"privilegeProjectRole",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=(0,f.default)(a.prototype,"getProjectRoles",[d.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeProjectRole=t}}}),a),t.PRIVILEGE_PROJECT_ROLE_STORE="privilegeProjectRoleStore"},342:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.SystemFeatureStore=t.PRIVILEGE_SYSTEM_STORE=void 0;var a,i,u,l,o,c,f,d,s,p=n(r(35)),m=n(r(92)),v=n(r(200)),b=n(r(75)),g=n(r(64)),y=n(r(63)),h=n(r(42)),O=n(r(76)),P=(n(r(77)),r(17)),E=r(10),w=r(204);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,h.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.SystemFeatureStore=(a=(0,g.default)((function e(){(0,y.default)(this,e),(0,b.default)(this,"privilegeSystemTreeData",i,this),(0,b.default)(this,"addFeature",u,this),(0,b.default)(this,"addChildrenFeature",l,this),(0,b.default)(this,"deleteFeature",o,this),(0,b.default)(this,"editFeature",c,this),(0,b.default)(this,"getFunctionListListAction",f,this),(0,b.default)(this,"updateFunctionSortAction",d,this),(0,b.default)(this,"deleteFunctionAction",s,this)})),i=(0,O.default)(a.prototype,"privilegeSystemTreeData",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=(0,O.default)(a.prototype,"addFeature",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeSystemTreeData.push(t)}}}),l=(0,O.default)(a.prototype,"addChildrenFeature",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){e.privilegeSystemTreeData=e.privilegeSystemTreeData.map((function(e){return e.id===r?R(R({},e),{},{children:[t].concat((0,v.default)(e.children))}):e}))}}}),o=(0,O.default)(a.prototype,"deleteFeature",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id!==t.id&&n.push(R(R({},r),{},{children:[]})),r.children&&r.children.length>0&&e(r.children,n[a].children)}))}(e.privilegeSystemTreeData,r),e.privilegeSystemTreeData=r}}}),c=(0,O.default)(a.prototype,"editFeature",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id===t.id?n.push(R(R(R({},r),t),{},{children:[]})):n.push(R(R({},r),{},{children:[]})),r.children&&n[a].children&&e(r.children,n[a].children)}))}(e.privilegeSystemTreeData,r),e.privilegeSystemTreeData=r}}}),f=(0,O.default)(a.prototype,"getFunctionListListAction",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,m.default)(p.default.mark((function t(r){var n,a;return p.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.Axios.post("/function/findFunctionList",r);case 2:return(n=t.sent).code||(a=(0,w.handlerFeaterNode)(n.data),e.privilegeSystemTreeData=a),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),d=(0,O.default)(a.prototype,"updateFunctionSortAction",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,m.default)(p.default.mark((function e(t){return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.Axios.post("/function/updateFunctionSort",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),s=(0,O.default)(a.prototype,"deleteFunctionAction",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,m.default)(p.default.mark((function e(t){var r;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,E.Axios.post("/function/deleteFunction",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),a),t.PRIVILEGE_SYSTEM_STORE="privilegeSystemStore"},349:function(e,t,r){},350:function(e,t,r){},599:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseModal",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"BreadCrumb",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Btn",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ListAction",{enumerable:!0,get:function(){return c.ListAction}}),Object.defineProperty(t,"ListEmpty",{enumerable:!0,get:function(){return c.ListEmpty}}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Profile",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"SearchInput",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"SearchSelect",{enumerable:!0,get:function(){return d.default}});var a=n(r(726)),i=n(r(729)),u=n(r(731)),l=n(r(733)),o=n(r(654)),c=r(735),f=n(r(739)),d=n(r(740))},622:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DomainRole",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"NoAccess",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"PrivilegeButton",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"PrivilegeProjectButton",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"ProjectFeature",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"ProjectNav",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"ProjectRole",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"ProjectVirtualRole",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"SystemFeature",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"SystemNav",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"SystemRole",{enumerable:!0,get:function(){return f.default}});var a=n(r(723)),i=n(r(242)),u=n(r(746)),l=n(r(658)),o=n(r(663)),c=n(r(667)),f=n(r(645)),d=n(r(670)),s=n(r(243)),p=n(r(754)),m=n(r(652))},644:function(e,t,r){"use strict";r.r(t)},645:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(752));t.default=a.default},652:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(718));t.default=a.default},654:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(119);var a=n(r(53)),i=n(r(0));r(727);t.default=function(e){var t=e.icon,r=e.type,n=e.title,u=e.onClick,l=e.isMar,o=e.children;return i.default.createElement("div",{className:"privilege-btn ".concat(r?"privilege-btn-".concat(r):""," ").concat(l?"privilege-btn-mar":""),onClick:u},i.default.createElement(a.default,null,t&&i.default.createElement("span",{className:"privilege-btn-icon"},t),o||n))}},655:function(e,t,r){"use strict";r.r(t)},656:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(520);var i=n(r(519)),u=n(r(42)),l=n(r(200)),o=n(r(198));r(329);var c=n(r(122)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),d=r(10),s=r(599);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(644);var b=c.default.Group;t.default=function(e){var t=e.roleDetail,r=e.isBase,n=e.type,a=(0,f.useState)(!1),u=(0,o.default)(a,2),p=u[0],m=u[1],g=(0,f.useState)([]),y=(0,o.default)(g,2),h=y[0],O=y[1],P=(0,f.useState)({}),E=(0,o.default)(P,2),w=E[0],j=E[1],R=(0,f.useState)([]),_=(0,o.default)(R,2),S=_[0],k=_[1],x=[{title:"模块",key:"label",width:"30%",render:function(e){return f.default.createElement(c.default,{disabled:!p,indeterminate:e.indeterminate,onChange:function(t){return C(t,e)},checked:e.checkAll},e.label)}},{title:"功能点",key:"name",render:function(e){return f.default.createElement("div",{className:"privilege-role-promise"},f.default.createElement(b,{disabled:!p,options:w[e.value],value:e.checkedList,onChange:function(t){return M(t,e)}}))}}];(0,f.useEffect)((function(){null!=t&&t.id&&D()}),[null==t?void 0:t.id]);var D=function(){var e;e="system"===n?{group:null==t?void 0:t.group}:{type:"2"},d.Axios.post("/function/findFunctionList",e).then((function(e){if(!e.code){var t=I(e.data);O(t.result),j(t.resultChild),A(!0,t.result,t.resultChild)}}))},I=function(e){var t=e.map((function(e){return!e.parentFunction&&{value:e.id,label:e.name}})).filter(Boolean),r=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&{value:e.id,label:e.name,parent:e.parentFunction.id}})).filter(Boolean),n=[],a={};return t.forEach((function(e){var t=e.value,i=r.filter((function(e){return e.parent===t}));n.push({value:e.value,label:e.label,indeterminate:!1,checkedList:[],checkAll:!1}),a[e.value]=i})),{result:n,resultChild:a}},T=function(e){var t=e.filter((function(e){return e.function&&e.function.parentFunction})).map((function(e){return{parentID:e.function.parentFunction.id,id:e.function.id}})),r=e.filter((function(e){return!e.function.parentFunction})).map((function(e){return e.function.id})),n={};return r.forEach((function(e){var r=t.map((function(t){if(t.parentID===e)return t.id})).filter(Boolean);n[e]=[].concat((0,l.default)(r),[e])})),n},A=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={roleId:"domain"===n?t.role.id:t.id};d.Axios.post("roleFunction/findRoleFunctionList",i).then((function(t){if(!t.code){var n=T(t.data),i=e?a:w,u=(e?r:h).map((function(e){var t=n[e.value]?n[e.value]:[],r=0===i[e.value].length,a=t.length===i[e.value].length+1&&0!==t.length,u=a?!a:!!t.length&&t.length<i[e.value].length+1;return r&&1===t.length&&(a=!0,u=!1),v(v({},e),{},{checkedList:t,indeterminate:u,checkAll:a})}));O(u),k(t.data.map((function(e){return e.function.id})))}}))},M=function(e,t){L(e,t)},L=function(e,t){var r=h.map((function(r){if(r.value===t.value){if(0===e.length)return F(t,"delete"),v(v({},r),{},{checkedList:[],checkAll:!1,indeterminate:!1});if(e.length===w[t.value].length)return F(t,"add"),v(v({},r),{},{checkedList:e,checkAll:!0,indeterminate:!1});if(e.length<w[t.value].length)return F(t,"filterAdd",e),v(v({},r),{},{checkedList:e,checkAll:!1,indeterminate:!0})}return r}));O(r)},F=function(e,t,r){var n,a=w[e.value].map((function(e){return e.value})).filter(Boolean),i=[].concat((0,l.default)(a),[e.value]);if("add"===t)n=Array.from(new Set([].concat((0,l.default)(S),(0,l.default)(i))));else if("delete"===t)n=S.filter((function(e){return!i.includes(e)}));else{var u=S.filter((function(e){return!a.includes(e)}));n=Array.from(new Set([].concat((0,l.default)(u),(0,l.default)(r),[e.value])))}k(n)},C=function(e,t){var r=S.includes(t.value),n=h.map((function(e){if(e.value===t.value){if(F(t,r?"delete":"add"),r)return v(v({},e),{},{checkedList:[],checkAll:!1,indeterminate:!1});var n=w[t.value].map((function(e){return e.value})).filter(Boolean);return v(v({},e),{},{checkedList:n,checkAll:!0,indeterminate:!1})}return e}));O(n)},N=function(){A(),m(!1)},U=function(){var e={role:{id:"domain"===n?t.role.id:t.id},functionList:S};d.Axios.post("roleFunction/updateRoleAllFunction",e).then((function(e){0===e.code&&A(),m(!1)}))};return f.default.createElement("div",{className:"tiklab_role_promisse"},p?f.default.createElement("div",{className:"tiklab_role_promisse_up"},f.default.createElement(s.Btn,{onClick:N,isMar:!0},"取消"),f.default.createElement(s.Btn,{type:"primary",onClick:U},"保存")):(r||2!==t.businessType)&&f.default.createElement("div",{className:"tiklab_role_promisse_up"},f.default.createElement(s.Btn,{onClick:function(){return m(!0)}},"编辑")),f.default.createElement("div",{className:"tiklab_role_promisse_table"},f.default.createElement(i.default,{bordered:!0,pagination:!1,columns:x,dataSource:h,rowKey:function(e){return e.value},locale:{emptyText:f.default.createElement(s.ListEmpty,null)}})),p&&f.default.createElement("div",{className:"tiklab_role_promisse_bottom"},f.default.createElement(s.Btn,{onClick:N,isMar:!0},"取消"),f.default.createElement(s.Btn,{type:"primary",onClick:U},"保存")))}},657:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(35));r(520);var u=n(r(519));r(222);var l=n(r(93)),o=n(r(549));r(119);var c=n(r(53));r(218);var f=n(r(62)),d=n(r(92)),s=n(r(42)),p=n(r(198)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),v=r(58),b=r(599),g=r(327),y=r(138),h=n(r(741)),O=n(r(742)),P=n(r(743));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(644);t.default=(0,v.inject)(y.SYSTEM_ROLE_STORE,y.PRIVILEGE_DOMAIN_ROLE_STORE)((0,v.observer)((function(e){var t=e.domainId,r=e.roleType,n=e.roleDetail,a=e.systemRoleStore,s=e.findRole,v=e.privilegeDomainRoleStore,y=a.findRoleUserPage,E=a.findRoleOrgaPage,w=a.findRoleUserGroupPage,R=a.findRoleUserList,_=a.findRoleOrgaList,S=a.findRoleUserGroupList,k=a.createBatchRoleUser,x=a.createBatchRoleUserGroup,D=a.createBatchRoleOrga,I=a.deleteRoleOrga,T=a.deleteRoleUserGroup,A=a.deleteRoleUser,M=v.findDmRoleUserListAction,L=v.createBatchDmRoleUserAction,F=v.deleteDmRoleUserAction,C={pageSize:10,currentPage:1},N=(0,m.useState)(!1),U=(0,p.default)(N,2),z=U[0],B=U[1],V=(0,m.useState)("all"),G=(0,p.default)(V,2),W=G[0],K=G[1],J=(0,m.useState)({pageParam:C}),Y=(0,p.default)(J,2),q=Y[0],H=Y[1],Q=(0,m.useState)({}),X=(0,p.default)(Q,2),Z=X[0],$=X[1],ee=(0,m.useState)({}),te=(0,p.default)(ee,2),re=te[0],ne=te[1],ae=(0,m.useState)(null),ie=(0,p.default)(ae,2),ue=ie[0],le=ie[1],oe=(0,m.useState)([]),ce=(0,p.default)(oe,2),fe=ce[0],de=ce[1],se=(0,m.useState)([]),pe=(0,p.default)(se,2),me=pe[0],ve=pe[1],be=(0,m.useState)([]),ge=(0,p.default)(be,2),ye=ge[0],he=ge[1];(0,m.useEffect)((function(){if("user"===ue){if("domain"===r){var e=re.dataList;return de(e.map((function(e){var t;return null==e||null===(t=e.user)||void 0===t?void 0:t.id}))),void ve(e.map((function(e){var t;return null==e||null===(t=e.user)||void 0===t?void 0:t.id})))}R(n.id).then((function(e){0===e.code&&(de(e.data.map((function(e){return null==e?void 0:e.id}))),ve(e.data.map((function(e){return null==e?void 0:e.id}))))}))}"group"===ue&&S({roleId:n.id}).then((function(e){0===e.code&&(de(e.data.map((function(e){var t;return null==e||null===(t=e.userGroup)||void 0===t?void 0:t.id}))),ve(e.data.map((function(e){var t;return null==e||null===(t=e.userGroup)||void 0===t?void 0:t.id}))))})),"orga"===ue&&_({roleId:n.id}).then((function(e){0===e.code&&(de(e.data.map((function(e){var t;return null==e||null===(t=e.orga)||void 0===t?void 0:t.orgaId}))),ve(e.data.map((function(e){var t;return null==e||null===(t=e.orga)||void 0===t?void 0:t.orgaId}))))}))}),[ue]),(0,m.useEffect)((function(){Oe()}),[W,q]);var Oe=function(){if(B(!0),"domain"===r)return Pe();if(2===(null==n?void 0:n.businessType))return we();switch(W){case"all":return Ee();case"user":return we();case"orga":return je();default:return Re()}},Pe=function(){M({dmRoleId:n.id}).then((function(e){if(0===e.code){var t=e.data;$(t),ne({dataList:t.slice(0,10),totalPage:Math.ceil(t.length/10),totalRecord:t.length||1,currentPage:1})}B(!1)}))},Ee=function(){R(n.id).then((function(e){if(0===e.code){var t=e.data;$(t),ne({dataList:t.slice(0,10),totalPage:Math.ceil(t.length/10),totalRecord:t.length||1,currentPage:1})}B(!1)}))},we=function(){y(j(j({},q),{},{roleId:n.id})).then((function(e){0===e.code&&ne(e.data),B(!1)}))},je=function(){E(j(j({},q),{},{roleId:n.id})).then((function(e){0===e.code&&ne(e.data),B(!1)}))},Re=function(){w(j(j({},q),{},{roleId:n.id})).then((function(e){0===e.code&&ne(e.data),B(!1)}))},_e=function(e){K(e),H({pageParam:C}),ne({})},Se=function(){var e=(0,d.default)(i.default.mark((function e(t){var n,a,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("domain"!==r){e.next=3;break}return F(t).then((function(e){0===e.code?(Pe(),s(),f.default.info("删除成功")):f.default.error(a.msg)})),e.abrupt("return");case 3:if((n=new FormData).append("id",t),"user"!==W){e.next=11;break}return e.next=8,A(n);case 8:a=e.sent,e.next=20;break;case 11:if("orga"!==W){e.next=17;break}return e.next=14,I(n);case 14:a=e.sent,e.next=20;break;case 17:return e.next=19,T(n);case 19:a=e.sent;case 20:0===a.code?(u=(0,g.deleteSuccessReturnCurrenPage)(re.totalRecord,10,q.pageParam.currentPage),ke(u),s(),f.default.info("删除成功")):f.default.error(a.msg);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(e){if("domain"===r||"all"===W)return a=(n=10*((t=e)-1))+10,void ne(j(j({},re),{},{currentPage:t,dataList:null==Z?void 0:Z.slice(n,a)}));var t,n,a;H({pageParam:{pageSize:10,currentPage:e}})},xe=function(){var e=(0,d.default)(i.default.mark((function e(){var a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("user"!==ue){e.next=12;break}if("domain"!==r){e.next=7;break}return e.next=4,L({dmRole:{id:n.id},domainId:t,userIds:fe});case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,k({role:{id:n.id},userList:fe});case 9:a=e.sent;case 10:e.next=21;break;case 12:if("orga"!==ue){e.next=18;break}return e.next=15,D({role:{id:n.id},orgaIdList:fe});case 15:a=e.sent,e.next=21;break;case 18:return e.next=20,x({role:{id:n.id},userGroupIdList:fe});case 20:a=e.sent;case 21:0===a.code?(Oe(),s(),f.default.info("添加成功")):f.default.error(a.msg),De();case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(){de([]),ve([]),le(null)},Ie=[{title:"姓名",dataIndex:["user","nickname"],key:["user","nickname"],width:"18%",ellipsis:!0,render:function(e,t){return m.default.createElement(c.default,null,m.default.createElement(b.Profile,{userInfo:null==t?void 0:t.user}),e||"--")}},{title:"用户名",dataIndex:["user","name"],key:["user","name"],width:"18%",ellipsis:!0,render:function(e){return e||"--"}},{title:"手机号",dataIndex:["user","phone"],key:["user","phone"],width:"18%",ellipsis:!0,render:function(e){return e||"--"}},{title:"邮箱",dataIndex:["user","email"],key:["user","email"],width:"18%",ellipsis:!0,render:function(e){return e||"--"}},{title:"用户目录",dataIndex:["user","dirId"],key:["user","dirId"],width:"18%",ellipsis:!0,render:function(e){var t=ye.find((function(t){return t.id===e}));return t?t.name:"--"}},{title:"操作",dataIndex:"action",key:"action",width:"10%",render:function(e,t){return 2!==(null==n?void 0:n.businessType)&&m.default.createElement(b.ListAction,{del:function(){return Se(t.id)}})}}],Te={all:[{title:"姓名",dataIndex:"nickname",key:"nickname",width:"20%",ellipsis:!0,render:function(e,t){return m.default.createElement(c.default,null,m.default.createElement(b.Profile,{userInfo:t}),e||"--")}},{title:"用户名",dataIndex:"name",key:"name",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:"手机号",dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:"邮箱",dataIndex:"email",key:"email",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:"用户目录",dataIndex:"dirId",key:"dirId",width:"20%",ellipsis:!0,render:function(e){var t=ye.find((function(t){return t.id===e}));return t?t.name:"--"}}],user:Ie,orga:[{title:"名称",dataIndex:["orga","orgaName"],key:["orga","orgaName"],width:"80%",ellipsis:!0},{title:"操作",dataIndex:"action",key:"action",width:"20%",render:function(e,t){return m.default.createElement(b.ListAction,{del:function(){return Se(t.id)}})}}],group:[{title:"名称",dataIndex:["userGroup","name"],key:["userGroup","name"],width:"60%",ellipsis:!0},{title:"创建方式",dataIndex:["userGroup","group"],key:["userGroup","group"],width:"30%",ellipsis:!0,render:function(e){return"system"===e?"内置":"自定义"}},{title:"操作",dataIndex:"action",key:"action",width:"20%",render:function(e,t){return m.default.createElement(b.ListAction,{del:function(){return Se(t.id)}})}}]};return m.default.createElement("div",{className:"tiklab_promisse"},2===(null==n?void 0:n.businessType)?null:"system"===r?m.default.createElement("div",{className:"tiklab_promisse_up"},m.default.createElement("div",{className:"tiklab_promisse_tab"},m.default.createElement("div",{className:"".concat("all"===W?"tiklab_promisse_tab_active":""),onClick:function(){return _e("all")}},"全部"),m.default.createElement("div",{className:"".concat("user"===W?"tiklab_promisse_tab_active":""),onClick:function(){return _e("user")}},"用户"),m.default.createElement("div",{className:"".concat("orga"===W?"tiklab_promisse_tab_active":""),onClick:function(){return _e("orga")}},"部门"),m.default.createElement("div",{className:"".concat("group"===W?"tiklab_promisse_tab_active":""),onClick:function(){return _e("group")}},"用户组")),m.default.createElement(l.default,{overlay:m.default.createElement("div",{className:"promisse_user_add"},m.default.createElement("div",{onClick:function(){return le("user")}},"添加用户"),m.default.createElement("div",{onClick:function(){return le("orga")}},"添加部门"),m.default.createElement("div",{onClick:function(){return le("group")}},"添加用户组")),placement:"bottomRight",trigger:["click"],getPopupContainer:function(e){return e.parentElement}},m.default.createElement("div",null,m.default.createElement(b.Btn,{type:"primary",icon:m.default.createElement(o.default,null)},"添加成员")))):m.default.createElement("div",{className:"tiklab_promisse_up"},m.default.createElement("div",{className:"tiklab_promisse_tab"},m.default.createElement("div",null,"用户",m.default.createElement("span",{className:"tiklab_promisse_tab_num"},(null==Z?void 0:Z.length)||0))),m.default.createElement("div",null,m.default.createElement(b.Btn,{type:"primary",onClick:function(){return le("user")}},"添加成员"))),m.default.createElement("div",{className:"tiklab_promisse_person"},m.default.createElement(u.default,{loading:z,columns:"domain"===r||2===(null==n?void 0:n.businessType)?Ie:Te[W],dataSource:(null==re?void 0:re.dataList)||[],rowKey:function(e){return e.id},pagination:!1,locale:{emptyText:m.default.createElement(b.ListEmpty,null)}}),m.default.createElement(b.Page,{currentPage:null==re?void 0:re.currentPage,changPage:ke,page:re})),m.default.createElement(h.default,{setDirs:he,domainId:t,visible:"user"===ue,roleType:r,allSelectIds:me,selectedRowKeys:fe,setSelectedRowKeys:de,handleOk:xe,handleCancel:De}),m.default.createElement(O.default,{visible:"orga"===ue,allSelectIds:me,selectedRowKeys:fe,setSelectedRowKeys:de,handleOk:xe,handleCancel:De}),m.default.createElement(P.default,{visible:"group"===ue,allSelectIds:me,selectedRowKeys:fe,setSelectedRowKeys:de,handleOk:xe,handleCancel:De}))})))},658:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(748));t.default=a.default},659:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(546);var i=n(r(537));r(322);var u=n(r(217));r(324);var l=n(r(120)),o=n(r(198)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),f=r(321),d=r(10),s=r(599);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}t.default=function(e){var t=e.visible,r=e.cancelAdd,n=e.editData,a=void 0===n?{}:n,p=e.parentId,m=void 0===p?"":p,v=e.urlType,b=void 0===v?"system":v,g=e.data,y=void 0===g?[]:g,h=l.default.useForm(),O=(0,o.default)(h,1)[0],P=(0,f.useTranslation)().t,E=(0,c.useState)([]),w=(0,o.default)(E,2),j=(w[0],w[1]);(0,c.useEffect)((function(){t&&_()}),[t]),(0,c.useEffect)((function(){"{}"!==JSON.stringify(a)&&(O.setFieldsValue({code:a.code}),O.setFieldsValue({name:a.name}),O.setFieldsValue({parent:a.parentFunction?a.parentFunction.id:a.parentFunction})),m&&O.setFieldsValue({parent:m})}),[a,m]);var R,_=function(){var e=new FormData;e.append("type","system"===b?"1":"2"),d.Axios.post("/function/findFunctionListByParentId",e).then((function(e){e.code||j(e.data)}))},S=function(){O.resetFields(),r()};return c.default.createElement(s.BaseModal,{title:"{}"!==JSON.stringify(a)?P("privilege-edit-feature"):P("privilege-add-feature"),visible:t,onOk:function(){O.submit()},onCancel:S,forceRender:!0},c.default.createElement(l.default,{form:O,onFinish:function(e){if("{}"===JSON.stringify(a)){var t={name:e.name,code:e.code,parentFunction:{id:e.parent},type:"system"===b?"1":"2"};d.Axios.post("/function/createFunction",t).then((function(e){e.code||S()}))}else{var r={id:a.id,name:e.name,code:e.code,parentFunction:{id:e.parent},type:"system"===b?"1":"2"};d.Axios.post("/function/updateFunction",r).then((function(e){e.code||S()}))}},preserve:!1,layout:"vertical"},c.default.createElement(l.default.Item,{label:P("privilege-feature-name"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.default.createElement(u.default,{placeholder:P("privilege-feature-name")})),c.default.createElement(l.default.Item,{label:P("privilege-feature-code"),name:"code",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.default.createElement(u.default,{placeholder:P("privilege-feature-code")})),c.default.createElement(l.default.Item,{label:P("privilege-point-node"),name:"parent"},c.default.createElement(i.default,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(R=[],function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var i={title:t.name,value:t.id,disabled:n};if(t.id===a.id&&(i.disabled=!0),r.push(i),t.children&&t.children.length>0)return e(t.children,i.children=[],i.disabled)}))}(y,R),R),placeholder:P("privilege-point-node-placeholder"),disabled:m||a.children&&a.children.length>0}))))}},660:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(593)),u=n(r(198)),l=n(r(42)),o=n(r(323)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),f=r(623),d=["record","data","index","moveRow","className","style"];function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v="DraggableFeatureBodyRow";t.default=function(e){var t=e.record,r=(e.data,e.index),n=e.moveRow,a=e.className,l=e.style,s=(0,o.default)(e,d);if(!t)return null;var p=m(m({},t),{},{index:r}),b=(0,c.useRef)(null),g=(0,f.useDrop)({accept:v,collect:function(e){var t=e.getItem()||{},n=t.index;t.sort;return n===r?{}:{isOver:e.isOver(),dropClassName:n<r?" drop-over-downward":" drop-over-upward"}},drop:function(e){var r={dragId:e.id,drag:e,dropId:t.id,drop:m({},t)};n(r)}}),y=(0,u.default)(g,2),h=y[0],O=h.isOver,P=h.dropClassName,E=y[1],w=(0,f.useDrag)({type:v,item:p,collect:function(e){return{isDragging:e.isDragging()}}});return E((0,(0,u.default)(w,2)[1])(b)),c.default.createElement("tr",(0,i.default)({ref:b,className:"".concat(a).concat(O?P:""),style:m({cursor:"move"},l)},s))}},661:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.sortNum=t.sort=t.handelPeerFunction=void 0;var a=n(r(42));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.handelPeerFunction=function(e,t,r,n,a){var i=e.map((function(e){return e.id===t?u(u({},e),{},{sort:a}):e.id===r?u(u({},e),{},{sort:n}):e}));return l(i)};var l=t.sort=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e.sort-t.sort}))};t.sortNum=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e-t}))}},662:function(e,t,r){"use strict";r.r(t)},663:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(749));t.default=a.default},664:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(322);var i=n(r(217)),u=n(r(42));r(324);var l=n(r(120)),o=n(r(198)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),f=r(321),d=r(10),s=r(599);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t=(0,f.useTranslation)().t,r=e.visible,n=e.setVisible,a=e.findRole,u=e.isBase,p=e.urlType,m=void 0===p?"system":p;if(!["system","project"].includes(m))throw Error("use RoleAdd Component must have urlType props, value:'system'、 'project'");var b=l.default.useForm(),g=(0,o.default)(b,1)[0],y=function(){g.resetFields(),n(!1)};return c.default.createElement(s.BaseModal,{title:t("privilege-role.addRole"),visible:r,onCancel:y,onOk:function(){g.submit()},forceRender:!0},c.default.createElement(l.default,{form:g,preserve:!1,onFinish:function(e){var t=v(v({},e),{},{group:u?"system":"custom",type:"system"===m?"1":"2"});d.Axios.post("/role/createRole",t).then((function(e){0===e.code&&(y(),a())}))},layout:"vertical"},c.default.createElement(l.default.Item,{label:t("privilege-role.roleName"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.default.createElement(i.default,{placeholder:t("privilege-role.roleName")})),c.default.createElement(l.default.Item,{label:t("privilege-desc"),name:"desc"},c.default.createElement(i.default,{placeholder:t("privilege-desc")}))))}},665:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(593));r(322);var u=n(r(217)),l=n(r(42)),o=n(r(198));r(544);var c=n(r(545)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),d=r(599),s=n(r(656)),p=n(r(657)),m=r(10);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(644);var y=c.default.TabPane;t.default=function(e){var t=e.roleType,r=e.isBase,n=e.roleDetailParams,a=e.setDetail,v=e.findRole,b=(0,f.useState)(null),h=(0,o.default)(b,2),O=h[0],P=h[1],E=function(e,t){if(P(null),n[t]!==e.target.value)if(e.target.value||"name"!==t){var r=(0,l.default)({id:n.id},t,e.target.value);"name"===t&&(r.desc=null==n?void 0:n.desc),"desc"===t&&(r.name=null==n?void 0:n.name),m.Axios.post("/role/updateRole",r).then((function(r){0===r.code&&(a(g(g({},n),{},(0,l.default)({},t,e.target.value))),v())}))}else a(n)};return f.default.createElement("div",{className:"tiklab_system_role_detail"},f.default.createElement(d.BreadCrumb,{firstItem:"权限",secondItem:null==n?void 0:n.name,onClick:function(){return a(null)}}),f.default.createElement("div",{className:"detail-title"},f.default.createElement("div",{className:"label_item"},f.default.createElement("div",null,"名称"),f.default.createElement("div",null,f.default.createElement(u.default,{bordered:"name"===O,defaultValue:n.name,disabled:2===n.businessType,className:"".concat("name"===O?"":"label_item_name"),onFocus:function(){return P("name")},onBlur:function(e){return E(e,"name")},onPressEnter:function(e){return e.target.blur()}}))),f.default.createElement("div",{className:"label_item"},f.default.createElement("div",null,"创建方式"),f.default.createElement("div",{className:"label_item_type"},"system"===n.group?"内置":"自定义"))),f.default.createElement("div",{className:"label_item label_desc"},f.default.createElement("div",null,"描述"),f.default.createElement("div",null,f.default.createElement(u.default.TextArea,{bordered:"desc"===O,defaultValue:n.desc,disabled:2===n.businessType,className:"".concat("desc"===O?"":"label_item_name"),onFocus:function(){return P("desc")},onBlur:function(e){return E(e,"desc")},autoSize:{minRows:1,maxRows:4}}))),f.default.createElement(c.default,{defaultActiveKey:"people"},f.default.createElement(y,{tab:"成员",key:"people"},f.default.createElement(p.default,(0,i.default)({},e,{roleType:t,roleDetail:n,findRole:v}))),f.default.createElement(y,{tab:"权限",key:"promise"},f.default.createElement(s.default,{type:t,isBase:r,roleDetail:n}))))}},666:function(e,t,r){"use strict";r.r(t)},667:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(750));t.default=a.default},668:function(e,t,r){"use strict";r.r(t)},669:function(e,t,r){"use strict";r.r(t)},670:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(753));t.default=a.default},671:function(e,t,r){"use strict";r.r(t)},689:function(e,t,r){"use strict";r(669)},717:function(e,t,r){},718:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(529);var a=n(r(528)),i=n(r(0));t.default=function(e){var t=e.homePath,r=i.default.createElement("div",{style:{paddingTop:20}},"没有访问权限，",i.default.createElement("span",{style:{color:"var(--tiklab-blue)",cursor:"pointer"},onClick:function(){return e.history.push(t||"/")}},"点击这里 "),"返回");return i.default.createElement(a.default,{status:"info",title:"没有访问权限",subTitle:r})}},723:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(724));t.default=a.default},724:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(35));r(515);var u=n(r(517)),l=n(r(593));r(516);var o=n(r(518));r(520);var c=n(r(519)),f=n(r(92)),d=n(r(42));r(119);var s=n(r(53));r(136);var p=n(r(51)),m=n(r(530));r(326);var v=n(r(225)),b=n(r(198)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),y=r(58),h=r(321),O=n(r(725)),P=n(r(744)),E=r(599);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(745);t.default=(0,y.inject)("privilegeDomainRoleStore")((0,y.observer)((function(e){var t=(0,h.useTranslation)().t,r=e.privilegeDomainRoleStore,n=e.domainId,a=r.privilegeDomainRole,d=r.deleteDomainRoleAction,y=r.setDomainRoleAction,w=r.findDmRolePageByNumber,j=r.domainRolePage,_=(0,g.useState)(!1),S=(0,b.default)(_,2),k=S[0],x=S[1],D=(0,g.useState)({pageSize:12,currentPage:1}),I=(0,b.default)(D,1)[0],T=(0,g.useState)({pageParam:I}),A=(0,b.default)(T,2),M=A[0],L=A[1],F=(0,g.useState)(null),C=(0,b.default)(F,2),N=C[0],U=C[1],z=[{title:"角色名称",dataIndex:["role","name"],width:"25%",ellipsis:!0,render:function(e,t){return g.default.createElement("div",{className:"tiklab_domain_role_name",onClick:function(){return G(t)}},e)}},{title:"角色类型",dataIndex:"name",width:"25%",ellipsis:!0,render:function(e,t){var r=t.role,n=r.defaultRole,a=r.businessType,i=r.group;return g.default.createElement(g.default.Fragment,null,1===n&&g.default.createElement(v.default,{color:"#8e9bed"},"默认"),1===a&&g.default.createElement(v.default,null,"管理员"),2===a&&g.default.createElement(v.default,null,"超级管理员"),"custom"===i&&g.default.createElement(v.default,null,"自定义"),"system"===i&&0===a&&g.default.createElement(v.default,null,"内置"))}},{title:"成员数",dataIndex:"dmRoleUserNumber",width:"20%",ellipsis:!0,render:function(e){return"".concat(e,"人")}},{title:"创建方式",dataIndex:["role","group"],width:"20%",ellipsis:!0,render:function(e){return"system"===e?"内置":t("privilege-role.custom")}},{title:"操作",dataIndex:"action",render:function(e,t){var r=t.role,n=t.businessType,a=t.id;return g.default.createElement(s.default,null,0===(null==r?void 0:r.defaultRole)&&g.default.createElement(p.default,{title:"设置默认"},g.default.createElement(m.default,{onClick:function(){return V(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===n&&"system"!==r.group&&g.default.createElement(E.ListAction,{del:function(){return W(a)}}))}}];(0,g.useEffect)((function(){B()}),[M]);var B=function(){w(R(R({},M),{},{domainId:n}))},V=function(){var e=(0,f.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:e.sent.code||B();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){U(e)},W=function(){var e=(0,f.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:0===e.sent.code&&B();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return g.default.createElement(u.default,{className:"tiklab_domain_role"},g.default.createElement(o.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"}},N?g.default.createElement(O.default,{roleDetailParams:N,domainId:n,setDetail:U,getProjectDmRole:B}):g.default.createElement("div",{className:"tiklab_domain_role-content"},g.default.createElement(E.BreadCrumb,{firstItem:"权限"},g.default.createElement(E.Btn,{onClick:function(){return x(!0)},type:"primary",title:t("privilege-role.addRole")})),g.default.createElement(c.default,{columns:z,dataSource:a,rowKey:function(e){return e.id},pagination:!1,locale:{emptyText:g.default.createElement(E.ListEmpty,null)}}),g.default.createElement(E.Page,{currentPage:M.pageParam.currentPage,changPage:function(e){L(R(R({},M),{},{pageParam:{pageSize:12,currentPage:e}}))},page:j}))),g.default.createElement(P.default,(0,l.default)({},e,{visible:k,domainId:n,handleCancel:function(){return x(!1)},getProjectDmRole:B})))})))},725:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(593));r(322);var u=n(r(217)),l=n(r(42)),o=n(r(198));r(544);var c=n(r(545)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),d=r(321),s=r(599),p=n(r(656)),m=n(r(657)),v=r(10);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=c.default.TabPane;t.default=function(e){var t=e.roleDetailParams,r=e.roleDetailParams.role,n=e.domainId,a=e.setDetail,b=e.getProjectDmRole,g=(0,d.useTranslation)().t,O=(0,f.useState)(null),P=(0,o.default)(O,2),E=P[0],w=P[1],j=function(e,i){if(w(null),r[i]!==e.target.value)if(e.target.value||"name"!==i){var u={domainId:n,id:t.id,role:y(y({},r),{},(0,l.default)({},i,e.target.value))};v.Axios.post("/dmRole/updateDmRole",u).then((function(n){0===n.code&&(a(y(y({},t),{},{role:y(y({},r),{},(0,l.default)({},i,e.target.value))})),b())}))}else a(t)};return f.default.createElement("div",{className:"tiklab_domain_role_detail"},f.default.createElement(s.BreadCrumb,{firstItem:"权限",secondItem:null==r?void 0:r.name,onClick:function(){return a(null)}}),f.default.createElement("div",{className:"detail-title"},f.default.createElement("div",{className:"label_item"},f.default.createElement("div",null,"名称"),f.default.createElement("div",null,f.default.createElement(u.default,{bordered:"name"===E,defaultValue:null==r?void 0:r.name,disabled:2===(null==r?void 0:r.businessType),className:"".concat("name"===E?"":"label_item_name"),onFocus:function(){return w("name")},onBlur:function(e){return j(e,"name")},onPressEnter:function(e){return e.target.blur()}}))),f.default.createElement("div",{className:"label_item"},f.default.createElement("div",null,"类型"),f.default.createElement("div",{className:"label_item_type"},"system"===(null==r?void 0:r.group)?"内置":"自定义"))),f.default.createElement("div",{className:"label_item label_desc"},f.default.createElement("div",null,"描述"),f.default.createElement("div",null,f.default.createElement(u.default.TextArea,{bordered:"desc"===E,defaultValue:null==r?void 0:r.desc,disabled:2===(null==r?void 0:r.businessType),className:"".concat("desc"===E?"":"label_item_name"),onFocus:function(){return w("desc")},onBlur:function(e){return j(e,"desc")},autoSize:{minRows:1,maxRows:4}}))),f.default.createElement(c.default,{defaultActiveKey:"people"},f.default.createElement(h,{tab:g("privilege-role.people"),key:"people"},f.default.createElement(m.default,(0,i.default)({},e,{roleType:"domain",domainId:n,roleDetail:t,findRole:b}))),f.default.createElement(h,{tab:g("privilege-role.promise"),key:"promise"},f.default.createElement(p.default,{type:"domain",isBase:!1,roleDetail:t}))))}},726:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(325);var a=n(r(221)),i=n(r(593)),u=n(r(323)),l=n(r(0)),o=n(r(654));r(728);var c=["children"];t.default=function(e){var t=e.children,r=(0,u.default)(e,c),n=l.default.createElement(l.default.Fragment,null,l.default.createElement(o.default,{onClick:r.onCancel,title:"取消",isMar:!0}),l.default.createElement(o.default,{onClick:r.onOk,title:"确定",type:"primary"}));return l.default.createElement(a.default,(0,i.default)({style:{maxWidth:"calc(100vw - 120px)",maxHeight:"calc(100vh - 120px)",marginRight:"auto",marginLeft:"auto",position:"absolute",top:60,right:0,left:0,height:"100%",display:"flex",flexDirection:"column"},wrapClassName:"tiklab_privilege_modal",closable:!1,footer:n},r),t)}},727:function(e,t,r){"use strict";r.r(t)},728:function(e,t,r){"use strict";r.r(t)},729:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(119);var a=n(r(53)),i=n(r(525)),u=n(r(0));r(730);t.default=function(e){var t=e.firstItem,r=e.secondItem,n=e.children,l=e.onClick;return u.default.createElement("div",{className:"privilege-breadcrumb"},u.default.createElement(a.default,null,u.default.createElement("span",{className:l?"privilege-breadcrumb-first":"",onClick:l},l&&u.default.createElement(i.default,{style:{marginRight:8}}),u.default.createElement("span",{className:r?"privilege-breadcrumb-span":""},t)),r&&u.default.createElement("span",null," /   ",r)),u.default.createElement("div",null,n))}},730:function(e,t,r){"use strict";r.r(t)},731:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(540));r(223);var i=n(r(66)),u=n(r(0)),l=r(10);r(732);t.default=function(e){var t=e.userInfo,r=void 0===t?void 0:t,n=r||(0,l.getUser)();return u.default.createElement("div",{className:"tiklab-profile"},n.avatar&&"null"!==n.avatar?u.default.createElement(i.default,{src:n.avatar}):n.nickname&&"null"!==n.nickname?u.default.createElement(i.default,null,n.nickname.substring(0,1)):n.name&&"null"!==n.name?u.default.createElement(i.default,null,n.name.substring(0,1)):u.default.createElement(i.default,{icon:u.default.createElement(a.default,null)}))}},732:function(e,t,r){"use strict";r.r(t)},733:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(543)),i=n(r(534)),u=n(r(525)),l=n(r(0));r(734);t.default=function(e){var t=e.currentPage,r=e.changPage,n=e.page,o=n.totalPage,c=void 0===o?1:o,f=n.totalRecord,d=void 0===f?1:f;return c>1&&l.default.createElement("div",{className:"privilege-page"},l.default.createElement("div",{className:"privilege-page-record"},"  共",d,"条 "),l.default.createElement("div",{className:"".concat(1===t?"privilege-page-ban":"privilege-page-allow"),onClick:function(){return 1===t?null:r(t-1)}},l.default.createElement(u.default,null)),l.default.createElement("div",{className:"privilege-page-current"},t),l.default.createElement("div",{className:"privilege-page-line"}," / "),l.default.createElement("div",null,c),l.default.createElement("div",{className:"".concat(t===c?"privilege-page-ban":"privilege-page-allow"),onClick:function(){return t===c?null:r(t+1)}},l.default.createElement(i.default,null)),l.default.createElement("div",{className:"privilege-page-fresh",onClick:function(){return r(1)}},l.default.createElement(a.default,null)))}},734:function(e,t,r){"use strict";r.r(t)},735:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ListAction",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ListEmpty",{enumerable:!0,get:function(){return i.default}});var a=n(r(736)),i=n(r(738))},736:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(222);var a=n(r(93)),i=n(r(524));r(325);var u=n(r(221));r(136);var l=n(r(51)),o=n(r(526)),c=n(r(0));r(737);t.default=function(e){var t=e.edit,r=e.del;return c.default.createElement("span",{className:"privilege-listAction"},t&&c.default.createElement(l.default,{title:"修改"},c.default.createElement("span",{onClick:t,className:"edit",style:{cursor:"pointer",marginRight:15}},c.default.createElement(o.default,{style:{fontSize:16}}))),r&&c.default.createElement(a.default,{overlay:c.default.createElement("div",{className:"privilege-dropdown-more"},c.default.createElement("div",{className:"dropdown-more-item",onClick:function(){u.default.confirm({title:"确定删除吗？",content:c.default.createElement("span",{style:{color:"#f81111"}},"删除后无法恢复！"),okText:"确认",cancelText:"取消",onOk:function(){r()},onCancel:function(){}})}},"删除")),trigger:["click"],placement:"bottomRight"},c.default.createElement(l.default,{title:"更多"},c.default.createElement("span",{className:"del",style:{cursor:"pointer"}},c.default.createElement(i.default,{style:{fontSize:17}})))))}},737:function(e,t,r){"use strict";r.r(t)},738:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(105);var a=n(r(48)),i=n(r(0));t.default=function(e){var t=e.title;return i.default.createElement(a.default,{description:t||"没有查询到数据"})}},739:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(322);var a=n(r(217)),i=n(r(536)),u=n(r(609)),l=n(r(593)),o=n(r(0));r(655);t.default=function(e){var t=(0,l.default)({},((0,u.default)(e),e));return o.default.createElement(a.default,(0,l.default)({},t,{allowClear:!0,bordered:!1,autoComplete:"off",prefix:o.default.createElement(i.default,{style:{fontSize:16}}),className:"privilege-search-input",onChange:function(e){"click"===e.type&&t.onPressEnter(e)}}))}},740:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(199);var a=n(r(81)),i=n(r(593)),u=n(r(535)),l=n(r(323)),o=n(r(0));r(655);var c=["children"];t.default=function(e){var t=e.children,r=(0,l.default)(e,c);return o.default.createElement("div",{className:"privilege-search-select"},o.default.createElement(a.default,(0,i.default)({},r,{bordered:!1,suffixIcon:o.default.createElement(u.default,null),className:"".concat(r.className)}),t))}},741:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(35));r(520);var u=n(r(519));r(119);var l=n(r(53)),o=n(r(200)),c=n(r(42)),f=n(r(92)),d=n(r(198)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),p=r(599),m=r(58);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=(0,m.inject)("systemRoleStore")((0,m.observer)((function(e){var t=e.visible,r=e.handleOk,n=e.handleCancel,a=e.allSelectIds,c=e.roleType,m=e.domainId,v=e.selectedRowKeys,b=e.setSelectedRowKeys,y=e.systemRoleStore,h=e.setDirs,O=y.findDmUserPage,P=y.findUserPage,E=y.findAllList,w=(0,s.useState)([]),j=(0,d.default)(w,2),R=j[0],_=j[1],S={pageSize:6,currentPage:1},k=(0,s.useState)({}),x=(0,d.default)(k,2),D=x[0],I=x[1],T=(0,s.useState)({pageParam:S}),A=(0,d.default)(T,2),M=A[0],L=A[1],F=(0,s.useState)([]),C=(0,d.default)(F,2),N=C[0],U=C[1];(0,s.useEffect)((function(){E().then((function(e){0===e.code&&(U(e.data),h(e.data))}))}),[]),(0,s.useEffect)((function(){"project"!==c&&z().then((function(e){var t;if(0===e.code&&(I({currentPage:e.data.currentPage,totalPage:e.data.totalPage,totalRecord:e.data.totalRecord}),null!==(t=e.data)&&void 0!==t&&t.dataList)){var r=e.data.dataList;_("system"===c?r:r.map((function(e){return e.user})))}}))}),[M]);var z=function(){var e=(0,f.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("domain"!==c){e.next=4;break}return e.next=3,O(g(g({},M),{},{domainId:m}));case 3:return e.abrupt("return",e.sent);case 4:if("system"!==c){e.next=8;break}return e.next=7,P(M);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e){return a&&a.some((function(t){return t===e.id}))},V={selectedRowKeys:v,onSelectAll:function(e,t,r){var n=r.map((function(e){return e&&e.id})).filter(Boolean);if(e){var a=Array.from(new Set([].concat((0,o.default)(n),(0,o.default)(v))));b(a)}else{var i=v.filter((function(e){return!n.includes(e)}));b(i)}},onSelect:function(e){return G(e)},getCheckboxProps:function(e){return{disabled:B(e)}}},G=function(e){B(e)||(v.indexOf(e.id)>=0?v.splice(v.indexOf(e.id),1):v.push(e.id),b((0,o.default)(v)))},W=[{title:"姓名",dataIndex:"nickname",key:"nickname",width:"30%",ellipsis:!0,render:function(e,t){return s.default.createElement(l.default,null,s.default.createElement(p.Profile,{userInfo:t}),e)}},{title:"手机号",dataIndex:"phone",key:"phone",width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:"邮箱",dataIndex:"email",key:"email",width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:"用户目录",dataIndex:"dirId",key:"dirId",width:"15%",ellipsis:!0,render:function(e){var t=N.find((function(t){return t.id===e}));return t?t.name:"--"}}];return s.default.createElement(p.BaseModal,{title:"添加用户",visible:t,onCancel:n,onOk:r,width:800},s.default.createElement("div",null,s.default.createElement(p.SearchInput,{placeholder:"搜索姓名、手机号",style:{width:200},onPressEnter:function(e){var t=g(g({},M),{},{accent:e.target.value,pageParam:S});L(t)}}),s.default.createElement("div",{style:{paddingTop:15}},s.default.createElement(u.default,{columns:W,dataSource:R,rowSelection:V,onRow:function(e){return{onClick:function(){return G(e)}}},rowKey:function(e){return e.id},pagination:!1,locale:{emptyText:s.default.createElement(p.ListEmpty,null)}}),s.default.createElement(p.Page,{currentPage:M.pageParam.currentPage,changPage:function(e){var t=g(g({},M),{},{pageParam:{pageSize:6,currentPage:e}});L(t)},page:D}))))})))},742:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(531);var i=n(r(527)),u=n(r(198)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),o=r(599),c=r(58);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}t.default=(0,c.inject)("systemRoleStore")((0,c.observer)((function(e){var t=e.visible,r=e.allSelectIds,n=e.handleOk,a=e.handleCancel,c=e.selectedRowKeys,f=e.setSelectedRowKeys,d=e.systemRoleStore.findOrgaTree,s=(0,l.useState)({}),p=(0,u.default)(s,2),m=p[0],v=p[1],b=(0,l.useState)([]),g=(0,u.default)(b,2),y=g[0],h=g[1];(0,l.useEffect)((function(){E()}),[m]);var O,P,E=function(){d(m).then((function(e){0===e.code&&h((null==e?void 0:e.data)||[])}))};return l.default.createElement(o.BaseModal,{width:500,visible:t,title:"添加部门",onOk:n,onCancel:a},l.default.createElement(o.SearchInput,{placeholder:"搜索名称",style:{width:190},onPressEnter:function(e){v({orgaName:e.target.value})}}),l.default.createElement("div",{className:"tiklab_privilege_orga_add_item"},l.default.createElement(i.default,{checkable:!0,blockNode:!0,defaultExpandParent:!0,checkedKeys:c,defaultExpandedKeys:["111111"],treeData:(O=y,P=[],function e(t,n){t.forEach((function(t,a){var i,u={key:t.orgaId,disabled:(i=t,r&&r.some((function(e){return e===i.orgaId}))),title:t.orgaName,children:[]};n.push(u),t.children&&t.children.length>0&&e(t.children,n[a].children)}))}(O,P),P),onCheck:function(e,t){t.checkedNodes;f(e)}})))})))},743:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(520);var i=n(r(519)),u=n(r(200)),l=n(r(198)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),c=r(599),f=r(58);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}t.default=(0,f.inject)("systemRoleStore")((0,f.observer)((function(e){var t=e.visible,r=e.handleOk,n=e.handleCancel,a=e.allSelectIds,f=e.selectedRowKeys,d=e.setSelectedRowKeys,s=e.systemRoleStore.findUserGroupList,p=(0,o.useState)({}),m=(0,l.default)(p,2),v=m[0],b=m[1],g=(0,o.useState)([]),y=(0,l.default)(g,2),h=y[0],O=y[1];(0,o.useEffect)((function(){P()}),[v]);var P=function(){s(v).then((function(e){0===e.code&&O(e.data)}))},E=function(e){return a&&a.some((function(t){return t===e.id}))},w={selectedRowKeys:f,onSelectAll:function(e,t,r){var n=r.map((function(e){return e&&e.id})).filter(Boolean);if(e){var a=Array.from(new Set([].concat((0,u.default)(n),(0,u.default)(f))));d(a)}else{var i=f.filter((function(e){return!n.includes(e)}));d(i)}},onSelect:function(e){return j(e)},getCheckboxProps:function(e){return{disabled:E(e)}}},j=function(e){E(e)||(f.indexOf(e.id)>=0?f.splice(f.indexOf(e.id),1):f.push(e.id),d((0,u.default)(f)))};return o.default.createElement(c.BaseModal,{title:"添加用户组",visible:t,onCancel:n,onOk:r,width:500},o.default.createElement("div",null,o.default.createElement(c.SearchInput,{placeholder:"搜索名称",style:{width:190},onPressEnter:function(e){b({name:e.target.value})}}),o.default.createElement("div",{style:{paddingTop:15}},o.default.createElement(i.default,{columns:[{title:"名称",dataIndex:"name",key:"name",width:"70%",ellipsis:!0,render:function(e){return e||"--"}},{title:"类型",dataIndex:"group",key:"group",width:"30%",ellipsis:!0,render:function(e){return"system"===e?"内置":"自定义"}}],dataSource:h,rowSelection:w,onRow:function(e){return{onClick:function(){return j(e)}}},rowKey:function(e){return e.id},pagination:!1,locale:{emptyText:o.default.createElement(c.ListEmpty,null)}}))))})))},744:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(322);var a=n(r(217)),i=n(r(42));r(324);var u=n(r(120)),l=n(r(198)),o=n(r(0)),c=r(321),f=r(599);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t=e.visible,r=e.handleCancel,n=e.getProjectDmRole,i=e.domainId,d=e.privilegeDomainRoleStore.createDomainRoleAction,p=(0,c.useTranslation)().t,m=u.default.useForm(),v=(0,l.default)(m,1)[0];return o.default.createElement(f.BaseModal,{title:"添加角色",visible:t,onCancel:r,onOk:function(){v.submit()}},o.default.createElement(u.default,{form:v,preserve:!1,onFinish:function(e){var t={domainId:i,businessType:0,role:s({},e)};d(t).then((function(e){0===e.code&&(r(),n())}))},layout:"vertical"},o.default.createElement(u.default.Item,{label:p("privilege-role.roleName"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},o.default.createElement(a.default,{placeholder:p("privilege-role.roleName")})),o.default.createElement(u.default.Item,{label:p("privilege-desc"),name:"desc"},o.default.createElement(a.default,{placeholder:p("privilege-desc")}))))}},745:function(e,t,r){"use strict";r.r(t)},746:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(747));t.default=a.default},747:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(323)),i=(n(r(0)),r(58)),u=r(10),l=["code","domainId","systemRoleStore"];t.default=(0,i.inject)("systemRoleStore")((0,i.observer)((function(e){var t=e.code,r=void 0===t?"":t,n=e.domainId,i=e.systemRoleStore,o=(0,a.default)(e,l),c=i.domainPermissions,f=(0,u.getUser)().userId;try{return r?c["".concat(f,"_").concat(n)]&&c["".concat(f,"_").concat(n)].includes(r)?o.children:null:o.children}catch(e){return c["".concat(f,"_").concat(n)]&&c["".concat(f,"_").concat(n)].includes(r)?o.children:null}})))},748:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(515);var i=n(r(517));r(516);var u=n(r(518));r(520);var l=n(r(519)),o=n(r(323)),c=n(r(200)),f=n(r(42));r(119);var d=n(r(53));r(328);var s=n(r(231)),p=n(r(348)),m=n(r(526));r(136);var v=n(r(51)),b=n(r(343)),g=n(r(198)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=T(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),h=r(58),O=r(17),P=r(321),E=r(623),w=r(631),j=n(r(659)),R=r(138),_=n(r(660)),S=r(204),k=r(661),x=r(599);r(662);var D=["children","sort"],I=["children","sort"];function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(T=function(e){return e?r:t})(e)}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,f.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=(0,h.inject)(R.PRIVILEGE_PROJECT_FEATURE_STORE,R.PRIVILEGE_SYSTEM_STORE)((0,h.observer)((function(e){var t=(0,P.useTranslation)().t,r=e.privilegeProjectFeatureStore,n=e.privilegeSystemStore,a=n.deleteFunctionAction,h=n.getFunctionListListAction,R=n.updateFunctionSortAction,T=r.privilegeProjectTreeData,A=r.getDmPrivilegeTree,L=(0,y.useState)(""),F=(0,g.default)(L,2),C=F[0],N=F[1],U=(0,y.useState)(!1),z=(0,g.default)(U,2),B=z[0],V=z[1],G=(0,y.useState)({}),W=(0,g.default)(G,2),K=W[0],J=W[1],Y=(0,y.useState)({}),q=(0,g.default)(Y,2),H=q[0],Q=q[1],X={type:"2",pageParam:{pageSize:99999,currentPage:1}},Z=(0,y.useState)(X),$=(0,g.default)(Z,2),ee=$[0],te=$[1],re=[{title:t("privilege-feature-name"),dataIndex:"name",key:"name"},{title:t("privilege-feature-code"),dataIndex:"code",key:"code"},{title:"操作",dataIndex:"action",width:"10%",render:function(e,t){return y.default.createElement(d.default,{size:"middle"},!t.parentFunction&&y.default.createElement(v.default,{title:"添加"},y.default.createElement(b.default,{onClick:function(){return ue(t.id)}})),y.default.createElement(v.default,{title:"编辑"},y.default.createElement(m.default,{onClick:function(){return oe(t)}})),!t.children&&y.default.createElement(v.default,{title:"删除"},y.default.createElement(s.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(){return ce(t)},okText:"确定",cancelText:"取消"},y.default.createElement(p.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}))))}}];(0,y.useEffect)((function(){ne()}),[ee]);var ne=function(){h(ee).then((function(e){if(!e.code){var t=ie(e.data);A(t)}}))},ae=function(){h(X).then((function(e){if(!e.code){var t=ie(e.data);A(t)}}))},ie=function(e){var t=(0,S.sort)(e.map((function(e){return!e.parentFunction&&e})).filter(Boolean)),r=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&e})).filter(Boolean),n=[];return t.forEach((function(e){var t=e.id,a=(0,S.sort)(r.filter((function(e){return e.parentFunction.id===t})));a.length>0?n.push(M(M({},e),{},{children:a})):n.push(e)})),n},ue=(0,y.useCallback)((function(e){N(e),V(!0)}),[]),le=(0,y.useCallback)((function(){N(""),J({}),V(!1),ae()}),[]),oe=(0,y.useCallback)((function(e){J(e),V(!0)}),[]),ce=(0,y.useCallback)((function(e){a(e.id).then((function(e){e.code||ne()}))}),[]),fe=(0,y.useCallback)((function(e){var t,r=e.dragId,n=e.dropId,a=e.drag,i=e.drop,u=a.sort,l=-1,f=[],d=[],s={},p={};if(i.children){var m=[],v=H[n],b=i.children[0];if(v){var g=se(b.id);s=M(M({},a),{},{parentFunction:g.parentFunction}),u<g.sort?(m=[s].concat((0,c.default)(i.children)),de(m).then((function(e){ae()}))):(l=i.children.findIndex((function(e){return e.id===g.id})),i.children.splice(l,0,a),i.children.forEach((function(e){d.push(e.sort)})),f=(0,k.sortNum)(d),i.children=i.children.map((function(e,t){return M(M({},e),{},{sort:f[t]})})),de(i.children).then((function(e){ae()})))}}if(i.parentFunction){var y=i.parentFunction.id,h=se(y);l=(t=h.children.filter((function(e){return e.id!==r}))).findIndex((function(e){return e.id===i.id})),t.splice(l,0,M(M({},a),{},{parentFunction:h.children[0].parentFunction})),t.forEach((function(e){d.push(e.sort)})),f=(0,k.sortNum)(d),h.children=t.map((function(e,t){return M(M({},e),{},{sort:f[t]})})),de(h.children).then((function(e){ae()}))}else{a.children;var O=a.sort,P=(0,o.default)(a,D),E=(i.children,i.sort),w=(0,o.default)(i,I);if(a.parentFunction&&!i.parentFunction){a.parentFunction.id;p=M(M({},w),{},{parentFunction:i.parentFunction,sort:O}),s=M(M({},P),{},{parentFunction:i.parentFunction,sort:E}),de([p,s]).then((function(e){ae()}))}else{var j=[M(M({},P),{},{sort:E}),M(M({},w),{},{sort:O})];de(j).then((function(e){ae()}))}}}),[T,H]),de=function(e){return R({list:e})},se=(0,y.useCallback)((function(e){var t={};return function r(n){for(var a=0;a<n.length;a++){var i=n[a];if(i.id===e){t=i;break}i.children&&i.children.length>0&&r(i.children)}return t}((0,O.toJS)(T)),t}),[T]);return y.default.createElement(i.default,{className:"privilege-dm"},y.default.createElement(u.default,{sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"}},y.default.createElement(x.BreadCrumb,{firstItem:"项目功能"},y.default.createElement(x.Btn,{type:"primary",onClick:function(){return V(!0)},title:t("privilege-add-feature")})),y.default.createElement("div",{style:{paddingBottom:15}},y.default.createElement(x.SearchInput,{placeholder:"搜索名称",onPressEnter:function(e){return function(e){var t=e.target.value;te(M(M({},ee),{},{name:t}))}(e)},style:{width:190}})),y.default.createElement("div",{id:"project-drag-sorting"},y.default.createElement(E.DndProvider,{backend:w.HTML5Backend},y.default.createElement(l.default,{dataSource:(0,O.toJS)(T),columns:re,rowKey:"id",tableLayout:"fixed",pagination:!1,components:{body:{row:_.default}},onRow:function(e,t){return{record:e,data:(0,O.toJS)(T),index:t,moveRow:fe}},expandable:{onExpand:function(e,t){Q(M(M({},H),{},(0,f.default)({},t.id,e)))}},locale:{emptyText:y.default.createElement(x.ListEmpty,null)}})))),y.default.createElement(j.default,{data:T,editData:K,visible:B,cancelAdd:le,parentId:C,urlType:"project"}))})))},749:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(515);var i=n(r(517));r(516);var u=n(r(518));r(520);var l=n(r(519)),o=n(r(42));r(119);var c=n(r(53));r(136);var f=n(r(51)),d=n(r(530));r(326);var s=n(r(225)),p=n(r(198)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),v=r(58),b=r(321),g=n(r(664)),y=n(r(665)),h=r(599),O=r(138);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(666);t.default=(0,v.inject)(O.PRIVILEGE_PROJECT_ROLE_STORE,O.SYSTEM_ROLE_STORE)((0,v.observer)((function(e){var t=e.privilegeProjectRoleStore,r=e.systemRoleStore,n=e.isBase,a=void 0!==n&&n,o=(0,b.useTranslation)().t,v=t.getProjectRoles,O=t.privilegeProjectRole,P=r.deleteRoleAction,E=r.findRolePageAndRoleUserNumber,j=r.setDefaultRoleAction,R=r.rolePage,_=(0,m.useState)(!1),S=(0,p.default)(_,2),k=S[0],x=S[1],D=(0,m.useState)(null),I=(0,p.default)(D,2),T=I[0],A=I[1],M=(0,m.useState)({pageSize:15,currentPage:1}),L=(0,p.default)(M,1)[0],F=(0,m.useState)({pageParam:L}),C=(0,p.default)(F,2),N=C[0],U=C[1],z=[{title:"角色名称",dataIndex:"name",width:"25%",ellipsis:!0,render:function(e,t){return m.default.createElement("div",{className:"tiklab_project_role-name",onClick:function(){return K(t)}},e)}},{title:"角色类型",dataIndex:"name",width:"25%",ellipsis:!0,render:function(e,t){var r=t.businessType,n=t.defaultRole,a=t.group;return m.default.createElement(m.default.Fragment,null,1===n&&m.default.createElement(s.default,{color:"#8e9bed"},"默认"),1===r&&m.default.createElement(s.default,null,"管理员"),2===r&&m.default.createElement(s.default,null,"超级管理员"),"custom"===a&&m.default.createElement(s.default,null,"自定义"),"system"===a&&0===r&&m.default.createElement(s.default,null,"内置"))}},{title:"成员数",dataIndex:"roleUserNumber",width:"20%",ellipsis:!0,render:function(e){return"".concat(e,"人")}},{title:"创建方式",dataIndex:"group",width:"20%",ellipsis:!0,render:function(e){return"system"===e?"内置":o("privilege-role.custom")}},{title:"操作",dataIndex:"action",render:function(e,t){var r=t.businessType,n=t.defaultRole,i=t.group;return a?m.default.createElement(c.default,{size:"middle"},0===n&&m.default.createElement(f.default,{title:"设置默认"},m.default.createElement(d.default,{onClick:function(){return G(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),m.default.createElement(h.ListAction,{del:function(){return V(t.id)}})):m.default.createElement(c.default,{size:"middle"},0===n&&m.default.createElement(f.default,{title:"设置默认"},m.default.createElement(d.default,{onClick:function(){return G(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===r&&"system"!==i&&m.default.createElement(h.ListAction,{del:function(){return V(t.id)}}))}}];(0,m.useEffect)((function(){B()}),[N]);var B=function(){E(w({type:"2",group:"system"},N)).then((function(e){0===e.code&&v(e.data.dataList)}))},V=function(e){P(e).then((function(e){e.code||B()}))},G=function(e){j(e).then((function(e){e.code||B()}))},W=function(){x(!0)},K=function(e){A(e)};return m.default.createElement(i.default,{className:"tiklab_project_role"},m.default.createElement(u.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"}},T?m.default.createElement(y.default,{roleDetailParams:T,setDetail:A,findRole:B,isBase:a,roleType:"project"}):m.default.createElement("div",{className:"tiklab_project_role-content"},m.default.createElement(h.BreadCrumb,{firstItem:"项目角色"},a?m.default.createElement(h.Btn,{onClick:W,title:o("privilege-role.addSystemRole")}):m.default.createElement(h.Btn,{type:"primary",onClick:W,title:o("privilege-role.addRole")})),m.default.createElement(l.default,{columns:z,dataSource:O,rowKey:function(e){return e.id},pagination:!1,locale:{emptyText:m.default.createElement(h.ListEmpty,null)}}),m.default.createElement(h.Page,{currentPage:N.pageParam.currentPage,changPage:function(e){U(w(w({},N),{},{pageParam:{pageSize:15,currentPage:e}}))},page:R}))),m.default.createElement(g.default,{visible:k,setVisible:x,isBase:a,findRole:B,urlType:"project"}))})))},750:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(515);var i=n(r(517));r(516);var u=n(r(518)),l=n(r(593));r(520);var o=n(r(519)),c=n(r(198)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),d=r(58),s=r(599),p=n(r(751)),m=r(327);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}r(668);t.default=(0,d.inject)("projectVirtualRoleStore")((0,d.observer)((function(e){var t=e.projectVirtualRoleStore,r=t.findVRolePage,n=t.deleteVRole,a=(0,f.useState)({pageParam:{pageSize:15,currentPage:1}}),d=(0,c.default)(a,2),v=d[0],b=d[1],g=(0,f.useState)({}),y=(0,c.default)(g,2),h=y[0],O=y[1],P=(0,f.useState)(!1),E=(0,c.default)(P,2),w=E[0],j=E[1],R=(0,f.useState)(null),_=(0,c.default)(R,2),S=_[0],k=_[1];(0,f.useEffect)((function(){x()}),[v]);var x=function(){r(v).then((function(e){0===e.code&&O(e.data)}))},D=function(e){b({pageParam:{pageSize:15,currentPage:e}})},I=[{title:"名称",dataIndex:"name",width:"40%",ellipsis:!0},{title:"标识",dataIndex:"id",width:"25%",ellipsis:!0},{title:"描述",dataIndex:"des",width:"25%",ellipsis:!0,render:function(e){return e||"--"}},{title:"操作",dataIndex:"action",render:function(e,t){return f.default.createElement(s.ListAction,{edit:function(){return function(e){k(e),j(!0)}(t)},del:function(){return function(e){n(e.id).then((function(e){if(0===e.code){var t=(0,m.deleteSuccessReturnCurrenPage)(h.totalRecord,15,v.pageParam.currentPage);D(t)}}))}(t)}})}}];return f.default.createElement(i.default,{className:"project-virtual-role"},f.default.createElement(u.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"}},f.default.createElement("div",{className:"project-virtual-role-content"},f.default.createElement(s.BreadCrumb,{firstItem:"项目虚拟角色"},f.default.createElement(s.Btn,{type:"primary",onClick:function(){return j(!0)},title:"添加项目虚拟角色"})),f.default.createElement(o.default,{columns:I,dataSource:(null==h?void 0:h.dataList)||[],rowKey:function(e){return e.id},pagination:!1,locale:{emptyText:f.default.createElement(s.ListEmpty,null)}}),f.default.createElement(s.Page,{currentPage:v.pageParam.currentPage,changPage:D,page:h}),f.default.createElement(p.default,(0,l.default)({},e,{visible:w,setVisible:j,formValue:S,setFormValue:k,findVRole:x})))))})))},751:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(322);var i=n(r(217));r(218);var u=n(r(62)),l=n(r(42));r(324);var o=n(r(120)),c=n(r(198)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),d=r(599);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(e){var t=e.projectVirtualRoleStore,r=e.visible,n=e.setVisible,a=e.formValue,l=e.setFormValue,s=e.findVRole,p=t.createVRole,v=t.updateVRole,b=o.default.useForm(),g=(0,c.default)(b,1)[0];(0,f.useEffect)((function(){r&&g.setFieldsValue(a)}),[r]);var y=function(){n(!1),l(null),g.resetFields()};return f.default.createElement(d.BaseModal,{title:a?"修改虚拟角色":"添加虚拟角色",visible:r,onCancel:y,onOk:function(){g.validateFields().then((function(e){a?v(m(m({},e),{},{type:2})):p(m(m({},e),{},{type:2})).then((function(e){0===e.code?(s(),u.default.info("添加成功")):u.default.error(e.msg)})),y()}))}},f.default.createElement(o.default,{form:g,layout:"vertical"},f.default.createElement(o.default.Item,{name:"id",label:"id"},f.default.createElement(i.default,{placeholder:"为空时，自动生成",disabled:a})),f.default.createElement(o.default.Item,{name:"name",label:"名称",rules:[{required:!0,message:"虚拟角色名称"}]},f.default.createElement(i.default,null)),f.default.createElement(o.default.Item,{name:"des",label:"说明"},f.default.createElement(i.default,null))))}},752:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(515);var i=n(r(517));r(516);var u=n(r(518));r(520);var l=n(r(519)),o=n(r(42));r(119);var c=n(r(53));r(136);var f=n(r(51)),d=n(r(530));r(326);var s=n(r(225)),p=n(r(198)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),v=r(58),b=r(321),g=n(r(664)),y=n(r(665)),h=r(138),O=r(599);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(669);t.default=(0,v.inject)(h.SYSTEM_ROLE_STORE)((0,v.observer)((function(e){var t=e.systemRoleStore,r=e.isBase,n=void 0!==r&&r,a=(0,b.useTranslation)().t,o=t.findRolePageAndRoleUserNumber,v=t.rolePage,h=t.deleteRoleAction,P=t.privilegeSystemRole,E=t.setDefaultRoleAction,j=(0,m.useState)(!1),R=(0,p.default)(j,2),_=R[0],S=R[1],k=(0,m.useState)(null),x=(0,p.default)(k,2),D=x[0],I=x[1],T=(0,m.useState)({pageParam:{pageSize:13,currentPage:1}}),A=(0,p.default)(T,2),M=A[0],L=A[1];(0,m.useEffect)((function(){F()}),[M]);var F=function(){o(M)},C=[{title:"角色名称",dataIndex:"name",width:"25%",ellipsis:!0,render:function(e,t){return m.default.createElement("div",{className:"tiklab_system_role_name",onClick:function(){return B(t)}},e)}},{title:"角色类型",dataIndex:"name",width:"25%",ellipsis:!0,render:function(e,t){var r=t.businessType,n=t.defaultRole,a=t.group;return m.default.createElement(m.default.Fragment,null,1===n&&m.default.createElement(s.default,{color:"#8e9bed"},"默认"),1===r&&m.default.createElement(s.default,null,"管理员"),2===r&&m.default.createElement(s.default,null,"超级管理员"),"custom"===a&&m.default.createElement(s.default,null,"自定义"),"system"===a&&0===r&&m.default.createElement(s.default,null,"内置"))}},{title:"成员数",dataIndex:"roleUserNumber",width:"20%",ellipsis:!0,render:function(e){return"".concat(e,"人")}},{title:"创建方式",dataIndex:"group",width:"20%",ellipsis:!0,render:function(e){return"system"===e?"内置":a("privilege-role.custom")}},{title:"操作",dataIndex:"action",render:function(e,t){var r=t.businessType,a=t.defaultRole;return n?m.default.createElement(c.default,{size:"middle"},0===a&&m.default.createElement(f.default,{title:"设置默认"},m.default.createElement(d.default,{onClick:function(){return U(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),m.default.createElement(O.ListAction,{del:function(){return N(t.id)}})):m.default.createElement(c.default,{size:"middle"},0===a&&m.default.createElement(f.default,{title:"设置默认"},m.default.createElement(d.default,{onClick:function(){return U(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===r&&"system"!==t.group&&m.default.createElement(O.ListAction,{del:function(){return N(t.id)}}))}}],N=function(e){h(e).then((function(e){e.code||F()}))},U=function(e){E(e).then((function(e){e.code||F()}))},z=function(){S(!0)},B=function(e){I(e)};return m.default.createElement(i.default,{className:"tiklab_system_role"},m.default.createElement(u.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"}},D?m.default.createElement(y.default,{roleDetailParams:D,setDetail:I,findRole:F,roleType:"system",isBase:n}):m.default.createElement("div",{className:"tiklab_system_role-content"},m.default.createElement(O.BreadCrumb,{firstItem:"权限"},n?m.default.createElement(O.Btn,{onClick:function(){return z()},title:a("privilege-role.addSystemRole")}):m.default.createElement(O.Btn,{type:"primary",onClick:function(){return z()},title:a("privilege-role.addRole")})),m.default.createElement(l.default,{columns:C,dataSource:P,rowKey:function(e){return e.id},pagination:!1,locale:{emptyText:m.default.createElement(O.ListEmpty,null)}}),m.default.createElement(O.Page,{currentPage:M.pageParam.currentPage,changPage:function(e){L(w(w({},M),{},{pageParam:{pageSize:12,currentPage:e}}))},page:v}))),m.default.createElement(g.default,{visible:_,setVisible:S,isBase:n,findRole:F,urlType:"system"}))})))},753:function(e,t,r){"use strict";var n=r(39),a=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(515);var i=n(r(517));r(516);var u=n(r(518));r(520);var l=n(r(519)),o=n(r(323)),c=n(r(35)),f=n(r(200)),d=n(r(42)),s=n(r(92));r(119);var p=n(r(53));r(328);var m=n(r(231)),v=n(r(348)),b=n(r(526));r(136);var g=n(r(51)),y=n(r(343)),h=n(r(198)),O=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=A(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(r(0)),P=r(58),E=r(321),w=r(17),j=r(623),R=r(631),_=r(138),S=n(r(660)),k=n(r(659)),x=r(599),D=r(661);r(671);var I=["children","sort"],T=["children","sort"];function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(A=function(e){return e?r:t})(e)}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=(0,P.inject)(_.PRIVILEGE_SYSTEM_STORE)((0,P.observer)((function(e){var t=(0,E.useTranslation)().t,r=e.privilegeSystemStore,n=r.privilegeSystemTreeData,a=r.getFunctionListListAction,P=r.deleteFunctionAction,_=r.updateFunctionSortAction,A=(0,O.useState)(""),M=(0,h.default)(A,2),F=M[0],C=M[1],N=(0,O.useState)(!1),U=(0,h.default)(N,2),z=U[0],B=U[1],V=(0,O.useState)({}),G=(0,h.default)(V,2),W=G[0],K=G[1],J=(0,O.useState)({}),Y=(0,h.default)(J,2),q=Y[0],H=Y[1],Q=(0,O.useState)({pageParam:{pageSize:9999,currentPage:1}}),X=(0,h.default)(Q,2),Z=X[0],$=X[1],ee=[{title:t("privilege-feature-name"),dataIndex:"name",key:"name",className:"column_bg_w"},{title:t("privilege-feature-code"),dataIndex:"code",key:"code"},{title:"操作",dataIndex:"action",className:"column_bg_w",width:"10%",render:function(e,t){return O.default.createElement(p.default,{size:"middle"},!t.parentFunction&&O.default.createElement(g.default,{title:"添加"},O.default.createElement(y.default,{onClick:function(){return re(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),O.default.createElement(g.default,{title:"编辑"},O.default.createElement(b.default,{onClick:function(){return ae(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),!t.children&&O.default.createElement(g.default,{title:"删除"},O.default.createElement(m.default,{placement:"topRight",title:"你确定删除吗",onConfirm:function(){return ie(t)},okText:"确定",cancelText:"取消"},O.default.createElement(v.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}))))}}];(0,O.useEffect)((function(){(0,s.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:case"end":return e.stop()}}),e)})))()}),[Z]);var te=function(){var e=(0,s.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Z);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=(0,O.useCallback)((function(e){C(e.id),B(!0)}),[]),ne=function(){var e=(0,s.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(""),K({}),B(!1),e.next=5,te();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(e){K(e),B(!0)},ie=function(){var e=(0,s.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.id);case 2:if(e.sent.code){e.next=6;break}return e.next=6,te();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=(0,O.useCallback)(function(){var e=(0,s.default)(c.default.mark((function e(t){var r,n,a,i,u,l,d,s,p,m,v,b,g,y,h,O,P,E,w,j,R,_;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dragId,n=t.dropId,a=t.drag,i=t.drop,u=a.sort,l=-1,d=[],s=[],p={},m={},!i.children){e.next=31;break}if([],b=q[n],g=i.children[0],!b){e.next=31;break}if(y=oe(g.id),p=L(L({},a),{},{parentFunction:y.parentFunction}),!(u<y.sort)){e.next=22;break}return v=[p].concat((0,f.default)(i.children)),e.next=18,le(v);case 18:return e.next=20,te();case 20:e.next=31;break;case 22:return l=i.children.findIndex((function(e){return e.id===y.id})),i.children.splice(l,0,a),i.children.forEach((function(e){s.push(e.sort)})),d=(0,D.sortNum)(s),i.children=i.children.map((function(e,t){return L(L({},e),{},{sort:d[t]})})),e.next=29,le(i.children);case 29:return e.next=31,te();case 31:i.parentFunction?(O=i.parentFunction.id,P=oe(O),h=P.children.filter((function(e){return e.id!==r})),l=h.findIndex((function(e){return e.id===i.id})),h.splice(l,0,L(L({},a),{},{parentFunction:P.children[0].parentFunction})),h.forEach((function(e){s.push(e.sort)})),d=(0,D.sortNum)(s),P.children=h.map((function(e,t){return L(L({},e),{},{sort:d[t]})})),le(P.children).then((function(e){te()}))):(a.children,E=a.sort,w=(0,o.default)(a,I),i.children,j=i.sort,R=(0,o.default)(i,T),a.parentFunction&&!i.parentFunction?(a.parentFunction.id,m=L(L({},R),{},{parentFunction:i.parentFunction,sort:E}),p=L(L({},w),{},{parentFunction:i.parentFunction,sort:j}),le([m,p]).then((function(e){te()}))):(_=[L(L({},w),{},{sort:j}),L(L({},R),{},{sort:E})],le(_).then((function(e){te()}))));case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,q]),le=function(){var e=(0,s.default)(c.default.mark((function e(t){var r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={list:t},e.next=3,_(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=(0,O.useCallback)((function(e){var t={};return function r(n){for(var a=0;a<n.length;a++){var i=n[a];if(i.id===e){t=i;break}i.children&&i.children.length>0&&r(i.children)}return t}((0,w.toJS)(n)),t}),[n]);return O.default.createElement(i.default,{className:"systemFeature"},O.default.createElement(u.default,{xs:{span:"24"},sm:{span:"24"},md:{span:"24"},lg:{span:"24"},xl:{span:"18",offset:"3"},xxl:{span:"18",offset:"3"}},O.default.createElement(x.BreadCrumb,{firstItem:"功能管理"},O.default.createElement(x.Btn,{type:"primary",onClick:function(){return B(!0)},title:t("privilege-add-feature")})),O.default.createElement("div",{style:{paddingBottom:15}},O.default.createElement(x.SearchInput,{placeholder:t("privilege-search")+t("privilege-orga-name"),onPressEnter:function(e){return function(e){var t=e.target.value;$(L(L({},Z),{},{name:t}))}(e)},style:{width:190}})),O.default.createElement("div",{id:"drag-sorting"},O.default.createElement(j.DndProvider,{backend:R.HTML5Backend},O.default.createElement(l.default,{dataSource:(0,w.toJS)(n),columns:ee,rowKey:"id",tableLayout:"fixed",pagination:!1,components:{body:{row:S.default}},onRow:function(e,t){return{record:e,data:(0,w.toJS)(n),index:t,moveRow:ue}},expandable:{onExpand:function(e,t){H(L(L({},q),{},(0,d.default)({},t.id,e)))}},locale:{emptyText:O.default.createElement(x.ListEmpty,null)}})))),O.default.createElement(k.default,{data:n,editData:W,visible:z,cancelAdd:ne,parentId:F,urlType:"system"}))})))},754:function(e,t,r){"use strict";var n=r(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(755));t.default=a.default},755:function(e,t,r){"use strict";var n=r(135);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=i?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(a,u,o):a[u]=e[u]}return a.default=e,r&&r.set(e,a),a}(r(0)),i=r(58),u=r(10);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}t.default=(0,i.inject)("systemRoleStore")((0,i.observer)((function(e){var t=e.projectRouters,r=e.outerPath,n=e.noAccessPath,i=e.domainId,l=e.pathKey,o=void 0===l?"id":l,c=e.systemRoleStore,f=c.domainPermissions,d=c.privilegeLoading,s=e.location.pathname,p=(0,u.getUser)().userId;return(0,a.useEffect)((function(){if(f){var a=f["".concat(p,"_").concat(i)];if(s===r)if(a&&a.length>0){var u=t.find((function(e){return a.includes(e.purviewCode)}));if(u)e.history.replace(u[o]);else{var l=t.find((function(e){return!e.purviewCode}));l&&e.history.replace(l[o])}}else{var c=t.find((function(e){return!e.purviewCode}));c&&e.history.replace(c[o])}else{var m=t.find((function(e){return e[o]===s}));if(m&&m.purviewCode&&!d&&!a.includes(m.purviewCode))return e.history.replace(n)}}}),[s,f]),e.children})))},794:function(e,t,r){"use strict";r(671)},795:function(e,t,r){"use strict";r(666)},796:function(e,t,r){"use strict";r(662)},797:function(e,t,r){"use strict";r(668)}}]);