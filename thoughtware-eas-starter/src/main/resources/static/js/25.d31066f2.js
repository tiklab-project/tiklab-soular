(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{568:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return v}));var r,a=n(0),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=a.createContext(null),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return a.createElement(o.Provider,{value:this.props.store},this.props.children)},t}(a.Component),c=n(221),u=n.n(c),s=n(223),m=n.n(s),f=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};var p=function(){return{}};function h(e,t){void 0===t&&(t={});var n=!!e,r=e||p;return function(i){var l=function(t){function l(e,n){var a=t.call(this,e,n)||this;return a.unsubscribe=null,a.handleChange=function(){if(a.unsubscribe){var e=r(a.store.getState(),a.props);a.setState({subscribed:e})}},a.store=a.context,a.state={subscribed:r(a.store.getState(),e),store:a.store,props:e},a}return f(l,t),l.getDerivedStateFromProps=function(t,n){return e&&2===e.length&&t!==n.props?{subscribed:r(n.store.getState(),t),props:t}:{props:t}},l.prototype.componentDidMount=function(){this.trySubscribe()},l.prototype.componentWillUnmount=function(){this.tryUnsubscribe()},l.prototype.shouldComponentUpdate=function(e,t){return!u()(this.props,e)||!u()(this.state.subscribed,t.subscribed)},l.prototype.trySubscribe=function(){n&&(this.unsubscribe=this.store.subscribe(this.handleChange),this.handleChange())},l.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},l.prototype.render=function(){var e=d(d(d({},this.props),this.state.subscribed),{store:this.store});return a.createElement(i,d({},e,{ref:this.props.miniStoreForwardedRef}))},l.displayName="Connect("+function(e){return e.displayName||e.name||"Component"}(i)+")",l.contextType=o,l}(a.Component);if(t.forwardRef){var c=a.forwardRef((function(e,t){return a.createElement(l,d({},e,{miniStoreForwardedRef:t}))}));return m()(c,i)}return m()(l,i)}}var b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function v(e){var t=e,n=[];return{setState:function(e){t=b(b({},t),e);for(var r=0;r<n.length;r++)n[r]()},getState:function(){return t},subscribe:function(e){return n.push(e),function(){var t=n.indexOf(e);n.splice(t,1)}}}}},598:function(e,t,n){var r={"./es":581,"./es-do":582,"./es-do.js":582,"./es-mx":583,"./es-mx.js":583,"./es-us":584,"./es-us.js":584,"./es.js":581,"./zh-cn":585,"./zh-cn.js":585};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=598},763:function(e,t,n){"use strict";n(104);var r=n(51),a=n(0),i=n.n(a),o=n(504);t.a=function(e){var t=e.firstItem,n=e.secondItem,a=e.onClick,l=e.children;return i.a.createElement("div",{className:"licence-breadcrumb"},i.a.createElement(r.default,null,i.a.createElement("span",{className:a?"licence-breadcrumb-first":"",onClick:a},a&&i.a.createElement(o.default,{style:{marginRight:8}}),i.a.createElement("span",{className:n?"licence-breadcrumb-span":""},t)),n&&i.a.createElement("span",null," /   ",n)),i.a.createElement("div",null,l))}},805:function(e,t,n){"use strict";n.r(t);n(327);var r=n(228),a=(n(493),n(494)),i=(n(497),n(498)),o=(n(510),n(508)),l=(n(325),n(225)),c=(n(219),n(63)),u=n(0),s=n.n(u),m=n(14),f=n(513),d=n(763),p=n(214),h=n(545),b=n.p+"images/licence-features.svg",v=n(589),y=n.n(v);function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t=e.bgroup,n=e.children,v=w(Object(u.useState)(null),2),N=v[0],S=v[1],_=w(Object(u.useState)(null),2),O=_[0],j=_[1],x=w(Object(u.useState)([]),2),C=x[0],k=x[1],A=w(Object(u.useState)({}),2),Y=A[0],I=A[1],D=w(Object(u.useState)(!1),2),T=D[0],M=D[1],P=w(Object(u.useState)(!1),2),F=P[0],U=P[1],L=w(Object(u.useState)(!0),2),H=L[0],R=L[1],z=window.location.origin;Object(u.useEffect)((function(){J()}),[]);var J=function(){m.Axios.post("/version/getVersion").then((function(e){0===e.code&&(I(e.data),localStorage.setItem(m.LOCALSTORAGE_KEY.VERSION_INFO,JSON.stringify(e.data)),e.data.expired||(V(),G())),R(!1)}))},V=function(){m.Axios.post("/licence/findUseLicence").then((function(e){0===e.code&&e.data&&j(e.data),6e3===e.code&&c.default.error(e.msg)}))},G=function(){m.Axios.post("/licence/findAllLicence").then((function(e){0===e.code&&S(e.data)}))},K={name:"file",action:z+("/"===z.substring(z.length-1,z.length)?"licence/import":"/licence/import"),onChange:function(e){var t=g(e.fileList);if(t=(t=t.slice(-1)).map((function(e){return e.response&&(e.url=e.response.url),e})),k(t),"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status){var n=e.file;return 0===n.response.code?(setTimeout((function(){k([]),J(),findProductAuthUserAll()}),1e3),c.default.success("licence导入成功")):c.default.error("licence导入失败：".concat(n.response.msg))}if("error"===e.file.status)return c.default.error("licence导入失败，请重新上传")}};return s.a.createElement(r.a,{spinning:H,tip:"加载中..."},s.a.createElement(a.default,{className:"thoughtware_version"},s.a.createElement(i.default,{sm:{span:24},xs:{span:24},md:{span:24},lg:{span:"16",offset:"4"},xl:{span:"14",offset:"5"}},s.a.createElement("div",{className:"thoughtware_version_container"},s.a.createElement(d.a,{firstItem:"版本与许可证"},s.a.createElement("div",{className:"thoughtware_version_up_btn"},2===(null==Y?void 0:Y.release)&&s.a.createElement(s.a.Fragment,null,s.a.createElement(o.a,E({},K,{fileList:C}),s.a.createElement(p.a,{isMar:!Y.expired,type:"primary"},"导入licence")),!Y.expired&&s.a.createElement(s.a.Fragment,null,s.a.createElement(p.a,{onClick:function(){return U(!0)}},"历史"),s.a.createElement(h.a,{visible:F,footer:null,onCancel:function(){return U(!1)},destroyOnClose:!0,width:800,title:s.a.createElement("div",{className:"info-item-title-te-modal-title"},s.a.createElement("div",null,"更多详情"),s.a.createElement("div",{onClick:function(){return U(!1)}},s.a.createElement(f.default,null)))},s.a.createElement("div",{className:"info-item-title-te-modal-info info-item-title-te-modal"},s.a.createElement("div",{className:"te-modal-info-item"},s.a.createElement("div",null,"生效时间"),s.a.createElement("div",null,"过期时间"),s.a.createElement("div",null,"用户数"),s.a.createElement("div",null,"状态")),N&&N.length>0?N.map((function(e,t){return s.a.createElement("div",{key:t,className:"te-modal-info-item"},s.a.createElement("div",null,y()(e.expiryTime).format("YYYY-MM-DD HH:mm:ss")),s.a.createElement("div",null,y()(e.issuedTime).format("YYYY-MM-DD HH:mm:ss")),s.a.createElement("div",null,e.userNum>0?e.userNum:"无限制"),s.a.createElement("div",null,1===e.state&&"已失效",2===e.state&&s.a.createElement("span",{className:"te-modal-info-item-blue"},"生效中"),3===e.state&&"未生效"))})):s.a.createElement("div",{className:"te-modal-info-item-empty"},"暂无历史"))))))),s.a.createElement("div",{className:"thoughtware_version-info"},s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"应用名称"),m.productTitle[t]),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("div",{className:"info-item-title"},"版本类型"),1===(null==Y?void 0:Y.release)?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"info-item-info"},"社区版",s.a.createElement("span",{className:"info-item-title-te",onClick:function(){return M(!0)}},s.a.createElement("img",{src:b,alt:"企业版特性",height:14,width:14}))),s.a.createElement("div",{onClick:function(){var e=1===Y.release?"ce":"ee";window.open("http:///thoughtware.cn/product/detail?code=".concat(t,"&type=").concat(e))},className:"info-item-action"},"升级"),s.a.createElement(h.a,{visible:T,footer:null,onCancel:function(){return M(!1)},destroyOnClose:!0,width:800,title:s.a.createElement("div",{className:"info-item-title-te-modal-title"},s.a.createElement("div",null,"企业版特性"),s.a.createElement("div",{onClick:function(){return M(!1)}},s.a.createElement(f.default,null)))},s.a.createElement("div",{className:"info-item-title-te-modal"},n))):Y.expired?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"info-item-info"},"企业版"),s.a.createElement("div",{className:"info-item-action",onClick:function(){window.open("http://thoughtware.cn/account/subscribe/info/".concat(t))}},"免费试用"),s.a.createElement("div",{className:"info-item-action",onClick:function(){window.open("http://thoughtware.cn/account/subscribe")}},"订阅")):s.a.createElement(s.a.Fragment,null,"企业版",s.a.createElement("div",{className:"info-item-action"},Y.expired?null!=O&&O.tryApply?s.a.createElement(l.default,{color:"#ff4d4f"},"试用已过期"):s.a.createElement(l.default,{color:"#ff4d4f"},"订阅已过期"):null!=O&&O.tryApply?s.a.createElement(l.default,{color:"#5d70ea"},"试用中"):s.a.createElement(l.default,{color:"#5d70ea"},"订阅中")))),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"用户数"),1===Y.release||Y.expired?"不限制":(null==O?void 0:O.userNum)>0?O.userNum+"人":"无限制"),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"生效时间"),null!=O&&O.expiryTime?y()(null==O?void 0:O.expiryTime).format("YYYY-MM-DD HH:mm:ss"):"--"),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"过期时间"),null!=O&&O.issuedTime?y()(null==O?void 0:O.issuedTime).format("YYYY-MM-DD HH:mm:ss"):"--"))))))},O=(n(496),n(495)),j=n(540),x="/Users/gaomengyuan/thoughtware/thoughtware-eas-ui/src/setting/licence/Version.js";t.default=function(){var e=[{title:"功能",dataIndex:"title",key:"title",colSpan:2,render:function(e,t,n){return{children:e,props:{rowSpan:t.rowSpan}}}},{title:"功能点",dataIndex:"feature",key:"feature",colSpan:0,render:function(e,t,n){return t.colSpan>0?null:e}},{title:"社区版",dataIndex:"ce",key:"ce",render:function(e,t,n){return t.colSpan>0?null:e?s.a.createElement(j.a,{style:{color:"var(--thoughtware-blue)",fontSize:"var(--thoughtware-icon-size-16)"},__source:{fileName:x,lineNumber:100,columnNumber:36}}):s.a.createElement(f.default,{style:{color:"red"},__source:{fileName:x,lineNumber:100,columnNumber:141}})}},{title:"企业版",dataIndex:"ee",key:"ee",render:function(e,t,n){return e?s.a.createElement(j.a,{style:{color:"var(--thoughtware-blue)",fontSize:"var(--thoughtware-icon-size-16)"},__source:{fileName:x,lineNumber:109,columnNumber:32}}):s.a.createElement(f.default,{style:{color:"red"},__source:{fileName:x,lineNumber:109,columnNumber:136}})}}];return s.a.createElement(_,{bgroup:"eas",__source:{fileName:x,lineNumber:115,columnNumber:9}},s.a.createElement(O.default,{bordered:!0,columns:e,dataSource:[{key:"1",title:"基本功能",feature:"用户和部门",ce:!0,ee:!0,rowSpan:2},{key:"2",title:"基本功能",feature:"权限",ce:!0,ee:!0,rowSpan:0},{key:"3",title:"升级功能",feature:"企业微信",ce:!1,ee:!0,rowSpan:4},{key:"4",title:"升级功能",feature:"LDAP",ce:!1,ee:!0,rowSpan:0},{key:"5",title:"升级功能",feature:"插件",ce:!1,ee:!0,rowSpan:0},{key:"6",title:"升级功能",feature:"在线客服",ce:!1,ee:!0,rowSpan:0}],pagination:!1,__source:{fileName:x,lineNumber:116,columnNumber:13}}))}}}]);